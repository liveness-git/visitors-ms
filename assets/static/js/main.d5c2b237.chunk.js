(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{425:function(e){e.exports=JSON.parse('{"login.form.email":"Email Address","login.form.password":"Password","login.form.submit":"Log In","login.form.required":"Required","login.form.invalid-pattern":"Invalid pattern"}')},426:function(e){e.exports=JSON.parse('{"common.form.required":"\u5fc5\u9808\u5165\u529b\u3067\u3059\u3002","common.button.ok":"OK","common.button.cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","common.button.search":"\u691c\u7d22","common.button.save":"\u4fdd\u5b58\u3059\u308b","common.button.delete":"\u524a\u9664\u3059\u308b","common.msg.login-success":"\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3057\u305f\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002","common.msg.login-failed":"\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","common.msg.no-data":"\u8a72\u5f53\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002","common.msg.fetch-failed":"\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","common.msg.update-success":"\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002","common.msg.update-failed":"\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","common.msg.authority-error":"\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\u3002","common.msg.prompt-logout":"\u53cd\u6620\u3059\u308b\u305f\u3081\u306b\u306f\u30ed\u30b0\u30a2\u30a6\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002","common.msg.delete-confirm":"\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","login.form.email":"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","login.form.password":"\u30d1\u30b9\u30ef\u30fc\u30c9","login.form.submit":"\u30ed\u30b0\u30a4\u30f3","login.form.invalid-pattern":"\u7121\u52b9\u306a\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002","login.msal.login":"Microsoft \u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3","visitlist.title":"\u6765\u8a2a\u4e00\u89a7","visittable.header.appt-time":"\u4e88\u7d04\u6642\u9593","visittable.header.room-name":"\u4f1a\u8b70\u5ba4\u540d","visittable.header.visit-company":"\u6765\u8a2a\u793e\u540d","visittable.header.visitor-name":"\u4ee3\u8868\u8005\u540d(\u656c\u79f0\u7565)","visittable.header.tea-supply":"\u5448\u8336","visittable.header.number-of-visitor":"\u6765\u8a2a\u8005\u6570","visittable.header.number-of-employee":"\u5f93\u696d\u54e1\u6570","visittable.header.usage-range":"\u5229\u7528\u7bc4\u56f2","visittable.header.comment":"\u30b3\u30e1\u30f3\u30c8","visittable.header.reservation-name":"\u4e88\u7d04\u8005","visittable.header.contact-addr":"\u9023\u7d61\u5148","visittable.header.check-in":"IN","visittable.header.check-out":"OUT","visittable.header.resource-status":"\u4f1a\u8b70\u5ba4\u72b6\u614b","visittable.header.event-subject":"\u4ef6\u540d","visittable.header.event-mailto-authors":"\u4e88\u7d04\u8005\u304a\u3088\u3073\u7ba1\u7406\u8005","visittable.header.event-mailto-required":"\u5fc5\u9808\u53c2\u52a0\u8005","visittable.header.event-mailto-optional":"\u4efb\u610f\u53c2\u52a0\u8005","visittable.header.event-room":"\u4f1a\u8b70\u5ba4","visittable.header.event-start-time":"\u958b\u59cb\u6642\u523b","visittable.header.event-end-time":"\u7d42\u4e86\u6642\u523b","visittable.header.visitor-card-number":"\u30ab\u30fc\u30c9\u756a\u53f7","visittable.header.edit-action":"\u7de8\u96c6","visitdialog.view.resource-status-accepted":"\u627f\u8afe","visitdialog.view.resource-status-declined":"\u8f9e\u9000","visitdialog.view.usage-range.outside":"\u793e\u5916\u4f1a\u8b70","visitdialog.view.usage-range.inside":"\u793e\u5185\u4f1a\u8b70","visitdialog.view.tea-supply.number-of-visitor":"\u6765","visitdialog.view.tea-supply.number-of-employee":"\u5f93","visitdialog.title":"\u4e88\u7d04\u60c5\u5831","visitdialog.header.last-updated":"\u6700\u7d42\u66f4\u65b0\u65e5\u6642","visitdialog.notes.multiple-locations":"\u203b\u8907\u6570\u306e\u5834\u6240(\u4f1a\u8b70\u5ba4\u4ee5\u5916\u542b\u3080)\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u4e00\u90e8\u6a5f\u80fd\u306f\u7de8\u96c6\u3067\u304d\u307e\u305b\u3093","visitdialog.notes.no-relevant-rooms":"\u4e88\u7d04\u53ef\u80fd\u306a\u4f1a\u8b70\u5ba4\u304c\u3042\u308a\u307e\u305b\u3093","visitdialog.notes.reservation-status-declined":"\u4e88\u7d04\u8005\u304c\u3053\u306e\u4e88\u7d04\u3092\u8f9e\u9000\u3057\u3066\u3044\u307e\u3059","visitdialog.notes.reply-status":"\u8fd4\u4fe1\u72b6\u6cc1","visitdialog.notes.user-status-none":"\u306a\u3057","visitdialog.notes.user-status-tentatively-accepted":"\u4eee\u627f\u8afe","visitdialog.notes.user-status-accepted":"\u627f\u8afe","visitdialog.notes.user-status-declined":"\u8f9e\u9000","visitdialog.button.check-in":"\u30c1\u30a7\u30c3\u30af\u30a4\u30f3","visitdialog.button.check-out":"\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8","visitdialog.form.tea-supply-yes":"\u3042\u308a","visitdialog.form.tea-supply-no":"\u306a\u3057","visitdialog.form.visitor-card-number":"\u30ab\u30fc\u30c9\u756a\u53f7","visitdialog.form.visitor-card-number-placeholder":"\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044","visitdialog.form.error.event-time":"\u65e5\u4ed8\u306e\u95a2\u4fc2\u6027\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059","visitdialog.form.error.available-time":"\u4f1a\u8b70\u5ba4\u304c\u7a7a\u3044\u3066\u3044\u307e\u305b\u3093","visitdialog.form.error.room-not-covered":"\u4f1a\u8b70\u5ba4\u3092\u9078\u629e\u3057\u306a\u304a\u3057\u3066\u304f\u3060\u3055\u3044","auto-complete.no-options-text":"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306f\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044","visitorinfoform.title":"\u6765\u8a2a\u60c5\u5831","visitorinfoform.delete-confirm-title":"\u6765\u8a2a\u60c5\u5831\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","visitorinfoform.delete-confirm-message":"\u4e88\u7d04\u60c5\u5831\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","visitorinfolist.title":"\u6765\u8a2a\u4e00\u89a7","export-csv.title":"\u6765\u8a2a\u60c5\u5831 CSV\u51fa\u529b","export-csv.start-date":"\u958b\u59cb\u65e5","export-csv.end-date":"\u7d42\u4e86\u65e5","export-csv.button.export-csv":"CSV\u51fa\u529b","export-csv.form.error.event-time":"\u65e5\u4ed8\u306e\u95a2\u4fc2\u6027\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059","export-csv.msg.export-success":"CSV\u30d5\u30a1\u30a4\u30eb\u3092\u51fa\u529b\u3057\u307e\u3057\u305f\u3002","export-csv.msg.export-failed":"CSV\u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","export-csv.file.header.category":"\u30ab\u30c6\u30b4\u30ea","export-csv.file.header.appt-time":"\u4e88\u7d04\u6642\u9593","export-csv.file.header.room-name":"\u4f1a\u8b70\u5ba4\u540d","export-csv.file.header.tea-supply":"\u5448\u8336","export-csv.file.header.number-of-visitor":"\u6765\u8a2a\u8005\u6570","export-csv.file.header.number-of-employee":"\u5f93\u696d\u54e1\u6570","export-csv.file.header.visit-company":"\u6765\u8a2a\u793e\u540d","export-csv.file.header.visitor-name":"\u4ee3\u8868\u8005\u540d(\u656c\u79f0\u7565)","export-csv.file.header.check-in":"\u30a4\u30f3","export-csv.file.header.visitor-card-number":"\u30ab\u30fc\u30c9\u756a\u53f7","export-csv.file.header.check-out":"\u30a2\u30a6\u30c8","export-csv.file.header.reservation-name":"\u4e88\u7d04\u8005","export-csv.file.header.contact-addr":"\u9023\u7d61\u5148","export-csv.file.header.subject":"\u4ef6\u540d","export-csv.file.header.comment":"\u30b3\u30e1\u30f3\u30c8","export-csv.file.tea-supply-yes":"\u3042\u308a","export-csv.file.tea-supply-no":"\u306a\u3057","main.menu.created-visit-info":"\u81ea\u5206\u306e\u4f1a\u8b70\u4e88\u7d04","main.menu.by-meeting-room":"\u4f1a\u8b70\u5ba4\u5225","main.menu.front":"\u53d7\u4ed8","main.menu.settings":"\u8a2d\u5b9a","main.menu.settings.role":"\u30ed\u30fc\u30eb","main.menu.settings.location":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3","main.menu.settings.category":"\u30ab\u30c6\u30b4\u30ea","main.menu.settings.room":"\u4f1a\u8b70\u5ba4","main.menu.refresh":"refresh","main.menu.logout":"\u30ed\u30b0\u30a2\u30a6\u30c8","main.header.picker-label":"\u9078\u629e\u65e5","main.header.add-event":"\u65b0\u898f\u4f5c\u6210","main.header.export-csv":"CSV\u51fa\u529b","main.visitlist.title":"\u304b\u3089\uff11\u304b\u6708\u9593\u306e\u6765\u8a2a\u60c5\u5831","main.visitlist.subtitle":"\u81ea\u5206\u304c\u53c2\u52a0\u4e88\u5b9a\u306e\u4e88\u7d04\u3092\u8868\u793a\u3057\u307e\u3059\u3002","main.visitlist.subtitle.created-only":"\u81ea\u5206\u304c\u4f5c\u6210\u3057\u305f\u4e88\u7d04\u3092\u8868\u793a\u3057\u307e\u3059\u3002","main.byroom.title":"\u306e\u6765\u8a2a\u60c5\u5831","main.byroom.subtitle":"","main.byroom-weekly.title":"\u304b\u3089\uff11\u9031\u9593\u306e\u6765\u8a2a\u60c5\u5831","main.byroom-weekly.subtitle":"","main.front.title":"\u306e\u53d7\u4ed8\u60c5\u5831","settings.title.role":"\u30ed\u30fc\u30eb\u8a2d\u5b9a","settings.title.location":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a","settings.title.category":"\u30ab\u30c6\u30b4\u30ea\u8a2d\u5b9a","settings.title.room":"\u4f1a\u8b70\u5ba4\u8a2d\u5b9a","settings.add-master":"\u65b0\u898f\u4f5c\u6210","settings.header.role.name":"\u30ed\u30fc\u30eb\u540d","settings.header.role.members":"\u30e1\u30f3\u30d0\u30fc","settings.header.location.name":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u540d","settings.header.location.url":"url\u30d1\u30b9\u540d","settings.header.location.sort":"\u8868\u793a\u9806","settings.header.category.name":"\u30ab\u30c6\u30b4\u30ea\u540d","settings.header.category.sort":"\u8868\u793a\u9806","settings.header.category.limited-public":"\u9650\u5b9a\u516c\u958b","settings.header.category.members":"\u30e1\u30f3\u30d0\u30fc","settings.header.room.name":"\u4f1a\u8b70\u5ba4\u540d","settings.header.room.email":"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","settings.header.room.type":"\u7a2e\u5225","settings.header.room.usage-range":"\u5229\u7528\u7bc4\u56f2","settings.header.room.sort":"\u8868\u793a\u9806","settings.header.room.tea-supply":"\u5448\u8336","settings.header.room.members":"\u30e1\u30f3\u30d0\u30fc","settings.header.room.location":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3","settings.header.room.category":"\u30ab\u30c6\u30b4\u30ea","settings.view.role.name.admin":"\u7ba1\u7406\u8005","settings.view.role.name.front":"\u30d5\u30ed\u30f3\u30c8","settings.view.room.type.rooms":"\u4f1a\u8b70\u5ba4","settings.view.room.type.free":"\u30d5\u30ea\u30fc\u30b9\u30da\u30fc\u30b9","settings.view.room.usage-range.none":"\u5236\u9650\u306a\u3057","settings.view.room.usage-range.outside":"\u793e\u5916\u7528","settings.view.room.usage-range.inside":"\u793e\u5185\u7528","settings.form.common.error.association":"\u4ed6\u306e\u8a2d\u5b9a\u3067\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002","settings.form.role.error.name.unique":"\u3053\u306e\u30ed\u30fc\u30eb\u306f\u65e2\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002","settings.form.location.error.url.unique":"\u3053\u306eurl\u306f\u65e2\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002","settings.form.location.error.url.pattern":"\u534a\u89d2\u306e\u5c0f\u6587\u5b57\u82f1\u6570\u5b57\u306e\u307f\u5165\u529b\u3067\u304d\u307e\u3059\u3002","settings.form.room.error.email.unique":"\u3053\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u65e2\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002","settings.form.room.error.email.pattern":"\u7121\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002"}')},585:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),c=a.n(i),s=a(624),o=a(117),l=a(392),d=a.n(l),u={light:"#336bbd",main:"#0046AD",dark:"#003179",contrastText:"#fff"},j=Object(o.b)({palette:{primary:u,secondary:d.a},typography:{button:{textTransform:"none"}},props:{MuiTextField:{variant:"outlined"}},mixins:{toolbar:{minHeight:50}},overrides:{MuiTooltip:{tooltip:{fontSize:"1em"}}}}),b=a(625),m=a(48),p=a(45),O=a(13),h=a.n(O),f=a(21),x=a(10),v=a(640),g=a(614),y=a(638),k=a(59),w=a(121),C=a(291),N=a(615),S=a(613),D=a(1);function T(){return Object(D.jsxs)(k.a,{variant:"body2",color:"textSecondary",align:"center",children:["Version. 1.0.0 - Copyright \xa9 ",Object(D.jsx)(S.a,{color:"inherit",href:"https://www.liveness.co.jp/",children:"liveness, Inc."})," ",(new Date).getFullYear(),"."]})}var I=a(60),E=a(431),F=a(355),R=Object(I.a)((function(e){return{root:{zIndex:e.zIndex.tooltip+1,color:"#fff"}}}));function M(e){var t=R();return Object(D.jsx)(E.a,{className:t.root,open:e.open,children:Object(D.jsx)(F.a,{color:"inherit"})})}var V=function(){return Object(I.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))};function L(e){return B.apply(this,arguments)}function B(){return(B=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.prev=3,e.next=6,a.json();case 6:a.parsedBody=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:if(a.ok){e.next=14;break}throw console.error("Server Error: ",null===(n=a.parsedBody)||void 0===n?void 0:n.body),new Error(a.statusText);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function P(e){return A.apply(this,arguments)}function A(){return A=Object(f.a)(h.a.mark((function e(t){var a,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{method:"get"},e.next=3,L(new Request(t,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function q(e,t){return z.apply(this,arguments)}function z(){return z=Object(f.a)(h.a.mark((function e(t,a){var n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:{method:"post",body:JSON.stringify(a)},e.next=3,L(new Request(t,n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}var H="liveness-visitor-temp",W="liveness-visitor-user",K=function(e){sessionStorage.setItem(W,e)},J="liveness-visitor-reload",U=function(e,t){var a=JSON.parse(sessionStorage.getItem(J));a[e]=t,sessionStorage.setItem(J,JSON.stringify(a))},G=function(e){return JSON.parse(sessionStorage.getItem(J))[e]},Y="liveness-visitor-reload-flg",Z=function(){return sessionStorage.getItem(Y)},$=function(){sessionStorage.removeItem(Y)},X=function(){sessionStorage.removeItem(W),sessionStorage.removeItem(J),$()},_=V();function Q(){var e=Object(v.a)().t,t=_(),a=Object(p.h)(),r=Object(n.useState)(!1),i=Object(x.a)(r,2),c=i[0],s=i[1],o=function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),n=a.params.location,sessionStorage.setItem(H,n),e.next=5,P("/oauth/signin");case 5:(t=e.sent).parsedBody&&(window.location.href=t.parsedBody.url),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}var n}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(D.jsx)(M,{open:c}),Object(D.jsxs)("div",{className:t.paper,children:[Object(D.jsx)(y.a,{className:t.avatar,children:Object(D.jsx)(N.a,{})}),Object(D.jsx)(k.a,{component:"h1",variant:"h5",children:"LIVENESS Visitors for Microsoft"}),Object(D.jsx)(w.a,{onClick:o,fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:e("login.msal.login")})]}),Object(D.jsx)(C.a,{mt:8,children:Object(D.jsx)(T,{})})]})}var ee=a(7),te=a(616),ae=a(635);function ne(e){return Object(D.jsx)(ae.a,Object(ee.a)({elevation:6,variant:"filled"},e))}var re=function(e,t){switch(t.type){case"hide":return Object(ee.a)(Object(ee.a)({},e),{},{open:!1});case"success":case"info":case"warning":case"error":return Object(ee.a)(Object(ee.a)({},e),{},{open:!0,severity:t.type,message:t.message});default:return e}};function ie(e){var t=e.severity,a=e.message,n=e.open,r=e.onClose;return Object(D.jsx)(te.a,{open:n,autoHideDuration:1500,onClose:r,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(D.jsx)(ne,{onClose:r,severity:t,children:a})})}var ce=Object(n.createContext)({});function se(e){var t=e.children,a=Object(n.useReducer)(re,{severity:"info",message:"",open:!1}),r=Object(x.a)(a,2),i=r[0],c=r[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ie,Object(ee.a)(Object(ee.a)({},i),{},{onClose:function(e,t){"clickaway"!==t&&c({type:"hide"})}})),Object(D.jsx)(ce.Provider,{value:{state:i,dispatch:c},children:t})]})}var oe=V();function le(){return Object(D.jsx)(se,{children:Object(D.jsx)(de,{})})}function de(){var e=oe(),t=Object(v.a)().t,a=Object(n.useContext)(ce),r=Object(n.useState)(!0),i=Object(x.a)(r,2),c=i[0],s=i[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(f.a)(h.a.mark((function e(){var n,r,i,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.location.search,e.next=4,P("/oauth/callback"+n);case 4:if(!(r=e.sent).parsedBody){e.next=18;break}if(s(!1),r.parsedBody.ok?a.dispatch({type:"success",message:t("common.msg.login-success")}):a.dispatch({type:"error",message:t("common.msg.login-failed")}),i=sessionStorage.getItem(H),sessionStorage.removeItem(H),i&&"undefined"!==i){e.next=15;break}return e.next=13,P("/location/first");case 13:(c=e.sent).parsedBody&&(i=c.parsedBody.url);case 15:o="/".concat(i,"/main"),"undefined"===i&&(o="/settings/location"),setTimeout((function(){window.location.replace(o)}),1500);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(D.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(D.jsx)(M,{open:c}),Object(D.jsxs)("div",{className:e.paper,children:[Object(D.jsx)(y.a,{className:e.avatar,children:Object(D.jsx)(N.a,{})}),Object(D.jsx)(k.a,{component:"h1",variant:"h5",children:"LIVENESS Visitors for Microsoft"})]}),Object(D.jsx)(C.a,{mt:8,children:Object(D.jsx)(T,{})})]})}var ue=a(152),je=a(3),be=a(149),me=a(77),pe=a(618),Oe=a(293),he=a(593),fe=a(620),xe=a(227),ve=a.n(xe),ge=a(170),ye=a(594),ke=a(621),we=a(623),Ce=a(212),Ne=a(358),Se=a(359),De=a(622),Te=a(619),Ie=a(395),Ee=a.n(Ie),Fe=a(397),Re=a.n(Fe),Me=a(398),Ve=a.n(Me),Le=a(399),Be=a.n(Le),Pe=a(400),Ae=a.n(Pe),qe=a(401),ze=a.n(qe),He=a(402),We=a.n(He),Ke=a(403),Je=a.n(Ke),Ue=a(292),Ge=a(296);function Ye(e,t){var a=Object(n.useState)(t),r=Object(x.a)(a,2),i=r[0],c=r[1],s=Object(n.useState)(!1),o=Object(x.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)(!1),j=Object(x.a)(u,2),b=j[0],m=j[1],p=Object(n.useCallback)(Object(f.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!1),d(!0),t.prev=2,t.next=5,P(e);case 5:(a=t.sent).parsedBody&&c(a.parsedBody),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),m(!0),console.log(t.t0);case 13:d(!1);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),[e]),O=Object(n.useCallback)(Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p());case 1:case"end":return e.stop()}}),e)}))),[p]);return Object(n.useEffect)((function(){p()}),[p]),[{data:i,isLoading:l,isError:b},O]}function Ze(){var e=Ye("/location/choices",[]),t=Object(x.a)(e,1)[0].data,a=Object(p.g)(),r=Object(p.h)(),i=Object(n.useState)(r.params.location),c=Object(x.a)(i,2),s=c[0],o=c[1];return t&&0!==t.length?Object(D.jsx)(Ue.a,{color:"primary",margin:"dense",size:"small",children:Object(D.jsx)(Ge.a,{style:{color:"white"},value:s,onChange:function(e){o(e.target.value);var t=r.path.replace(/:location/i,e.target.value);a.push(t)},children:t.map((function(e){return Object(D.jsx)(Ne.a,{value:e.url,children:e.name},e.url)}))})}):Object(D.jsx)(D.Fragment,{})}var $e=Object(I.a)((function(e){return Object(be.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:230,width:"calc(100% - ".concat(230,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},toolbar:{paddingRight:24},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},location:{color:"white"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:230,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},drawerCloseIcon:Object(ee.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),calendarHidden:{display:"none"},pageTitle:{marginBottom:e.spacing(1)},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.87)"},nested:{paddingLeft:e.spacing(10)}})})),Xe=function(e){var t=e.children,a=e.adminMode,i=e.frontMode,c=e.menuOpen,s=Object(v.a)().t,o=$e(),l=Object(p.h)(),d=Object(n.useState)(!!c),u=Object(x.a)(d,2),j=u[0],b=u[1],O=Object(n.useState)(!0),y=Object(x.a)(O,2),w=y[0],N=y[1];Object(n.useEffect)((function(){j||N(!1)}),[j]);var S=r.a.useState(null),I=Object(x.a)(S,2),E=I[0],F=I[1],R=Boolean(E),M=function(){F(null)},V=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("/oauth/signout");case 3:e.sent.ok&&(X(),window.location.href="/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),L={signedIn:!1,email:"",name:"",isAdmin:!1,isFront:!1},B=Object(n.useReducer)((function(e,t){switch(t.type){case"signedIn":return{signedIn:!0,email:t.user.email,name:t.user.name,isAdmin:t.user.isAdmin,isFront:t.user.isFront};case"signedOut":return L;default:return e}}),L),A=Object(x.a)(B,2),q=A[0],z=A[1],H=Object(n.useCallback)(Object(f.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=sessionStorage.getItem(W))){e.next=7;break}a=JSON.parse(t),z({type:"signedIn",user:a}),e.next=11;break;case 7:return e.next=9,P("/user/me");case 9:(n=e.sent).parsedBody?(r=n.parsedBody,K(JSON.stringify(r)),z({type:"signedIn",user:r})):(X(),z({type:"signedOut"}),console.log("Failed to retrieve email"));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),X(),window.location.href="/login";case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[]);Object(n.useEffect)((function(){H()}),[H]),Object(n.useEffect)((function(){Z()||sessionStorage.setItem(J,"{}")}),[]);var U=t,G=Object(D.jsx)(D.Fragment,{children:s("common.msg.authority-error")});return a&&!q.isAdmin&&(U=G),i&&!q.isFront&&(U=G),q.signedIn?Object(D.jsx)(se,{children:Object(D.jsxs)("div",{className:o.root,children:[Object(D.jsx)(pe.a,{position:"absolute",className:Object(je.a)(o.appBar,j&&o.appBarShift),children:Object(D.jsxs)(Oe.a,{className:o.toolbar,children:[Object(D.jsx)(ge.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){b(!0)},className:Object(je.a)(o.menuButton,j&&o.menuButtonHidden),children:Object(D.jsx)(Ee.a,{})}),Object(D.jsx)(k.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:o.title,children:"LIVENESS Visitors for Microsoft"}),Object(D.jsx)("div",{children:Object(D.jsx)(Ze,{})}),Object(D.jsxs)("div",{children:[Object(D.jsx)(ge.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){F(e.currentTarget)},color:"inherit",children:Object(D.jsx)(Te.a,{})}),Object(D.jsxs)(Ce.a,{id:"menu-appbar",anchorEl:E,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:R,onClose:M,children:[Object(D.jsx)(Ne.a,{onClick:M,children:q.email}),Object(D.jsx)(Ne.a,{onClick:V,children:s("main.menu.logout")})]})]})]})}),Object(D.jsxs)(me.a,{variant:"permanent",classes:{paper:Object(je.a)(o.drawerPaper,!j&&o.drawerPaperClose)},open:j,children:[Object(D.jsx)("div",{className:o.drawerCloseIcon,children:Object(D.jsx)(ge.a,{onClick:function(){b(!1)},children:Object(D.jsx)(ve.a,{})})}),Object(D.jsx)(fe.a,{}),Object(D.jsxs)(he.a,{children:[Object(D.jsx)(m.b,{to:"/".concat(l.params.location,"/main"),className:o.link,children:Object(D.jsxs)(ye.a,{button:!0,children:[Object(D.jsx)(Se.a,{title:s("main.menu.created-visit-info"),children:Object(D.jsx)(ke.a,{children:Object(D.jsx)(Re.a,{})})}),Object(D.jsx)(De.a,{primary:s("main.menu.created-visit-info")})]})}),Object(D.jsx)(m.b,{to:"/".concat(l.params.location,"/main/byroom"),className:o.link,children:Object(D.jsxs)(ye.a,{button:!0,children:[Object(D.jsx)(Se.a,{title:s("main.menu.by-meeting-room"),children:Object(D.jsx)(ke.a,{children:Object(D.jsx)(Ve.a,{})})}),Object(D.jsx)(De.a,{primary:s("main.menu.by-meeting-room")})]})}),q.isFront&&Object(D.jsx)(m.b,{to:"/".concat(l.params.location,"/front"),className:o.link,children:Object(D.jsxs)(ye.a,{button:!0,children:[Object(D.jsx)(Se.a,{title:s("main.menu.front"),children:Object(D.jsx)(ke.a,{children:Object(D.jsx)(Be.a,{})})}),Object(D.jsx)(De.a,{primary:s("main.menu.front")})]})}),q.isAdmin&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(ye.a,{button:!0,onClick:function(){j||b(!0),N(!w)},children:[Object(D.jsx)(ke.a,{children:Object(D.jsx)(Ae.a,{})}),Object(D.jsx)(De.a,{primary:s("main.menu.settings")}),w?Object(D.jsx)(ze.a,{}):Object(D.jsx)(We.a,{})]}),Object(D.jsxs)(we.a,{in:w,timeout:"auto",unmountOnExit:!0,children:[Object(D.jsx)(m.b,{to:"/".concat(l.params.location,"/settings/role"),className:o.link,children:Object(D.jsx)(ye.a,{button:!0,className:o.nested,children:Object(D.jsx)(De.a,{primary:s("main.menu.settings.role")})})}),Object(D.jsx)(m.b,{to:"/".concat(l.params.location,"/settings/location"),className:o.link,children:Object(D.jsx)(ye.a,{button:!0,className:o.nested,children:Object(D.jsx)(De.a,{primary:s("main.menu.settings.location")})})}),Object(D.jsx)(m.b,{to:"/".concat(l.params.location,"/settings/category"),className:o.link,children:Object(D.jsx)(ye.a,{button:!0,className:o.nested,children:Object(D.jsx)(De.a,{primary:s("main.menu.settings.category")})})}),Object(D.jsx)(m.b,{to:"/".concat(l.params.location,"/settings/room"),className:o.link,children:Object(D.jsx)(ye.a,{button:!0,className:o.nested,children:Object(D.jsx)(De.a,{primary:s("main.menu.settings.room")})})})]})]}),Object(D.jsxs)(ye.a,{button:!0,onClick:function(){sessionStorage.setItem(Y,"1"),window.location.reload()},children:[Object(D.jsx)(Se.a,{title:s("main.menu.refresh"),children:Object(D.jsx)(ke.a,{children:Object(D.jsx)(Je.a,{})})}),Object(D.jsx)(De.a,{primary:s("main.menu.refresh")})]})]})]}),Object(D.jsxs)("main",{className:o.content,children:[Object(D.jsx)("div",{className:o.appBarSpacer}),Object(D.jsxs)(g.a,{maxWidth:"lg",className:o.container,children:[U,Object(D.jsx)(C.a,{pt:4,children:Object(D.jsx)(T,{})})]})]})]})}):Object(D.jsx)(D.Fragment,{})};function _e(){var e=Object(n.useState)(new Date),t=Object(x.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){Z()||U("selectedDate",a.getTime().toString())}),[a]),[a,r]}var Qe=a(109),et=a.n(Qe),tt=a(405),at=a.n(tt),nt=a(414),rt=a.n(nt),it=a(406),ct=a.n(it),st=a(300),ot=a.n(st),lt=a(299),dt=a.n(lt),ut=a(407),jt=a.n(ut),bt=a(408),mt=a.n(bt),pt=a(410),Ot=a.n(pt),ht=a(411),ft=a.n(ht),xt=a(412),vt=a.n(xt),gt=a(415),yt=a.n(gt),kt=a(409),wt=a.n(kt),Ct=a(413),Nt=a.n(Ct),St=a(416),Dt=a.n(St),Tt={Add:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(at.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(ct.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(dt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(jt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(ot.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(mt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(wt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(Ot.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(ft.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(vt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(ot.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(ve.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(dt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(Nt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(rt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(yt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(D.jsx)(Dt.a,Object(ee.a)(Object(ee.a)({},e),{},{ref:t}))}))},It={paging:!0,pageSize:10,pageSizeOptions:[5,10,20,50]},Et=a(176),Ft="12px 6px",Rt=function(e){var t=e?Ft:"";return Object(I.a)((function(){return{cellApptTime:{padding:t},cellRoomName:{padding:t},cellTeaSupply:{padding:t},cellRoomStatus:{padding:t},cellReservationName:{padding:t},cellVisitCompany:{padding:t},cellVisitorName:{padding:t},cellSubject:{padding:t},cellContactAddr:{padding:t},cellCheckIn:{padding:t,overflowWrap:"break-word"},cellCheckOut:{padding:t,overflowWrap:"break-word"},cellComment:{padding:t},declinedApptTime:{textDecoration:"line-through 2px solid red"},declinedRoomName:{"&::after":{wordBreak:"keep-all",marginLeft:5,padding:"1px 5px",color:"red",border:"1px solid red",content:'"'.concat(Et.a.t("visitdialog.view.resource-status-declined"),'"')}}}}))},Mt=function(e,t,a){var n=e.charAt(0).toUpperCase()+e.slice(1);return Object(je.a)(a["cell".concat(n)],"declined"===t.roomStatus&&a["declined".concat(n)])},Vt=a(134),Lt=Object(o.b)({palette:{primary:{main:Vt.a[300]},secondary:{main:u.main}},props:{MuiTableRow:{}},overrides:{MuiTable:{root:{borderCollapse:"separate"}}}}),Bt=function(){var e="thin solid rgba(0, 0, 0, 0.12)";return Object(I.a)((function(t){return{list:{display:"flex","&:first-child > div":{borderTop:e}},title:{boxSizing:"border-box",flexBasis:"25%",padding:"0.7em",backgroundColor:t.palette.primary.light,borderLeft:e,borderBottom:e},field:{boxSizing:"border-box",flexBasis:"75%",padding:"0.7em",borderRight:e,borderBottom:e,whiteSpace:"pre-wrap"},fieldSlim:{boxSizing:"border-box",flexBasis:"75%",padding:"0.2em",borderRight:e,borderBottom:e,whiteSpace:"pre-wrap"},bottomLine:{borderBottom:e}}}))},Pt=a(98),At=a(27),qt=a(247),zt=a(239),Ht=a.n(zt),Wt=a(238),Kt=a.n(Wt),Jt=a(631),Ut=a(71),Gt=a.n(Ut),Yt=["rooms","free"],Zt=["outside","inside"],$t=["none"].concat(Zt);function Xt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=Object(f.a)(h.a.mark((function e(t,a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t,a);case 3:if(n=e.sent,!(r=n.parsedBody)){e.next=9;break}return e.abrupt("return",Promise.resolve(r));case 9:return e.abrupt("return",Promise.reject(new Error("No Result Error")));case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var Qt=a(229);function ea(e){var t=e.name,a=e.control,n=e.label,r=e.required,i=e.selectList,c=e.multiline,s=e.disabled,o=e.validation,l=e.errors,d=Object(v.a)().t,u=Object(ee.a)({required:!!r&&d("common.form.required")},o);return Object(D.jsx)(At.a,{name:t,control:a,rules:u,render:function(e){var a=e.field;return Object(D.jsx)(Qt.a,Object(ee.a)(Object(ee.a)({},a),{},{label:n,disabled:s,multiline:c,select:!!i,error:!!l[t],helperText:l[t]&&l[t].message,children:!!i&&i.map((function(e,a){return Object(D.jsx)(Ne.a,{value:e.value,children:e.label},"".concat(t,"-").concat(a))}))}))}})}var ta=a(636),aa=a(122),na=a(390),ra=a(25),ia=a(301),ca=a.n(ia),sa=a(237),oa=a.n(sa),la=a(417),da=a.n(la),ua="1.3em",ja=function(e){var t=e.status,a=Object(ra.a)();return"none"===t?Object(D.jsx)(da.a,{style:{color:a.palette.text.secondary,fontSize:ua}}):"tentativelyAccepted"===t?Object(D.jsx)(ca.a,{style:{color:a.palette.warning.main,fontSize:ua}}):"accepted"===t?Object(D.jsx)(ca.a,{style:{color:a.palette.success.main,fontSize:ua}}):Object(D.jsx)(oa.a,{style:{color:a.palette.error.main,fontSize:ua}})},ba=["option"],ma=function(e){var t=e.option,a=Object(aa.a)(e,ba);return Object(D.jsx)(na.a,Object(ee.a)({variant:"outlined",size:"small",icon:t.status?ja({status:t.status}):void 0,label:t.name,title:t.address,style:{fontSize:"0.9em"}},a))};function pa(e){var t=e.name,a=e.control,r=e.label,i=e.errors,c=e.disabled,s=e.style,o=Object(v.a)().t,l=Object(n.useState)(""),d=Object(x.a)(l,2),u=d[0],j=d[1],b=Ye("/user/addressbook?filter=".concat(u),[]),m=Object(x.a)(b,1)[0],p=m.data,O=m.isLoading,g=Object(n.useState)(!1),y=Object(x.a)(g,2),k=y[0],w=y[1];Object(n.useEffect)((function(){k||j("")}),[k]);var C=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(At.a,{name:t,control:a,render:function(e){var a=e.field;return Object(D.jsx)(ta.a,Object(ee.a)(Object(ee.a)({},a),{},{disabled:c,style:s,multiple:!0,limitTags:c?void 0:2,size:"small",open:k,onOpen:function(){w(!0)},onClose:function(){w(!1)},options:p&&u?p:[],filterOptions:function(e,t){return e},noOptionsText:o("auto-complete.no-options-text"),loading:O,getOptionLabel:function(e){return"".concat(e.name," <").concat(e.address,">")},renderTags:function(e,t){return e.map((function(e,a){return Object(D.jsx)(ma,Object(ee.a)({option:e},t({index:a})))}))},filterSelectedOptions:!0,getOptionSelected:function(e,t){return e.address===t.address},renderInput:function(e){return Object(D.jsx)(Qt.a,Object(ee.a)(Object(ee.a)({},e),{},{label:r,error:!!i[t],helperText:i[t]&&i[t].message,InputProps:Object(ee.a)(Object(ee.a)({},e.InputProps),{},{endAdornment:Object(D.jsxs)(D.Fragment,{children:[O?Object(D.jsx)(F.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}),onChange:function(e){""===e.target.value&&null===e.target.value||C(e.target.value)}}))},onChange:function(e,t){return a.onChange(t)}}))}})}var Oa=a(597),ha=a(598),fa=a(599),xa=a(627),va=Object(I.a)((function(e){return Object(be.a)({root:{margin:0,padding:e.spacing(1.5),paddingLeft:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(.75),top:e.spacing(.75),color:e.palette.grey[500]}})}));function ga(e){var t=e.open,a=e.onClose,n=e.title,r=e.children,i=Object(v.a)().t,c=va();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Oa.a,{open:t,onClose:function(e,t){t&&"backdropClick"===t||a()},fullWidth:!0,maxWidth:"sm","aria-labelledby":"form-dialog-title",children:[Object(D.jsxs)(xa.a,{id:"form-dialog-title",className:c.root,children:[n,Object(D.jsx)(ge.a,{className:c.closeButton,onClick:a,children:Object(D.jsx)(oa.a,{})})]}),Object(D.jsx)(fa.a,{dividers:!0,children:r}),Object(D.jsx)(ha.a,{style:{display:"none"},children:Object(D.jsx)(w.a,{onClick:a,children:i("common.button.cancel")})})]})})}var ya=["none","tentativelyAccepted","accepted","declined"],ka=function(){var e=Object(v.a)().t;return Object(D.jsx)(D.Fragment,{children:ya.map((function(t,a){return Object(D.jsx)(na.a,{variant:"outlined",size:"small",icon:ja({status:t}),label:e("visitdialog.notes.user-status-".concat(Gt.a.kebabCase(t))),style:{fontSize:"0.9em",marginLeft:"5px",border:"none"}},a)}))})},wa=a(626);function Ca(e){var t=e.open,a=e.onClose,n=Object(v.a)().t;return Object(D.jsx)("div",{children:Object(D.jsxs)(Oa.a,{open:t,onClose:function(){a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(D.jsx)(fa.a,{children:Object(D.jsx)(wa.a,{id:"alert-dialog-description",children:n("visitorinfoform.delete-confirm-message")})}),Object(D.jsxs)(ha.a,{children:[Object(D.jsx)(w.a,{onClick:function(){a(!0)},color:"secondary",children:"OK"}),Object(D.jsx)(w.a,{onClick:function(){a(!1)},color:"secondary",autoFocus:!0,children:"CANCEL"})]})]})})}var Na=a(360),Sa=a(629);function Da(e){var t=e.control,a=e.setValue,r=e.rooms,i=e.roomId,c=e.disabledVisitor,s=e.disabledRoom,o=e.errors,l=Object(v.a)().t,d=Object(n.useState)(!1),u=Object(x.a)(d,2),j=u[0],b=u[1],m=Object(At.e)({control:t,name:"resourcies.".concat(i,".roomForEdit")});Object(n.useEffect)((function(){if(m&&r){var e=r.some((function(e){return e.id===m&&e.teaSupply}));e||a("resourcies.".concat(i,".teaSupply"),!1,{shouldDirty:!0}),b(!e)}else a("resourcies.".concat(i,".teaSupply"),!1,{shouldDirty:!0}),b(!0)}),[i,m,r,a]);var p=Object(n.useState)(!1),O=Object(x.a)(p,2),h=O[0],f=O[1],g=Object(At.e)({control:t,name:"resourcies.".concat(i,".teaSupply")});Object(n.useEffect)((function(){g||(a("resourcies.".concat(i,".numberOfVisitor"),0,{shouldDirty:!0}),a("resourcies.".concat(i,".numberOfEmployee"),0,{shouldDirty:!0})),f(!g)}),[g,a,i]),Object(n.useEffect)((function(){c&&a("resourcies.".concat(i,".numberOfVisitor"),0,{shouldDirty:!0})}),[a,c,i]);var y=function(e){return Object(Ut.get)(o,"resourcies.".concat(i,".").concat(e))};return 0===(null===r||void 0===r?void 0:r.length)?Object(D.jsx)(C.a,{px:2,style:{textAlign:"center",color:"red"},children:l("visitdialog.notes.no-relevant-rooms")}):Object(D.jsxs)(C.a,{px:2,children:[Object(D.jsx)(At.a,{name:"resourcies.".concat(i,".roomForEdit"),control:t,rules:{required:l("common.form.required"),validate:function(e){return r.some((function(t){return t.id===e}))?void 0:l("visitdialog.form.error.room-not-covered")}},render:function(e){var t=e.field;return Object(D.jsx)(Qt.a,Object(ee.a)(Object(ee.a)({},t),{},{select:!0,disabled:s,label:l("visittable.header.event-room"),error:!!y("roomForEdit"),helperText:!!y("roomForEdit")&&y("roomForEdit").message,children:r.map((function(e){return Object(D.jsxs)(Ne.a,{value:e.id,children:[e.name," ","<",e.email,">"]},e.id)}))}))}}),Object(D.jsxs)(qt.a,{container:!0,spacing:1,style:j?{display:"none"}:void 0,children:[Object(D.jsx)(qt.a,{item:!0,xs:4,children:Object(D.jsx)(Na.a,{control:Object(D.jsx)(At.a,{name:"resourcies.".concat(i,".teaSupply"),control:t,render:function(e){var t=e.field;return Object(D.jsx)(Sa.a,{onChange:function(e){return t.onChange(e.target.checked)},checked:t.value,color:"primary",disabled:j})}}),label:l("visittable.header.tea-supply")})}),Object(D.jsx)(qt.a,{item:!0,xs:4,style:c?{opacity:0}:void 0,children:Object(D.jsx)(At.a,{name:"resourcies.".concat(i,".numberOfVisitor"),control:t,rules:{required:l("common.form.required")},render:function(e){var t=e.field;return Object(D.jsx)(Qt.a,Object(ee.a)(Object(ee.a)({type:"number",inputProps:{min:0,style:{textAlign:"right"}}},t),{},{disabled:h||c,label:l("visittable.header.number-of-visitor"),error:!!y("numberOfVisitor"),helperText:!!y("numberOfVisitor")&&y("numberOfVisitor").message}))}})}),Object(D.jsx)(qt.a,{item:!0,xs:4,children:Object(D.jsx)(At.a,{name:"resourcies.".concat(i,".numberOfEmployee"),control:t,rules:{required:l("common.form.required")},render:function(e){var t=e.field;return Object(D.jsx)(Qt.a,Object(ee.a)(Object(ee.a)({type:"number",inputProps:{min:0,style:{textAlign:"right"}}},t),{},{disabled:h,label:l("visittable.header.number-of-employee"),error:!!y("numberOfEmployee"),helperText:!!y("numberOfEmployee")&&y("numberOfEmployee").message}))}})})]})]})}var Ta=Bt(),Ia=function(e){switch(e){case"accepted":return"visitdialog.view.resource-status-accepted";case"declined":return"visitdialog.view.resource-status-declined";default:return""}};function Ea(e){var t=e.data,a=e.hiddenTeaSupply,n=Object(v.a)().t,r=Ta();return Object(D.jsx)(C.a,{px:2,pt:2,children:Object(D.jsxs)(he.a,{disablePadding:!0,children:[Object(D.jsxs)("li",{className:r.list,children:[Object(D.jsx)("div",{className:r.title,children:n("visittable.header.room-name")}),Object(D.jsxs)("div",{className:r.field,children:[t.roomName," ","<",t.roomEmail,">"]})]},"room-name"),Object(D.jsxs)("li",{className:r.list,children:[Object(D.jsx)("div",{className:r.title,children:n("visittable.header.resource-status")}),Object(D.jsx)("div",{className:r.field,children:n(Ia(t.roomStatus))})]},"resource-status"),!a&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("li",{className:r.list,children:[Object(D.jsx)("div",{className:r.title,children:n("visittable.header.tea-supply")}),Object(D.jsx)("div",{className:r.field,children:t.teaSupply?n("visitdialog.form.tea-supply-yes"):n("visitdialog.form.tea-supply-no")})]},"tea-supply"),t.teaSupply&&Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("li",{className:r.list,children:[Object(D.jsx)("div",{className:r.title,children:n("visittable.header.number-of-visitor")}),Object(D.jsx)("div",{className:r.field,style:{flexBasis:"25%",borderRight:"none"},children:t.numberOfVisitor}),Object(D.jsx)("div",{className:r.title,style:{flexBasis:"25%",borderLeft:"none"},children:n("visittable.header.number-of-employee")}),Object(D.jsx)("div",{className:r.field,style:{flexBasis:"25%"},children:t.numberOfEmployee})]},"number-of-visitor")})]})]})})}var Fa=a(277);function Ra(e){var t=e.name,a=e.control,n=e.getValues,r=e.label,i=e.handleDateTimeChange,c=e.errors,s=Object(v.a)().t;return Object(D.jsx)(At.a,{name:t,control:a,rules:{required:s("common.form.required"),validate:function(){return n("startTime").getTime()<n("endTime").getTime()||s("visitdialog.form.error.event-time")}},render:function(e){var a=e.field;return Object(D.jsx)(Fa.a,Object(ee.a)(Object(ee.a)({},a),{},{onChange:function(e){a.onChange(e),i()},ampm:!1,format:"yyyy/MM/dd HH:mm",disablePast:!0,minutesStep:5,label:r,error:!!c[t],helperText:c[t]&&c[t].message,ref:null}))}})}var Ma=a(418),Va=a.n(Ma);var La=function(e){var t=e.name,a=e.status,n=Object(v.a)().t;return Object(D.jsxs)(D.Fragment,{children:[t,"declined"===a&&Object(D.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",flexWrap:"wrap",color:"red",verticalAlign:"bottom",marginLeft:15,fontSize:"0.95em"},children:[Object(D.jsx)(Va.a,{fontSize:"small",style:{marginRight:3}}),n("visitdialog.notes.reservation-status-declined")]})]})},Ba=a(146),Pa=function(e){var t=e.datetime;Object(v.a)().t;return Object(D.jsx)(D.Fragment,{children:Object(Ba.default)(t,"yyyy/MM/dd HH:mm:ss")})},Aa=Bt(),qa=Object(I.a)((function(e){return Object(be.a)({formAction:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},note:{color:"red",fontSize:"0.9em",marginTop:0},usageGuide:{marginTop:"5px"}})})),za=Object(o.b)({palette:{primary:{main:u.main},secondary:{main:Vt.a[300]}},props:{MuiTextField:{variant:"outlined",margin:"dense",fullWidth:!0,minRows:4}}}),Ha=function(e){return 1e3*Math.ceil(e.getTime()/1e3/60/5)*60*5},Wa="add-room-01",Ka=function(e,t,a){var n=e||new Date,r=t||"";return{mode:"ins",iCalUId:"",subject:"",visitorId:"",visitCompany:"",visitorName:"",mailto:{authors:[],required:[],optional:[]},usageRange:a||"outside",resourcies:Object(Pt.a)({},Wa,{roomForEdit:r,teaSupply:!1,numberOfVisitor:0,numberOfEmployee:0}),comment:"",contactAddr:"",startTime:Object(Jt.a)(Ha(n),0),endTime:Object(Jt.a)(Ha(n),30)}};function Ja(e){var t=e.open,a=e.onClose,r=e.data,i=e.reload,c=e.addDefault,o=Object(v.a)().t,l=Object(ee.a)(Object(ee.a)({},Aa()),qa()),d=Object(n.useContext)(ce),u=Object(p.h)(),j=Object(n.useState)(!1),b=Object(x.a)(j,2),m=b[0],O=b[1],g=Ka(),y=Object(At.c)({defaultValues:g,reValidateMode:"onSubmit"}),N=y.control,S=y.getValues,T=y.handleSubmit,I=y.reset,E=y.setValue,F=y.trigger,R=y.setError,V=y.formState,L=V.errors,B=V.isDirty,P=V.isSubmitting,A=V.dirtyFields;Object(n.useEffect)((function(){I(t&&r?{mode:"upd",iCalUId:r.iCalUId,subject:r.subject,visitorId:r.visitorId,visitCompany:r.visitCompany,visitorName:r.visitorName,mailto:r.mailto,usageRange:r.usageRange,resourcies:Object.keys(r.resourcies).reduce((function(e,t){return e[t]={roomForEdit:t,teaSupply:r.resourcies[t].teaSupply,numberOfVisitor:r.resourcies[t].numberOfVisitor,numberOfEmployee:r.resourcies[t].numberOfEmployee},e}),{}),comment:r.comment,contactAddr:r.contactAddr,startTime:new Date(r.startDateTime),endTime:new Date(r.endDateTime)}:Gt.a.cloneDeep(Ka(null===c||void 0===c?void 0:c.start,null===c||void 0===c?void 0:c.roomId,null===c||void 0===c?void 0:c.usageRange)))}),[r,t,I,c]);var q=Object(n.useState)(!1),z=Object(x.a)(q,2),H=z[0],W=z[1],K=Object(At.e)({control:N,name:"usageRange"}),J="/room/choices?location=".concat(u.params.location),U=Object(n.useState)(J),G=Object(x.a)(U,2),Y=G[0],Z=G[1],$=Ye(Y,[]),X=Object(x.a)($,1)[0].data,_=Object(n.useCallback)((function(){"upd"===S("mode")?Z(J):Z(J+"&start=".concat(S("startTime").getTime(),"&end=").concat(S("endTime").getTime())+"&usagerange=".concat(S("usageRange")))}),[J,S]);Object(n.useEffect)((function(){t&&_()}),[_,t,K]),Object(n.useEffect)((function(){t||W(!1)}),[t]);var Q=Object(n.useState)(!1),te=Object(x.a)(Q,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){"inside"===K?(E("visitCompany","",{shouldDirty:!0}),E("visitorName","",{shouldDirty:!0}),ne(!0)):ne(!1)}),[E,K]);var re=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,r,c,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n="",e.t0=t.mode,e.next="ins"===e.t0?5:"upd"===e.t0?7:"del"===e.t0?9:11;break;case 5:return n="/event/create",e.abrupt("break",11);case 7:return n="/event/update",e.abrupt("break",11);case 9:return n="/event/delete",e.abrupt("break",11);case 11:return e.next=13,Xt(n,{inputs:t,dirtyFields:A});case 13:if(!(r=e.sent).success){e.next=24;break}if("del"!==t.mode){e.next=18;break}return e.next=18,new Promise((function(e){return setTimeout(e,1e3)}));case 18:return e.next=20,i();case 20:a(),d.dispatch({type:"success",message:o("common.msg.update-success")}),e.next=25;break;case 24:if(r.errors)for(s in c=r.errors)R(l=s,{message:o(c[l][0])});case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(0),d.dispatch({type:"error",message:e.t1.message});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(["startTime","endTime"]);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:_(),W(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){"upd"!==S("mode")&&(H||W(!0))};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{open:P}),Object(D.jsx)(ga,{open:t,onClose:a,title:o("visitdialog.title"),children:Object(D.jsxs)(s.a,{theme:za,children:[!!r&&Object(D.jsx)(C.a,{px:2,children:Object(D.jsxs)(he.a,{disablePadding:!0,children:[r.isMSMultipleLocations?Object(D.jsx)("li",{className:l.bottomLine,children:Object(D.jsx)("p",{className:l.note,children:o("visitdialog.notes.multiple-locations")})}):Object(D.jsxs)("li",{className:l.list,children:[Object(D.jsx)("div",{className:l.title,children:o("visittable.header.resource-status")}),Object(D.jsx)("div",{className:l.field,children:o(Ia(r.roomStatus))})]},"resource-status"),Object(D.jsxs)("li",{className:l.list,children:[Object(D.jsx)("div",{className:l.title,children:o("visittable.header.reservation-name")}),Object(D.jsx)("div",{className:l.field,children:Object(D.jsx)(La,{name:r.reservationName,status:r.reservationStatus})})]},"reservation-name")]})}),Object(D.jsxs)("form",{children:[Object(D.jsxs)(C.a,{p:2,children:[Object(D.jsx)(ea,{name:"subject",control:N,label:o("visittable.header.event-subject"),required:!0,errors:L}),!!r&&Object(D.jsxs)(k.a,{variant:"caption",display:"block",className:l.usageGuide,children:[o("visitdialog.notes.reply-status"),Object(D.jsx)(ka,{})]}),Object(D.jsx)(pa,{name:"mailto.authors",control:N,label:o("visittable.header.event-mailto-authors"),errors:L,disabled:!0,style:{display:"none"}}),Object(D.jsx)(pa,{name:"mailto.required",control:N,label:o("visittable.header.event-mailto-required"),errors:L,disabled:null===r||void 0===r?void 0:r.isMSMultipleLocations}),Object(D.jsx)(pa,{name:"mailto.optional",control:N,label:o("visittable.header.event-mailto-optional"),errors:L,disabled:null===r||void 0===r?void 0:r.isMSMultipleLocations}),Object(D.jsx)(C.a,{py:1,style:r?{display:"none"}:void 0,children:Object(D.jsx)(ea,{name:"usageRange",control:N,label:o("visittable.header.usage-range"),required:!0,selectList:Zt.map((function(e){return{label:o("visitdialog.view.usage-range.".concat(e)),value:e}})),disabled:!!r,errors:L})}),Object(D.jsxs)(qt.a,{container:!0,spacing:1,children:[Object(D.jsx)(qt.a,{item:!0,xs:5,children:Object(D.jsx)(Ra,{name:"startTime",control:N,getValues:S,label:o("visittable.header.event-start-time"),handleDateTimeChange:function(){var e=Object(Jt.a)(Ha(S("startTime")),30);E("endTime",e,{shouldDirty:!0}),se()},errors:L})}),Object(D.jsx)(qt.a,{item:!0,xs:5,children:Object(D.jsx)(Ra,{name:"endTime",control:N,getValues:S,label:o("visittable.header.event-end-time"),handleDateTimeChange:function(){se()},errors:L})}),Object(D.jsx)(qt.a,{item:!0,xs:2,style:{margin:"auto"},children:Object(D.jsx)(w.a,{onClick:ie,variant:"contained",color:"primary",fullWidth:!0,disabled:(null===r||void 0===r?void 0:r.isMSMultipleLocations)||!H,style:"upd"===S("mode")?{display:"none"}:void 0,children:o("common.button.search")})})]})]}),r?Object(D.jsx)(D.Fragment,{children:r.isMSMultipleLocations?Object(D.jsx)(s.a,{theme:Lt,children:Object.keys(r.resourcies).map((function(e){return Object(D.jsx)(Ea,{data:r.resourcies[e]},e)}))}):!H&&Object(D.jsx)(Da,{control:N,setValue:E,rooms:X,roomId:Object.keys(r.resourcies)[0],disabledRoom:!0,disabledVisitor:"inside"===r.usageRange,errors:L})}):!H&&Object(D.jsx)(Da,{control:N,setValue:E,rooms:X,roomId:Wa,disabledVisitor:ae,errors:L}),Object(D.jsxs)(C.a,{p:2,style:ae?{display:"none"}:void 0,children:[Object(D.jsx)(ea,{name:"visitCompany",control:N,label:o("visittable.header.visit-company"),required:!ae,disabled:ae,errors:L}),Object(D.jsx)(ea,{name:"visitorName",control:N,label:o("visittable.header.visitor-name"),disabled:ae,errors:L})]}),Object(D.jsxs)(C.a,{p:2,children:[Object(D.jsx)(ea,{name:"comment",control:N,label:o("visittable.header.comment"),multiline:!0,errors:L}),Object(D.jsx)(ea,{name:"contactAddr",control:N,label:o("visittable.header.contact-addr"),required:!0,errors:L})]}),!!r&&Object(D.jsx)(C.a,{px:2,children:Object(D.jsx)(he.a,{disablePadding:!0,children:Object(D.jsxs)("li",{className:l.list,children:[Object(D.jsx)("div",{className:l.title,children:o("visitdialog.header.last-updated")}),Object(D.jsx)("div",{className:l.field,children:Object(D.jsx)(Pa,{datetime:r.lastUpdated})})]},"datetime")})}),Object(D.jsx)(C.a,{px:2,children:Object(D.jsxs)(qt.a,{container:!0,justifyContent:"space-between",spacing:2,className:l.formAction,children:[Object(D.jsx)(qt.a,{item:!0,xs:r?6:12,children:Object(D.jsx)(w.a,{onClick:function(){T(re)()},variant:"contained",color:"primary",disabled:!B||H,startIcon:Object(D.jsx)(Kt.a,{}),fullWidth:!0,children:o("common.button.save")})}),Object(D.jsx)(qt.a,{item:!0,xs:6,style:r?void 0:{display:"none"},children:Object(D.jsx)(w.a,{onClick:function(){O(!0)},variant:"contained",color:"primary",startIcon:Object(D.jsx)(Ht.a,{}),fullWidth:!0,children:o("common.button.delete")})})]})})]})]})}),Object(D.jsx)(Ca,{open:m,onClose:function(e){O(!1),e&&(E("mode","del"),T(re)())}})]})}var Ua=Object(I.a)((function(e){return Object(be.a)({root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}})}));function Ga(e){var t=e.key,a=e.data,n=Ua();return Object(D.jsx)("div",{className:n.root,children:a.map((function(e,a){return Object(D.jsx)(ma,{option:e},"".concat(t,"-").concat(a))}))})}var Ya=Bt();function Za(e){var t=e.open,a=e.onClose,n=e.data,r=Object(v.a)().t,i=Ya();return n.isAttendees?Object(D.jsxs)(ga,{open:t,onClose:a,title:r("visitdialog.title"),children:[Object(D.jsx)(C.a,{px:2,pt:2,children:Object(D.jsxs)(he.a,{disablePadding:!0,children:[Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.event-subject")}),Object(D.jsx)("div",{className:i.field,children:n.subject})]},"event-subject"),Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.appt-time")}),Object(D.jsx)("div",{className:i.field,children:n.apptTime})]},"app-time"),Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.reservation-name")}),Object(D.jsx)("div",{className:i.field,children:Object(D.jsx)(La,{name:n.reservationName,status:n.reservationStatus})})]},"reservation-name")]})}),Object(D.jsxs)(C.a,{px:2,pt:2,children:[Object(D.jsxs)(k.a,{variant:"caption",display:"block",gutterBottom:!0,children:[r("visitdialog.notes.reply-status"),Object(D.jsx)(ka,{})]}),Object(D.jsxs)(he.a,{disablePadding:!0,children:[Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.event-mailto-required")}),Object(D.jsx)("div",{className:i.fieldSlim,children:Object(D.jsx)(Ga,{data:n.mailto.required},"mailto-required")})]},"mailto-required"),Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.event-mailto-optional")}),Object(D.jsx)("div",{className:i.fieldSlim,children:Object(D.jsx)(Ga,{data:n.mailto.optional},"mailto-optional")})]},"mailto-optional")]})]}),Object.keys(n.resourcies).map((function(e){return Object(D.jsx)(Ea,{data:n.resourcies[e]},e)})),Object(D.jsx)(C.a,{px:2,pt:2,style:"inside"===n.usageRange?{display:"none"}:void 0,children:Object(D.jsxs)(he.a,{disablePadding:!0,children:[Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.visit-company")}),Object(D.jsx)("div",{className:i.field,children:n.visitCompany})]},"visit-company"),Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.visitor-name")}),Object(D.jsx)("div",{className:i.field,children:n.visitorName})]},"visitor-name")]})}),Object(D.jsx)(C.a,{p:2,pt:2,children:Object(D.jsxs)(he.a,{disablePadding:!0,children:[Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.comment")}),Object(D.jsx)("div",{className:i.field,children:n.comment})]},"comment"),Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visittable.header.contact-addr")}),Object(D.jsx)("div",{className:i.field,children:n.contactAddr})]},"contact-addr")]})}),Object(D.jsx)(C.a,{px:2,pb:2,children:Object(D.jsx)(he.a,{disablePadding:!0,children:Object(D.jsxs)("li",{className:i.list,children:[Object(D.jsx)("div",{className:i.title,children:r("visitdialog.header.last-updated")}),Object(D.jsx)("div",{className:i.field,children:Object(D.jsx)(Pa,{datetime:n.lastUpdated})})]},"datetime")})})]}):Object(D.jsx)(ga,{open:t,onClose:a,title:r("visitdialog.title"),children:r("common.msg.authority-error")})}var $a=function(e,t){switch(t.type){case"inputOpen":return{mode:"rowData",inputOpen:!0,readOpen:!1};case"addDataOpen":return{mode:"addData",inputOpen:!0,readOpen:!1,addDefault:t.addDefault};case"inputClose":return Object(ee.a)(Object(ee.a)({},e),{},{inputOpen:!1});case"readOpen":return{mode:"rowData",inputOpen:!1,readOpen:!0};case"readClose":return Object(ee.a)(Object(ee.a)({},e),{},{readOpen:!1});default:return e}};function Xa(e){var t=e.dataDialogHook,a=e.isLoading,n=e.reload,r=e.currentRow,i=e.children,c=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch({type:"inputClose"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch({type:"readClose"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(s.a,{theme:Lt,children:[Object(D.jsx)(M,{open:a}),i,Object(D.jsx)(Ja,{open:t.state.inputOpen,onClose:c,data:"addData"===t.state.mode?null:r,reload:n,addDefault:t.state.addDefault}),!!r&&Object(D.jsx)(Za,{open:t.state.readOpen,onClose:o,data:r})]})}var _a=Rt(!1);function Qa(e){var t=e.currentDate,a=e.dataDialogHook,r=Object(v.a)().t,i=_a(),c=Object(p.h)(),s=Ye("/event/visitlist?timestamp=".concat(t.getTime(),"&location=").concat(c.params.location),[]),o=Object(x.a)(s,2),l=o[0],d=l.data,u=l.isLoading,j=l.isError,b=o[1],m=Object(n.useState)(null),O=Object(x.a)(m,2),h=O[0],f=O[1],g=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),f(e)}),[a]),y=[{title:r("visittable.header.appt-time"),field:"apptTime"},{title:r("visittable.header.room-name"),field:"roomName"},{title:r("visittable.header.event-subject"),field:"subject"},{title:r("visittable.header.visit-company"),field:"visitCompany"},{title:r("visittable.header.reservation-name"),field:"reservationName"}];return j?Object(D.jsx)("div",{children:r("common.msg.fetch-failed")}):Object(D.jsx)(Xa,{currentRow:h,dataDialogHook:a,isLoading:u,reload:b,children:Object(D.jsx)(et.a,{columns:y,components:{Cell:function(e){return Object(D.jsx)(Qe.MTableCell,Object(ee.a)(Object(ee.a)({},e),{},{className:Mt(e.columnDef.field,e.rowData,i)}))}},data:d,onRowClick:function(e,t){return!!t&&g(t)},options:Object(ee.a)({showTitle:!1,toolbar:!1,search:!1,headerStyle:{backgroundColor:Lt.palette.primary.light},tableLayout:"fixed"},It),icons:Tt})})}var en=a(240),tn=a.n(en),an=a(276),nn=Object(I.a)({keyboardDatePicker:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:0}}});var rn=function(e){var t=e.label,a=e.date,n=e.onChange,r=nn();return Object(D.jsx)(an.b,{margin:"normal",id:"date-picker-dialog",label:t,format:"yyyy/MM/dd",showTodayButton:!0,value:a,onChange:n,KeyboardButtonProps:{"aria-label":"change date"},size:"small",className:r.keyboardDatePicker,inputProps:{style:{width:85}}})},cn=Object(I.a)((function(){return{datePicker:{margin:"auto 0"},title:{margin:"auto 0.25em"}}}));function sn(e){var t=e.title,a=e.subtitle,n=e.date,r=e.onDateChange,i=e.dispatch,c=e.actionButtons,s=Object(v.a)().t,o=cn();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(qt.a,{container:!0,alignItems:"stretch",justifyContent:"space-between",children:[Object(D.jsxs)(qt.a,{container:!0,item:!0,xs:12,sm:c?6:9,children:[Object(D.jsx)(qt.a,{item:!0,className:o.datePicker,children:Object(D.jsx)(rn,{label:s("main.header.picker-label"),date:n,onChange:r})}),Object(D.jsx)(qt.a,{item:!0,className:o.title,children:Object(D.jsx)(k.a,{component:"h5",children:t})})]}),Object(D.jsxs)(qt.a,{container:!0,item:!0,justifyContent:"flex-end",alignItems:"center",spacing:2,xs:12,sm:c?6:3,children:[!!c&&c.map((function(e,t){return Object(D.jsx)(qt.a,{item:!0,children:e},"actionButtons-".concat(t))})),Object(D.jsx)(qt.a,{item:!0,children:Object(D.jsx)(w.a,{variant:"contained",color:"secondary",startIcon:Object(D.jsx)(tn.a,{}),onClick:function(e){i({type:"addDataOpen"})},children:s("main.header.add-event")})})]}),Object(D.jsx)(C.a,{pt:1,children:a})]})})}function on(){var e=Object(v.a)().t,t=Object(n.useState)(!1),a=Object(x.a)(t,2),r=a[0],i=a[1];Object(n.useEffect)((function(){i(!1)}),[]);var c=_e(),s=Object(x.a)(c,2),o=s[0],l=s[1],d=Object(n.useReducer)($a,{mode:"addData",inputOpen:!1,readOpen:!1}),u=Object(x.a)(d,2),j=u[0],b=u[1];return Object(n.useEffect)((function(){Z()&&(l(new Date(Number(G("selectedDate")))),$())}),[]),Object(D.jsx)(Xe,{children:Object(D.jsxs)(ue.a,{square:!0,children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(sn,{title:e("main.visitlist.title"),subtitle:e("main.visitlist.subtitle".concat(r?".created-only":"")),date:o,onDateChange:function(e){l(e)},dispatch:b})}),Object(D.jsx)(C.a,{px:2,pb:2,children:Object(D.jsx)(Qa,{currentDate:o,dataDialogHook:{state:j,dispatch:b}})})]})})}var ln=a(5),dn=a(148),un=a(637),jn=a(404),bn=a(298),mn=a(150),pn=a(245),On={width:120,halfWidth:60,scale:2,transform:{x:-960,y:0}},hn=30,fn=function(e,t){var a=Object(dn.a)(e);return Object(un.a)(e,a)*t.scale},xn=function(e,t,a){var n=new Date(e.start),r=new Date(e.end),i=fn(n,t),c=fn(r,t);if(!Object(jn.a)(n,r)){var s=Object(dn.a)(a),o=Object(bn.a)(a);Object(mn.a)(o,r)&&(c=fn(o,t)),Object(pn.a)(s,n)&&(i=fn(s,t))}return{x:i,width:c-i,className:e.status}},vn=function(e,t){return(e+1)*t+1},gn=function(e){return"translate(".concat(e.transform.x,",").concat(e.transform.y,")")},yn=Object(ln.a)((function(e){return{tooltip:{backgroundColor:e.palette.grey[100],color:e.palette.text.primary,maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid ".concat(e.palette.grey[300])}}}))(Se.a),kn=Object(I.a)((function(e){return Object(be.a)({container:{display:"flex",flexDirection:"column",marginBottom:"0.5rem","& svg":{fontSize:"1.5rem","& line":{strokeWidth:2},"& line.hour-line":{stroke:e.palette.grey[400]},"& line.hour-half-line":{stroke:e.palette.grey[300]},"& text":{fill:e.palette.grey[400]},"& text.subject":{fill:"#fff",fontSize:"1.2rem",dominantBaseline:"central",cursor:"pointer"},"& rect":{strokeWidth:1,fillOpacity:.5},"& rect.new-event-bar":{fillOpacity:0},"& rect.event":{stroke:e.palette.success.main,fill:e.palette.success.light,fillOpacity:.9,cursor:"pointer"},"& rect.myOwn":{stroke:e.palette.info.main,fill:e.palette.info.light},"& rect.wait":{stroke:e.palette.warning.light,fill:e.palette.warning.main},"& rect.busy":{stroke:e.palette.error.light,fill:e.palette.error.main}}},title:{fontSize:"1rem",paddingBottom:0}})}));function wn(e){var t=e.dataDialogHook,a=e.schedule,r=e.events,i=e.onClickCallback,c=e.keyLabel,s=e.keyValue,o=e.onTitleClick,l=kn(),d=Object(n.useState)(On),u=Object(x.a)(d,2),j=u[0],b=(u[1],Object(n.useState)(gn(j))),m=Object(x.a)(b,2),p=m[0],O=m[1];Object(n.useEffect)((function(){O(gn(j))}),[j,r]);var h=31,f=39,v="free"===a.type?70+f*(a.scheduleItems.length-1)+f:70,g=Object(n.useCallback)((function(e,t,a,n){var r=xn(e,j,new Date(a));return Object(D.jsx)("rect",{className:r.className,x:r.x,y:h+f*n,width:r.width,height:f,rx:3,ry:5},"".concat(s,"-sc-").concat(t))}),[j,s,h,f]),y=Object(n.useCallback)((function(e,t,a,n){var r={status:"event",start:e.startDateTime,end:e.endDateTime},c=xn(r,j,new Date(a)),o=c.x,l=h+f*n,d=c.width,u=e.isAttendees?"myOwn":"";return Object(D.jsx)(yn,{title:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(k.a,{variant:"body2",children:e.subject}),Object(D.jsx)("em",{children:e.apptTime})," ",Object(D.jsx)("b",{children:e.reservationName})]}),onClick:function(){i(e)},children:Object(D.jsx)("svg",{x:o,y:l,width:d,height:39,viewBox:"0 0 ".concat(d," ").concat(39),children:Object(D.jsxs)("g",{children:[Object(D.jsx)("rect",{className:Object(je.a)(c.className,u),x:0,y:0,width:d,height:39,rx:3,ry:5}),Object(D.jsx)("text",{className:"subject",x:3,y:"50%",children:e.subject})]})})},"".concat(s,"-ev-").concat(t))}),[j,h,f,s,i]),C=Object(n.useMemo)((function(){return Object(D.jsx)(D.Fragment,{children:a.scheduleItems.map((function(e,t){return e.map((function(e,n){return g(e,n,a.date,t)}))}))})}),[g,a]),N=Object(n.useMemo)((function(){return Object(D.jsx)(D.Fragment,{children:r.map((function(e,t){return e.map((function(e,n){return y(e,n,a.date,t)}))}))})}),[y,r,a]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(w.a,{color:"secondary",className:l.title,size:"small",onClick:function(){return o(a.date,a.categoryId,a.roomId)},children:c}),Object(D.jsx)("div",{className:l.container,children:Object(D.jsx)("svg",{viewBox:"0 0 ".concat(1442," ").concat(v),preserveAspectRatio:"none",children:Object(D.jsxs)("g",{transform:p,children:[Object(D.jsx)("line",{className:"hour-line",x1:0,y1:0,x2:0,y2:v}),Object(D.jsx)("line",{className:"hour-half-line",x1:j.halfWidth,y1:hn,x2:j.halfWidth,y2:v}),Gt.a.range(0,24).map((function(e){var t=vn(e,j.width),a=t+j.halfWidth,r=e*j.width+5;return Object(D.jsxs)(n.Fragment,{children:[Object(D.jsx)("line",{className:"hour-line",x1:t,y1:0,x2:t,y2:v},"hour-line-".concat(e)),Object(D.jsx)("line",{className:"hour-half-line",x1:a,y1:hn,x2:a,y2:v},"hour-half-line-".concat(e)),Object(D.jsx)("text",{x:r,y:25,children:e},"hour-text-".concat(e))]},"fragment-".concat(e))})),Object(D.jsx)("rect",{className:"new-event-bar",x:0,y:h,width:vn(24,j.width),height:v-h,onClick:function(e){return function(e,a,n,r){var i=e.currentTarget.closest("svg");if(i){var c=i.createSVGPoint();c.x=e.clientX,c.y=e.clientY;var s=i.getScreenCTM();if(s){var o=function(e,t){return(e+0)/t.scale*60*1e3}(c.matrixTransform(s.inverse()).x-j.transform.x+1,j),l=1e3*Math.floor(o/1e3/60/30)*60*30,d=new Date(Object(dn.a)(a).getTime()+l);t.dispatch({type:"addDataOpen",addDefault:{start:d,roomId:n,usageRange:r}})}}}(e,a.date,a.roomId,a.usageRange)}}),C,N]})})})]})}function Cn(e){var t=e.currentDate,a=e.dataDialogHook,r=e.tabKey,i=e.onTitleClick,c=Object(v.a)().t,s=Object(p.h)(),o=Ye("/event/byroom?timestamp=".concat(t.getTime(),"&location=").concat(s.params.location,"&category=").concat(r),void 0),l=Object(x.a)(o,2),d=l[0],u=d.data,j=d.isLoading,b=d.isError,m=l[1],O=Object(n.useState)(null),h=Object(x.a)(O,2),f=h[0],g=h[1],y=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),g(e)}),[a]),k=Object(n.useMemo)((function(){return u?Object(D.jsx)(D.Fragment,{children:u.schedules.map((function(e,t){return Object(D.jsx)(wn,{dataDialogHook:a,schedule:e,events:e.eventsIndex.map((function(e){return e.map((function(e){return u.events[e]}))})),onClickCallback:y,keyLabel:e.roomName,keyValue:e.roomEmail,onTitleClick:i},t)}))}):Object(D.jsx)(D.Fragment,{})}),[u,a,y,i]);return b?Object(D.jsx)("div",{children:c("common.msg.fetch-failed")}):Object(D.jsx)(Xa,{currentRow:f,dataDialogHook:a,isLoading:j,reload:m,children:k})}var Nn=a(33);function Sn(e){var t=e.currentDate,a=e.dataDialogHook,r=e.tabKey,i=e.onTitleClick,c=Object(v.a)().t,s=Object(p.h)(),o=Object(n.useContext)(Nn.b),l=Ye("/event/byroom/weekly?timestamp=".concat(t.getTime(),"&location=").concat(s.params.location,"&room=").concat(r),void 0),d=Object(x.a)(l,2),u=d[0],j=u.data,b=u.isLoading,m=u.isError,O=d[1],h=Object(n.useState)(null),f=Object(x.a)(h,2),g=f[0],y=f[1],k=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),y(e)}),[a]),w=Object(n.useMemo)((function(){return j?Object(D.jsx)(D.Fragment,{children:j.schedules.map((function(e,t){return Object(D.jsx)(wn,{dataDialogHook:a,schedule:e,events:e.eventsIndex.map((function(e){return e.map((function(e){return j.events[e]}))})),onClickCallback:k,keyLabel:Object(Ba.default)(e.date,"yyyy/MM/dd (E)",{locale:null===o||void 0===o?void 0:o.locale}),keyValue:e.date.toString(),onTitleClick:i},t)}))}):Object(D.jsx)(D.Fragment,{})}),[j,a,k,null===o||void 0===o?void 0:o.locale,i]);return m?Object(D.jsx)("div",{children:c("common.msg.fetch-failed")}):Object(D.jsx)(Xa,{currentRow:g,dataDialogHook:a,isLoading:b,reload:O,children:w})}var Dn=a(436),Tn=a(632),In=a(633),En=a(153);function Fn(e){var t=e.data,a=e.tabPanelContent,r=e.selected,i=Object(n.useState)(!1),c=Object(x.a)(i,2),s=c[0],o=c[1];Object(n.useEffect)((function(){return o(!0)}),[]);var l=Object(n.useState)(""),d=Object(x.a)(l,2),u=d[0],j=d[1];Object(n.useEffect)((function(){j(r||t[0].id)}),[t,r]),Object(n.useEffect)((function(){Z()||U("tabValue",u)}),[u]);var b=function(e,t){j(t)},m=Object(n.useMemo)((function(){return Object(D.jsx)(Tn.a,{indicatorColor:"primary",textColor:"primary",variant:"scrollable",onChange:b,"aria-label":"view tabs",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(D.jsx)(Dn.a,{label:e.name,value:"".concat(e.id)},"tab-".concat(t))}))})}),[t]),p=Object(n.useMemo)((function(){return Object(D.jsx)(D.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(D.jsx)(In.a,{value:"".concat(e.id),children:Object(n.cloneElement)(a,{tabKey:e.id})},"tab-panel-".concat(t))}))})}),[t,a]);return s?Object(D.jsxs)(En.a,{value:u,children:[Object(D.jsx)(pe.a,{position:"static",color:"default",children:m}),p]}):Object(D.jsx)(D.Fragment,{})}function Rn(e){var t=e.tabPanelContent,a=e.selected,n=Object(p.h)(),r=Ye("/category/choices?location=".concat(n.params.location),[]),i=Object(x.a)(r,1)[0].data;return Object(D.jsx)(D.Fragment,{children:!!(null===i||void 0===i?void 0:i.length)&&Object(D.jsx)(Fn,{data:i,tabPanelContent:t,selected:a})})}function Mn(e){var t=e.tabPanelContent,a=e.type,n=e.selected,r=Object(p.h)(),i=a?"&type=".concat(a):"",c=Ye("/room/choices?location=".concat(r.params.location).concat(i),[]),s=Object(x.a)(c,1)[0].data;return Object(D.jsx)(D.Fragment,{children:!!(null===s||void 0===s?void 0:s.length)&&Object(D.jsx)(Fn,{data:s,tabPanelContent:t,selected:n})})}var Vn=function(e,t){switch(t.type){case"default":return{weekly:!1,changeTab:t.changeTab,titleLabel:"main.byroom.title",subtitleLabel:"main.byroom.subtitle"};case"weekly":return{weekly:!0,changeTab:t.changeTab,titleLabel:"main.byroom-weekly.title",subtitleLabel:"main.byroom-weekly.subtitle"};default:return e}};function Ln(){var e=Object(v.a)().t,t=_e(),a=Object(x.a)(t,2),r=a[0],i=a[1],c=Object(n.useReducer)($a,{mode:"addData",inputOpen:!1,readOpen:!1}),s=Object(x.a)(c,2),o=s[0],l=s[1],d=Object(n.useReducer)(Vn,{weekly:!1,changeTab:void 0,titleLabel:"main.byroom.title",subtitleLabel:"main.byroom.subtitle"}),u=Object(x.a)(d,2),j=u[0],b=u[1];Object(n.useEffect)((function(){Z()&&(i(new Date(Number(G("selectedDate")))),b({type:G("weekly")?"weekly":"default",changeTab:G("tabValue")}),$())}),[]),Object(n.useEffect)((function(){Z()||U("weekly",j.weekly?"1":"")}),[j.weekly]);return Object(D.jsx)(Xe,{children:Object(D.jsxs)(ue.a,{square:!0,children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(sn,{title:e(j.titleLabel),subtitle:e(j.subtitleLabel),date:r,onDateChange:function(e){i(e)},dispatch:l})}),!j.weekly&&Object(D.jsx)(Rn,{tabPanelContent:Object(D.jsx)(Cn,{currentDate:r,dataDialogHook:{state:o,dispatch:l},tabKey:"dummyId",onTitleClick:function(e,t,a){i(new Date(e)),b({type:"weekly",changeTab:a})}}),selected:j.changeTab}),j.weekly&&Object(D.jsx)(Mn,{tabPanelContent:Object(D.jsx)(Sn,{currentDate:r,dataDialogHook:{state:o,dispatch:l},tabKey:"dummyId",onTitleClick:function(e,t,a){i(new Date(e)),b({type:"default",changeTab:t})}}),selected:j.changeTab})]})})}var Bn=a(422),Pn=a.n(Bn),An=a(419),qn=a.n(An),zn=Bt(),Hn=Object(I.a)({checkAction:{textAlign:"center",marginBottom:"10px","& Button":{margin:"0 5%",width:"40%"}}});function Wn(e){var t=e.open,a=e.onClose,r=e.data,i=e.reload,c=Object(v.a)().t,s=zn(),o=Hn(),l=Object(n.useContext)(Nn.b),d=Object(n.useContext)(ce),u=Object(At.c)({reValidateMode:"onSubmit"}),j=u.register,b=u.handleSubmit,m=u.setValue,p=u.reset,O=u.formState,x=O.errors,g=O.isSubmitting,y=O.dirtyFields;Object(n.useEffect)((function(){t?p({id:r.visitorId,checkIn:r.checkIn,checkOut:r.checkOut,visitorCardNumber:r.visitorCardNumber}):p()}),[r,t,p]);var k=function(){return Object(Ba.default)(new Date,"yyyy/MM/dd HH:mm:ss",{locale:null===l||void 0===l?void 0:l.locale})},N=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xt("/front/".concat(t.mode),{inputs:t,dirtyFields:y});case 3:if(!e.sent.success){e.next=11;break}return e.next=7,i();case 7:a(),d.dispatch({type:"success",message:c("common.msg.update-success")}),e.next=12;break;case 11:d.dispatch({type:"error",message:c("common.msg.update-failed")});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d.dispatch({type:"error",message:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{open:g}),Object(D.jsxs)(ga,{open:t,onClose:a,title:c("visitdialog.title"),children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsxs)("form",{children:[Object(D.jsxs)("div",{className:o.checkAction,children:[Object(D.jsx)(w.a,{onClick:function(){m("mode","checkin"),m("checkIn",k(),{shouldDirty:!0}),b(N)()},variant:"contained",color:"secondary",disabled:!!r.checkOut,children:c("visitdialog.button.check-in")}),Object(D.jsx)(w.a,{onClick:function(){m("mode","checkout"),m("checkOut",k(),{shouldDirty:!0}),b(N)()},variant:"contained",color:"secondary",disabled:!r.checkIn,children:c("visitdialog.button.check-out")})]}),Object(D.jsx)("div",{children:Object(D.jsx)(Qt.a,Object(ee.a)(Object(ee.a)({margin:"normal",fullWidth:!0,autoComplete:"off",color:"secondary",id:"visitorCardNumber",label:c("visitdialog.form.visitor-card-number"),autoFocus:!0},j("visitorCardNumber",{})),{},{error:!!x.visitorCardNumber,helperText:x.visitorCardNumber&&x.visitorCardNumber.message}))})]})}),Object(D.jsx)(C.a,{px:2,pt:2,children:Object(D.jsxs)(he.a,{disablePadding:!0,children:[Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.appt-time")}),Object(D.jsx)("div",{className:s.field,children:r.apptTime})]},"app-time"),Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.check-in")}),Object(D.jsx)("div",{className:s.field,children:r.checkIn})]},"check-in"),Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.check-out")}),Object(D.jsx)("div",{className:s.field,children:r.checkOut})]},"check-out"),Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.visit-company")}),Object(D.jsx)("div",{className:s.field,children:r.visitCompany})]},"visit-company"),Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.visitor-name")}),Object(D.jsx)("div",{className:s.field,children:r.visitorName})]},"visitor-name"),Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.comment")}),Object(D.jsx)("div",{className:s.field,children:r.comment})]},"comment")]})}),Object.keys(r.resourcies).map((function(e){return Object(D.jsx)(Ea,{data:r.resourcies[e]},e)})),Object(D.jsx)(C.a,{p:2,children:Object(D.jsxs)(he.a,{disablePadding:!0,children:[Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.reservation-name")}),Object(D.jsx)("div",{className:s.field,children:r.reservationName})]},"reservation-name"),Object(D.jsxs)("li",{className:s.list,children:[Object(D.jsx)("div",{className:s.title,children:c("visittable.header.contact-addr")}),Object(D.jsx)("div",{className:s.field,children:r.contactAddr})]},"contact-addr")]})})]})]})}var Kn=Rt(!0);function Jn(e){var t=e.currentDate,a=e.dataDialogHook,r=e.tabKey,i=Object(v.a)().t,c=Kn(),s=Object(p.h)(),o=Ye("/front/visitlist?timestamp=".concat(t.getTime(),"&location=").concat(s.params.location,"&category=").concat(r),[]),l=Object(x.a)(o,2),d=l[0],u=d.data,j=d.isLoading,b=d.isError,m=l[1],O=Object(n.useState)(!1),g=Object(x.a)(O,2),y=g[0],k=g[1],w=Object(n.useState)(null),C=Object(x.a)(w,2),N=C[0],S=C[1],T=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),S(e)}),[a]),I=Object(n.useCallback)((function(e){k(!0),S(e)}),[]),E=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=[{title:i("visittable.header.appt-time"),field:"apptTime",render:function(e){return e.apptTime.split(" ")[1]},width:"90px"},{title:i("visittable.header.room-name"),field:"roomName"},{title:i("visittable.header.tea-supply"),field:"teaSupply",render:function(e){var t=Object.keys(e.resourcies)[0],a="".concat(i("visitdialog.view.tea-supply.number-of-visitor"),":").concat(e.resourcies[t].numberOfVisitor),n="".concat(i("visitdialog.view.tea-supply.number-of-employee"),":").concat(e.resourcies[t].numberOfEmployee);return Object(D.jsxs)(D.Fragment,{children:[a,Object(D.jsx)("br",{}),n]})},width:"70px"},{title:"".concat(i("visittable.header.visit-company")," / ").concat(i("visittable.header.visitor-name")),field:"visitCompany",render:function(e){return Object(D.jsxs)(D.Fragment,{children:[e.visitCompany,Object(D.jsx)("br",{}),e.visitorName]})}},{title:i("visittable.header.check-in"),field:"checkIn",render:function(e){return e.checkIn?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{children:"\u2713"}),Object(D.jsx)("br",{}),Object(D.jsx)("span",{children:e.visitorCardNumber})]}):Object(D.jsx)("span",{})},width:"70px"},{title:i("visittable.header.check-out"),field:"checkOut",render:function(e){return e.checkOut?Object(D.jsx)("span",{children:"\u2713"}):Object(D.jsx)("span",{})},width:"50px"},{title:"".concat(i("visittable.header.reservation-name")," / ").concat(i("visittable.header.contact-addr")),field:"reservationName",render:function(e){return Object(D.jsxs)(D.Fragment,{children:[e.reservationName,Object(D.jsx)("br",{}),e.contactAddr]})}},{title:i("visittable.header.comment"),field:"comment",width:"60%"}];return b?Object(D.jsx)("div",{children:i("common.msg.fetch-failed")}):Object(D.jsxs)(Xa,{currentRow:N,dataDialogHook:a,isLoading:j,reload:m,children:[Object(D.jsx)(et.a,{columns:F,components:{Cell:function(e){return Object(D.jsx)(Qe.MTableCell,Object(ee.a)(Object(ee.a)({},e),{},{className:Mt(e.columnDef.field,e.rowData,c)}))}},data:u,onRowClick:function(e,t){return!!t&&I(t)},actions:[{icon:function(){return Object(D.jsx)(qn.a,{})},tooltip:i("visittable.header.edit-action"),onClick:function(e,t){return!!t&&T(t)}}],localization:{header:{actions:""}},options:Object(ee.a)({showTitle:!1,toolbar:!1,search:!1,headerStyle:{backgroundColor:Lt.palette.primary.light,padding:Ft},tableLayout:"fixed"},It),icons:Tt}),N&&Object(D.jsx)(Wn,{open:y,onClose:E,data:N,reload:m})]})}var Un=a(634),Gn=a(420),Yn=a(421),Zn=a.n(Yn),$n=Object(I.a)({keyboardDatePicker:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:0}},between:{textAlign:"center"}}),Xn=["category","apptTime","roomName","teaSupply","numberOfVisitor","numberOfEmployee","visitCompany","visitorName","checkIn","visitorCardNumber","checkOut","reservationName","contactAddr","subject","comment"];function _n(e){var t=e.open,a=e.onClose,r=Object(v.a)().t,i=$n(),c=Object(p.h)(),s=Object(n.useContext)(ce),o=Object(n.useRef)(null),l=Object(n.useState)([]),d=Object(x.a)(l,2),u=d[0],j=d[1],b=Object(n.useMemo)((function(){return{location:c.params.location,startDate:new Date,endDate:Object(Un.a)(new Date,1)}}),[c.params.location]),m=Object(At.c)({defaultValues:b,reValidateMode:"onSubmit"}),O=m.control,g=m.getValues,y=m.handleSubmit,k=m.reset,N=m.setValue,S=m.formState,T=S.errors,I=S.isSubmitting,E=S.dirtyFields;Object(n.useEffect)((function(){t&&k(b)}),[b,t,k]);var F=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(L)();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Xn.map((function(e){return{label:r("export-csv.file.header.".concat(Gt.a.kebabCase(e))),key:e}})),V="visitor-".concat(Object(Ba.default)(g("startDate"),"yyyyMMdd"),"-").concat(Object(Ba.default)(g("endDate"),"yyyyMMdd"),".csv"),L=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xt("/front/export",{inputs:t,dirtyFields:E});case 3:(a=e.sent).success?a.value&&(i=a.value.map((function(e){var t=e.category;return e.data.map((function(e){var a=Object.keys(e.resourcies)[0];return{category:t,apptTime:e.apptTime,roomName:e.roomName,teaSupply:e.resourcies[a].teaSupply?r("export-csv.file.tea-supply-yes"):r("export-csv.file.tea-supply-no"),numberOfVisitor:e.resourcies[a].numberOfVisitor.toString(),numberOfEmployee:e.resourcies[a].numberOfEmployee.toString(),visitCompany:e.visitCompany,visitorName:e.visitorName,checkIn:e.checkIn,visitorCardNumber:e.visitorCardNumber,checkOut:e.checkOut,reservationName:e.reservationName,contactAddr:e.contactAddr,subject:e.subject,comment:e.comment}}))})),j(i.flat()),null===o||void 0===o||null===(n=o.current)||void 0===n||n.link.click(),s.dispatch({type:"success",message:r("export-csv.msg.export-success")})):s.dispatch({type:"error",message:r("export-csv.msg.export-failed")}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.dispatch({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){return Object(D.jsx)(At.a,{name:"".concat(e,"Date"),control:O,rules:{required:r("common.form.required"),validate:function(){return Object(dn.a)(g("startDate")).getTime()<=Object(dn.a)(g("endDate")).getTime()||r("export-csv.form.error.event-time")}},render:function(t){var a=t.field;return Object(D.jsx)(an.b,Object(ee.a)(Object(ee.a)({},a),{},{onChange:function(t){a.onChange(t),"start"===e&&function(){var e=Object(Un.a)(g("startDate"),1);N("endDate",e,{shouldDirty:!0})}()},format:"yyyy/MM/dd",label:r("export-csv.".concat(e,"-date")),showTodayButton:!0,KeyboardButtonProps:{"aria-label":"change date"},size:"small",className:i.keyboardDatePicker,error:!!T["".concat(e,"Date")],helperText:T["".concat(e,"Date")]&&T["".concat(e,"Date")].message}))}})};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{open:I}),Object(D.jsxs)(ga,{open:t,onClose:a,title:r("export-csv.title"),children:[Object(D.jsxs)("form",{children:[Object(D.jsx)(C.a,{px:2,pt:2,children:Object(D.jsxs)(qt.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(D.jsx)(qt.a,{container:!0,item:!0,xs:12,sm:4,children:B("start")}),Object(D.jsx)(qt.a,{item:!0,xs:12,sm:4,className:i.between,children:Object(D.jsx)(Zn.a,{})}),Object(D.jsx)(qt.a,{container:!0,item:!0,xs:12,sm:4,children:B("end")})]})}),Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(w.a,{onClick:F,variant:"contained",color:"primary",fullWidth:!0,children:r("export-csv.button.export-csv")})})]}),Object(D.jsx)(Gn.CSVLink,{style:{display:"none"},data:u,headers:R,filename:V,ref:o,children:"Export Trigger"})]})]})}function Qn(){var e=Object(v.a)().t,t=_e(),a=Object(x.a)(t,2),r=a[0],i=a[1],c=Object(n.useReducer)($a,{mode:"addData",inputOpen:!1,readOpen:!1}),s=Object(x.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)(!1),u=Object(x.a)(d,2),j=u[0],b=u[1],m=Object(n.useState)(""),p=Object(x.a)(m,2),O=p[0],h=p[1];Object(n.useEffect)((function(){Z()&&(i(new Date(Number(G("selectedDate")))),h(G("tabValue")),$())}),[]);var f=Object(D.jsx)(w.a,{variant:"contained",startIcon:Object(D.jsx)(Pn.a,{}),onClick:function(){b(!0)},children:e("main.header.export-csv")});return Object(D.jsxs)(Xe,{frontMode:!0,children:[Object(D.jsxs)(ue.a,{square:!0,children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(sn,{title:e("main.front.title"),date:r,onDateChange:function(e){i(e)},dispatch:l,actionButtons:[f]})}),Object(D.jsx)(Rn,{tabPanelContent:Object(D.jsx)(Jn,{currentDate:r,dataDialogHook:{state:o,dispatch:l},tabKey:"dummyId"}),selected:O||void 0})]}),Object(D.jsx)(_n,{open:j,onClose:function(){b(!1)}})]})}function er(e){var t=e.open,a=e.onClose,n=Object(v.a)().t;return Object(D.jsx)("div",{children:Object(D.jsxs)(Oa.a,{open:t,onClose:function(){a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(D.jsx)(fa.a,{children:Object(D.jsx)(wa.a,{id:"alert-dialog-description",children:n("common.msg.delete-confirm")})}),Object(D.jsxs)(ha.a,{children:[Object(D.jsx)(w.a,{onClick:function(){a(!0)},color:"secondary",children:"OK"}),Object(D.jsx)(w.a,{onClick:function(){a(!1)},color:"secondary",autoFocus:!0,children:"CANCEL"})]})]})})}var tr=Object(I.a)((function(e){return Object(be.a)({formAction:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},note:{color:"red",fontSize:"0.9em",margin:0}})})),ar=Object(o.b)({palette:{primary:{main:u.main},secondary:{main:Vt.a[300]}},props:{MuiTextField:{variant:"outlined",margin:"dense",fullWidth:!0,minRows:4}}});function nr(e){var t=e.inputFields,a=e.open,r=e.onClose,i=e.data,c=e.reload,o=Object(v.a)().t,l=tr(),d=Object(n.useContext)(ce),u=Object(n.useState)(!1),j=Object(x.a)(u,2),b=j[0],m=j[1],p=Object(At.c)({defaultValues:Object(ee.a)({},t.defaultValues),reValidateMode:"onSubmit"}),O=p.handleSubmit,g=p.reset,y=p.setValue,k=p.setError,N=p.formState,S=N.isDirty,T=N.isSubmitting,I=N.dirtyFields;Object(n.useEffect)((function(){if(a&&i){var e=Object.keys(t.defaultValues).reduce((function(e,t){return"mode"===t?e.mode="upd":e[t]=i[t],e}),{});g(Gt.a.cloneDeep(e))}else g(Gt.a.cloneDeep(t.defaultValues))}),[i,t,a,g]);var E=function(){var e=Object(f.a)(h.a.mark((function e(a){var n,i,s,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n="",e.t0=a.mode,e.next="ins"===e.t0?5:"upd"===e.t0?7:"del"===e.t0?9:11;break;case 5:return n="/".concat(t.type,"/create"),e.abrupt("break",11);case 7:return n="/".concat(t.type,"/update"),e.abrupt("break",11);case 9:return n="/".concat(t.type,"/delete"),e.abrupt("break",11);case 11:return e.next=13,Xt(n,{inputs:a,dirtyFields:I});case 13:if(!(i=e.sent).success){e.next=27;break}if("del"!==a.mode){e.next=18;break}return e.next=18,new Promise((function(e){return setTimeout(e,1e3)}));case 18:return e.next=20,c();case 20:if(r(),d.dispatch({type:"success",message:o("common.msg.update-success")}),"role"!==t.type&&"location"!==t.type){e.next=25;break}return e.next=25,new Promise((function(){return setTimeout((function(){d.dispatch({type:"warning",message:o("common.msg.prompt-logout")})}),1500)}));case 25:e.next=28;break;case 27:if(i.errors)for(l in s=i.errors)k(u=l,{message:o(s[u][0])});case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),d.dispatch({type:"error",message:e.t1.message});case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{open:T}),Object(D.jsx)(ga,{open:a,onClose:r,title:o("settings.title.".concat(t.type)),children:Object(D.jsx)(s.a,{theme:ar,children:Object(D.jsx)(At.b,Object(ee.a)(Object(ee.a)({},p),{},{children:Object(D.jsxs)("form",{children:[Object(D.jsx)(C.a,{p:2,children:t.item}),Object(D.jsx)(C.a,{px:2,children:Object(D.jsxs)(qt.a,{container:!0,justifyContent:"space-between",spacing:2,className:l.formAction,children:[Object(D.jsx)(qt.a,{item:!0,xs:i?6:12,children:Object(D.jsx)(w.a,{onClick:function(){O(E)()},variant:"contained",color:"primary",disabled:!S,startIcon:Object(D.jsx)(Kt.a,{}),fullWidth:!0,children:o("common.button.save")})}),Object(D.jsx)(qt.a,{item:!0,xs:6,style:i?void 0:{display:"none"},children:Object(D.jsx)(w.a,{onClick:function(){m(!0)},variant:"contained",color:"primary",startIcon:Object(D.jsx)(Ht.a,{}),fullWidth:!0,children:o("common.button.delete")})})]})})]})}))})}),Object(D.jsx)(er,{open:b,onClose:function(e){m(!1),e&&(y("mode","del"),O(E)())}})]})}var rr=function(e,t){switch(t.type){case"inputOpen":return{mode:"rowData",inputOpen:!0};case"addDataOpen":return{mode:"addData",inputOpen:!0};case"inputClose":return Object(ee.a)(Object(ee.a)({},e),{},{inputOpen:!1});default:return e}};function ir(e){var t=e.inputFields,a=e.dataDialogHook,n=e.isLoading,r=e.reload,i=e.currentRow,c=e.children,o=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.dispatch({type:"inputClose"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(s.a,{theme:Lt,children:[Object(D.jsx)(M,{open:n}),c,Object(D.jsx)(nr,{inputFields:t,open:a.state.inputOpen,onClose:o,data:"addData"===a.state.mode?null:i,reload:r})]})}function cr(e){var t=e.inputFields,a=e.columns,r=e.dataDialogHook,i=Object(v.a)().t,c=Ye("/".concat(t.type,"/list"),[]),s=Object(x.a)(c,2),o=s[0],l=o.data,d=o.isLoading,u=o.isError,j=s[1],b=Object(n.useState)(null),m=Object(x.a)(b,2),p=m[0],O=m[1],h=Object(n.useCallback)((function(e){r.dispatch({type:"inputOpen"}),O(e)}),[r]);return u?Object(D.jsx)("div",{children:i("common.msg.fetch-failed")}):Object(D.jsx)(ir,{inputFields:t,currentRow:p,dataDialogHook:r,isLoading:d,reload:j,children:Object(D.jsx)(et.a,{columns:a,data:l,onRowClick:function(e,t){return!!t&&h(t)},options:Object(ee.a)({showTitle:!1,toolbar:!1,search:!1,headerStyle:{backgroundColor:Lt.palette.primary.light},tableLayout:"fixed"},It),icons:Tt})})}var sr=Object(I.a)((function(){return{actionButtonArea:{textAlign:"right",margin:"auto"}}}));function or(e){var t=e.master,a=e.dispatch,n=Object(v.a)().t,r=sr();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(qt.a,{container:!0,alignItems:"stretch",justifyContent:"space-between",children:[Object(D.jsx)(qt.a,{container:!0,item:!0,xs:12,sm:9,children:Object(D.jsx)(k.a,{component:"h1",variant:"h6",children:n("settings.title.".concat(t))})}),Object(D.jsx)(qt.a,{item:!0,xs:12,sm:3,className:r.actionButtonArea,children:Object(D.jsx)(w.a,{variant:"contained",color:"secondary",startIcon:Object(D.jsx)(tn.a,{}),onClick:function(e){a({type:"addDataOpen"})},children:n("settings.add-master")})})]})})}var lr=["admin","front"];function dr(){var e=Object(At.d)(),t=e.control,a=e.formState.errors,n=Object(v.a)().t;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ea,{name:"name",control:t,label:n("settings.header.role.name"),required:!0,selectList:lr.map((function(e){return{label:n("settings.view.role.name.".concat(e)),value:e}})),errors:a}),Object(D.jsx)(pa,{name:"members",control:t,label:n("settings.header.role.members"),errors:a})]})}function ur(){var e=Object(v.a)().t,t=Object(n.useReducer)(rr,{mode:"addData",inputOpen:!1}),a=Object(x.a)(t,2),r=a[0],i=a[1],c=[{title:e("settings.header.role.name"),field:"name",render:function(t){return e("settings.view.role.name.".concat(t.name))}}];return Object(D.jsx)(Xe,{adminMode:!0,menuOpen:!0,children:Object(D.jsxs)(ue.a,{square:!0,children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(or,{master:"role",dispatch:i})}),Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(cr,{inputFields:{type:"role",item:Object(D.jsx)(dr,{}),defaultValues:{mode:"ins",id:"",name:"admin",members:[]}},columns:c,dataDialogHook:{state:r,dispatch:i}})})]})})}function jr(){var e=Object(At.d)(),t=e.control,a=e.formState.errors,n=Object(v.a)().t;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ea,{name:"name",control:t,label:n("settings.header.location.name"),required:!0,errors:a}),Object(D.jsx)(ea,{name:"url",control:t,label:n("settings.header.location.url"),required:!0,validation:{pattern:{value:/^[a-z0-9]+$/,message:n("settings.form.location.error.url.pattern")}},errors:a}),Object(D.jsx)(ea,{name:"sort",control:t,label:n("settings.header.location.sort"),errors:a})]})}function br(){var e=Object(v.a)().t,t=Object(n.useReducer)(rr,{mode:"addData",inputOpen:!1}),a=Object(x.a)(t,2),r=a[0],i=a[1],c=[{title:e("settings.header.location.name"),field:"name"},{title:e("settings.header.location.url"),field:"url"},{title:e("settings.header.location.sort"),field:"sort"}];return Object(D.jsx)(Xe,{adminMode:!0,menuOpen:!0,children:Object(D.jsxs)(ue.a,{square:!0,children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(or,{master:"location",dispatch:i})}),Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(cr,{inputFields:{type:"location",item:Object(D.jsx)(jr,{}),defaultValues:{mode:"ins",id:"",name:"",url:"",sort:""}},columns:c,dataDialogHook:{state:r,dispatch:i}})})]})})}function mr(){var e=Object(At.d)(),t=e.control,a=e.setValue,r=e.formState.errors,i=Object(v.a)().t,c=Object(At.e)({control:t,name:"limitedPublic"}),s=Object(n.useState)(!1),o=Object(x.a)(s,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){d(c),c||a("members",[],{shouldDirty:!0})}),[c,a]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ea,{name:"name",control:t,label:i("settings.header.category.name"),required:!0,errors:r}),Object(D.jsx)(ea,{name:"sort",control:t,label:i("settings.header.category.sort"),errors:r}),Object(D.jsx)(Na.a,{control:Object(D.jsx)(At.a,{name:"limitedPublic",control:t,render:function(e){var t=e.field;return Object(D.jsx)(Sa.a,{onChange:function(e){return t.onChange(e.target.checked)},checked:t.value,color:"primary"})}}),label:i("settings.header.category.limited-public")}),Object(D.jsx)(pa,{name:"members",control:t,label:i("settings.header.category.members"),errors:r,style:l?void 0:{display:"none"}})]})}function pr(){var e=Object(v.a)().t,t=Object(n.useReducer)(rr,{mode:"addData",inputOpen:!1}),a=Object(x.a)(t,2),r=a[0],i=a[1],c=[{title:e("settings.header.category.name"),field:"name"},{title:e("settings.header.category.sort"),field:"sort"},{title:e("settings.header.category.limited-public"),field:"limitedPublic",type:"boolean"}];return Object(D.jsx)(Xe,{adminMode:!0,menuOpen:!0,children:Object(D.jsxs)(ue.a,{square:!0,children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(or,{master:"category",dispatch:i})}),Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(cr,{inputFields:{type:"category",item:Object(D.jsx)(mr,{}),defaultValues:{mode:"ins",id:"",name:"",sort:"",limitedPublic:!1,members:[]}},columns:c,dataDialogHook:{state:r,dispatch:i}})})]})})}function Or(e){var t=e.locations,a=e.categories,r=Object(At.d)(),i=r.control,c=r.setValue,s=r.formState.errors,o=Object(v.a)().t,l=Object(n.useState)(!1),d=Object(x.a)(l,2),u=d[0],j=d[1],b=Object(At.e)({control:i,name:"type"});return Object(n.useEffect)((function(){"free"===b?(c("teaSupply",!1,{shouldDirty:!0}),j(!0)):j(!1)}),[c,b]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ea,{name:"name",control:i,label:o("settings.header.room.name"),required:!0,errors:s}),Object(D.jsx)(ea,{name:"email",control:i,label:o("settings.header.room.email"),required:!0,validation:{pattern:{value:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:o("settings.form.room.error.email.pattern")}},errors:s}),Object(D.jsx)(ea,{name:"sort",control:i,label:o("settings.header.room.sort"),errors:s}),Object(D.jsx)(ea,{name:"usageRange",control:i,label:o("settings.header.room.usage-range"),required:!0,selectList:$t.map((function(e){return{label:o("settings.view.room.usage-range.".concat(e)),value:e}})),errors:s}),Object(D.jsx)(ea,{name:"type",control:i,label:o("settings.header.room.type"),required:!0,selectList:Yt.map((function(e){return{label:o("settings.view.room.type.".concat(e)),value:e}})),errors:s}),Object(D.jsx)(Na.a,{control:Object(D.jsx)(At.a,{name:"teaSupply",control:i,render:function(e){var t=e.field;return Object(D.jsx)(Sa.a,{onChange:function(e){return t.onChange(e.target.checked)},checked:t.value,color:"primary",disabled:u})}}),label:o("settings.header.room.tea-supply"),style:u?{display:"none"}:void 0}),Object(D.jsx)(ea,{name:"location",control:i,label:o("settings.header.room.location"),required:!0,selectList:null===t||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e.id}})),errors:s}),Object(D.jsx)(ea,{name:"category",control:i,label:o("settings.header.room.category"),required:!0,selectList:null===a||void 0===a?void 0:a.map((function(e){return{label:e.name,value:e.id}})),errors:s})]})}function hr(){var e=Object(v.a)().t,t=Object(n.useReducer)(rr,{mode:"addData",inputOpen:!1}),a=Object(x.a)(t,2),r=a[0],i=a[1],c=Ye("/location/choices",[]),s=Object(x.a)(c,1)[0].data,o=Ye("/category/choices",[]),l=Object(x.a)(o,1)[0].data,d=[{title:e("settings.header.room.name"),field:"name"},{title:e("settings.header.room.sort"),field:"sort"},{title:e("settings.header.room.usage-range"),field:"usageRange",render:function(t){return e("settings.view.room.usage-range.".concat(t.usageRange))}},{title:e("settings.header.room.type"),field:"type",render:function(t){return e("settings.view.room.type.".concat(t.type))}},{title:e("settings.header.room.tea-supply"),field:"teaSupply",type:"boolean"},{title:e("settings.header.room.location"),field:"location",render:function(e){var t=null===s||void 0===s?void 0:s.find((function(t){return t.id===e.location}));return null===t||void 0===t?void 0:t.name}},{title:e("settings.header.room.category"),field:"category",render:function(e){var t=null===l||void 0===l?void 0:l.find((function(t){return t.id===e.category}));return null===t||void 0===t?void 0:t.name}}];return Object(D.jsx)(Xe,{adminMode:!0,menuOpen:!0,children:Object(D.jsxs)(ue.a,{square:!0,children:[Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(or,{master:"room",dispatch:i})}),Object(D.jsx)(C.a,{p:2,children:Object(D.jsx)(cr,{inputFields:{type:"room",item:Object(D.jsx)(Or,{locations:s,categories:l}),defaultValues:{mode:"ins",id:"",name:"",email:"",usageRange:"none",type:"rooms",sort:"",teaSupply:!1,location:"",category:""}},columns:d,dataDialogHook:{state:r,dispatch:i}})})]})})}function fr(){return Object(D.jsx)(m.a,{children:Object(D.jsxs)(p.d,{children:[Object(D.jsx)(p.b,{exact:!0,path:"/:location?/login",component:Q}),Object(D.jsx)(p.b,{exact:!0,path:"/oauth/redirect",component:le}),Object(D.jsx)(p.b,{exact:!0,path:"/:location/main",component:on}),Object(D.jsx)(p.b,{exact:!0,path:"/:location/main/byroom",component:Ln}),Object(D.jsx)(p.b,{exact:!0,path:"/:location/front",component:Qn}),Object(D.jsx)(p.b,{exact:!0,path:"/:location?/settings/role",component:ur}),Object(D.jsx)(p.b,{exact:!0,path:"/:location?/settings/location",component:br}),Object(D.jsx)(p.b,{exact:!0,path:"/:location?/settings/category",component:pr}),Object(D.jsx)(p.b,{exact:!0,path:"/:location?/settings/room",component:hr}),Object(D.jsx)(p.a,{from:"/:location?/",to:"/:location?/login"})]})})}var xr=a(423),vr=a(424),gr=a(428),yr=a(427),kr=a(213),wr=a(174),Cr=function(e){Object(gr.a)(a,e);var t=Object(yr.a)(a);function a(){return Object(xr.a)(this,a),t.apply(this,arguments)}return Object(vr.a)(a,[{key:"getCalendarHeaderText",value:function(e){return Object(Ba.default)(e,"Yo MMM",{locale:wr.a})}},{key:"getDatePickerHeaderText",value:function(e){return Object(Ba.default)(e,"MMMd\u65e5",{locale:wr.a})}}]),a}(kr.default);var Nr=function(){return Object(D.jsxs)(s.a,{theme:j,children:[Object(D.jsx)(b.a,{}),Object(D.jsx)(Nn.a,{utils:Cr,locale:wr.a,children:Object(D.jsx)(fr,{})})]})},Sr=a(425),Dr=a(426),Tr=a(177),Ir={en:{translation:Sr},ja:{translation:Dr}};Et.a.use(Tr.e).init({lng:"ja",fallbackLng:"ja",interpolation:{escapeValue:!1},react:{useSuspense:!1},resources:Ir});Et.a;c.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(Nr,{})}),document.getElementById("root"))}},[[585,1,2]]]);
//# sourceMappingURL=main.d5c2b237.chunk.js.map