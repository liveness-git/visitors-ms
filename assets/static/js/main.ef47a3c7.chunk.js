(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{421:function(e){e.exports=JSON.parse('{"login.form.email":"Email Address","login.form.password":"Password","login.form.submit":"Log In","login.form.required":"Required","login.form.invalid-pattern":"Invalid pattern"}')},422:function(e){e.exports=JSON.parse('{"common.form.required":"\u5fc5\u9808\u5165\u529b\u3067\u3059\u3002","common.button.ok":"OK","common.button.cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","common.button.search":"\u691c\u7d22","common.button.save":"\u4fdd\u5b58\u3059\u308b","common.button.delete":"\u524a\u9664\u3059\u308b","common.msg.login-success":"\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3057\u305f\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002","common.msg.login-failed":"\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","common.msg.no-data":"\u8a72\u5f53\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002","common.msg.fetch-failed":"\u901a\u4fe1\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","common.msg.update-success":"\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002","common.msg.update-failed":"\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","common.msg.authority-error":"\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\u3002","common.msg.prompt-logout":"\u53cd\u6620\u3059\u308b\u305f\u3081\u306b\u306f\u30ed\u30b0\u30a2\u30a6\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002","common.msg.delete-confirm":"\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","login.form.email":"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","login.form.password":"\u30d1\u30b9\u30ef\u30fc\u30c9","login.form.submit":"\u30ed\u30b0\u30a4\u30f3","login.form.invalid-pattern":"\u7121\u52b9\u306a\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002","login.msal.login":"Office365\u3067\u30ed\u30b0\u30a4\u30f3","visitlist.title":"\u6765\u8a2a\u4e00\u89a7","visittable.header.appt-time":"\u4e88\u7d04\u6642\u9593","visittable.header.room-name":"\u4f1a\u8b70\u5ba4\u540d","visittable.header.visit-company":"\u6765\u8a2a\u793e\u540d","visittable.header.visitor-name":"\u6765\u8a2a\u8005\u540d","visittable.header.tea-supply":"\u7d66\u8336","visittable.header.number-of-visitor":"\u6765\u8a2a\u8005\u6570","visittable.header.number-of-employee":"\u5f93\u696d\u54e1\u6570","visittable.header.usage-range":"\u5229\u7528\u7bc4\u56f2","visittable.header.comment":"\u30b3\u30e1\u30f3\u30c8","visittable.header.reservation-name":"\u4e88\u7d04\u8005","visittable.header.contact-addr":"\u9023\u7d61\u5148","visittable.header.check-in":"\u30a4\u30f3","visittable.header.check-out":"\u30a2\u30a6\u30c8","visittable.header.resource-status":"\u4f1a\u8b70\u5ba4\u72b6\u614b","visittable.header.event-subject":"\u4ef6\u540d","visittable.header.event-mailto-authors":"\u4e88\u7d04\u8005\u304a\u3088\u3073\u7ba1\u7406\u8005","visittable.header.event-mailto-required":"\u5fc5\u9808\u53c2\u52a0\u8005","visittable.header.event-mailto-optional":"\u4efb\u610f\u53c2\u52a0\u8005","visittable.header.event-room":"\u4f1a\u8b70\u5ba4","visittable.header.event-start-time":"\u958b\u59cb\u6642\u523b","visittable.header.event-end-time":"\u7d42\u4e86\u6642\u523b","visittable.header.visitor-card-number":"\u30ab\u30fc\u30c9\u756a\u53f7","visittable.header.edit-action":"\u7de8\u96c6","visitdialog.view.resource-status-accepted":"\u627f\u8afe","visitdialog.view.resource-status-declined":"\u8f9e\u9000","visitdialog.view.usage-range.inside":"\u793e\u5185\u4f1a\u8b70","visitdialog.view.usage-range.outside":"\u793e\u5916\u4f1a\u8b70","visitdialog.view.tea-supply.number-of-visitor":"\u6765","visitdialog.view.tea-supply.number-of-employee":"\u5f93","visitdialog.title":"\u4e88\u7d04\u60c5\u5831","visitdialog.notes.multiple-locations":"\u203b\u8907\u6570\u306e\u5834\u6240(\u4f1a\u8b70\u5ba4\u4ee5\u5916\u542b\u3080)\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u4e00\u90e8\u6a5f\u80fd\u306f\u7de8\u96c6\u3067\u304d\u307e\u305b\u3093","visitdialog.notes.no-relevant-rooms":"\u4e88\u7d04\u53ef\u80fd\u306a\u4f1a\u8b70\u5ba4\u304c\u3042\u308a\u307e\u305b\u3093","visitdialog.button.check-in":"\u30c1\u30a7\u30c3\u30af\u30a4\u30f3","visitdialog.button.check-out":"\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8","visitdialog.form.tea-supply-yes":"\u3042\u308a","visitdialog.form.tea-supply-no":"\u306a\u3057","visitdialog.form.visitor-card-number":"\u30ab\u30fc\u30c9\u756a\u53f7","visitdialog.form.visitor-card-number-placeholder":"\u30ab\u30fc\u30c9\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044","visitdialog.form.error.event-time":"\u65e5\u4ed8\u306e\u95a2\u4fc2\u6027\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059","visitdialog.form.error.available-time":"\u4f1a\u8b70\u5ba4\u304c\u7a7a\u3044\u3066\u3044\u307e\u305b\u3093","visitdialog.form.error.room-not-covered":"\u4f1a\u8b70\u5ba4\u3092\u9078\u629e\u3057\u306a\u304a\u3057\u3066\u304f\u3060\u3055\u3044","auto-complete.no-options-text":"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306f\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044","visitorinfoform.title":"\u6765\u8a2a\u60c5\u5831","visitorinfoform.delete-confirm-title":"\u6765\u8a2a\u60c5\u5831\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","visitorinfoform.delete-confirm-message":"\u4e88\u7d04\u60c5\u5831\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f","visitorinfolist.title":"\u6765\u8a2a\u4e00\u89a7","export-csv.title":"\u6765\u8a2a\u60c5\u5831 CSV\u51fa\u529b","export-csv.start-date":"\u958b\u59cb\u65e5","export-csv.end-date":"\u7d42\u4e86\u65e5","export-csv.button.export-csv":"CSV\u51fa\u529b","export-csv.form.error.event-time":"\u65e5\u4ed8\u306e\u95a2\u4fc2\u6027\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059","export-csv.msg.export-success":"CSV\u30d5\u30a1\u30a4\u30eb\u3092\u51fa\u529b\u3057\u307e\u3057\u305f\u3002","export-csv.msg.export-failed":"CSV\u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002","export-csv.file.header.category":"\u30ab\u30c6\u30b4\u30ea","export-csv.file.header.appt-time":"\u4e88\u7d04\u6642\u9593","export-csv.file.header.room-name":"\u4f1a\u8b70\u5ba4\u540d","export-csv.file.header.tea-supply":"\u7d66\u8336","export-csv.file.header.number-of-visitor":"\u6765\u8a2a\u8005\u6570","export-csv.file.header.number-of-employee":"\u5f93\u696d\u54e1\u6570","export-csv.file.header.visit-company":"\u6765\u8a2a\u793e\u540d","export-csv.file.header.visitor-name":"\u6765\u8a2a\u8005\u540d","export-csv.file.header.check-in":"\u30a4\u30f3","export-csv.file.header.visitor-card-number":"\u30ab\u30fc\u30c9\u756a\u53f7","export-csv.file.header.check-out":"\u30a2\u30a6\u30c8","export-csv.file.header.reservation-name":"\u4e88\u7d04\u8005","export-csv.file.header.contact-addr":"\u9023\u7d61\u5148","export-csv.file.header.event-subject":"\u4ef6\u540d","export-csv.file.header.comment":"\u30b3\u30e1\u30f3\u30c8","export-csv.file.tea-supply-yes":"\u3042\u308a","export-csv.file.tea-supply-no":"\u306a\u3057","main.menu.created-visit-info":"\u81ea\u5206\u306e\u4f1a\u8b70\u4e88\u7d04","main.menu.by-meeting-room":"\u4f1a\u8b70\u5ba4\u5225","main.menu.front":"\u53d7\u4ed8","main.menu.settings":"\u8a2d\u5b9a","main.menu.settings.role":"\u30ed\u30fc\u30eb","main.menu.settings.location":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3","main.menu.settings.category":"\u30ab\u30c6\u30b4\u30ea","main.menu.settings.room":"\u4f1a\u8b70\u5ba4","main.menu.refresh":"refresh","main.menu.logout":"\u30ed\u30b0\u30a2\u30a6\u30c8","main.header.picker-label":"\u9078\u629e\u65e5","main.header.add-event":"\u65b0\u898f\u4f5c\u6210","main.header.export-csv":"CSV\u51fa\u529b","main.visitlist.title":"\u304b\u3089\uff11\u304b\u6708\u9593\u306e\u6765\u8a2a\u60c5\u5831","main.visitlist.subtitle":"\u81ea\u5206\u304c\u4f5c\u6210\u3057\u305f\u4e88\u7d04\u3092\u8868\u793a\u3057\u307e\u3059\u3002","main.byroom.title":"\u306e\u6765\u8a2a\u60c5\u5831","main.byroom.subtitle":"\u203b\u30d5\u30ea\u30fc\u30b9\u30da\u30fc\u30b9\u306f\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002","main.byroom-weekly.title":"\u304b\u3089\uff11\u9031\u9593\u306e\u6765\u8a2a\u60c5\u5831","main.byroom-weekly.subtitle":"\u203b\u30d5\u30ea\u30fc\u30b9\u30da\u30fc\u30b9\u306f\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002","main.front.title":"\u306e\u53d7\u4ed8\u60c5\u5831","settings.title.role":"\u30ed\u30fc\u30eb\u8a2d\u5b9a","settings.title.location":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a","settings.title.category":"\u30ab\u30c6\u30b4\u30ea\u8a2d\u5b9a","settings.title.room":"\u4f1a\u8b70\u5ba4\u8a2d\u5b9a","settings.add-master":"\u65b0\u898f\u4f5c\u6210","settings.header.role.name":"\u30ed\u30fc\u30eb\u540d","settings.header.role.members":"\u30e1\u30f3\u30d0\u30fc","settings.header.location.name":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u540d","settings.header.location.url":"url\u30d1\u30b9\u540d","settings.header.location.sort":"\u8868\u793a\u9806","settings.header.category.name":"\u30ab\u30c6\u30b4\u30ea\u540d","settings.header.category.sort":"\u8868\u793a\u9806","settings.header.category.limited-public":"\u9650\u5b9a\u516c\u958b","settings.header.category.members":"\u30e1\u30f3\u30d0\u30fc","settings.header.room.name":"\u4f1a\u8b70\u5ba4\u540d","settings.header.room.email":"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9","settings.header.room.type":"\u7a2e\u5225","settings.header.room.usage-range":"\u5229\u7528\u7bc4\u56f2","settings.header.room.sort":"\u8868\u793a\u9806","settings.header.room.tea-supply":"\u7d66\u8336","settings.header.room.members":"\u30e1\u30f3\u30d0\u30fc","settings.header.room.location":"\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3","settings.header.room.category":"\u30ab\u30c6\u30b4\u30ea","settings.view.role.name.admin":"\u7ba1\u7406\u8005","settings.view.role.name.front":"\u30d5\u30ed\u30f3\u30c8","settings.view.room.type.rooms":"\u4f1a\u8b70\u5ba4","settings.view.room.type.free":"\u30d5\u30ea\u30fc\u30b9\u30da\u30fc\u30b9","settings.view.room.usage-range.none":"\u5236\u9650\u306a\u3057","settings.view.room.usage-range.inside":"\u793e\u5185\u7528","settings.view.room.usage-range.outside":"\u793e\u5916\u7528","settings.form.common.error.association":"\u4ed6\u306e\u8a2d\u5b9a\u3067\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002","settings.form.role.error.name.unique":"\u3053\u306e\u30ed\u30fc\u30eb\u306f\u65e2\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002","settings.form.location.error.url.unique":"\u3053\u306eurl\u306f\u65e2\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002","settings.form.location.error.url.pattern":"\u534a\u89d2\u306e\u5c0f\u6587\u5b57\u82f1\u6570\u5b57\u306e\u307f\u5165\u529b\u3067\u304d\u307e\u3059\u3002","settings.form.room.error.email.unique":"\u3053\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u65e2\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002","settings.form.room.error.email.pattern":"\u7121\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002"}')},581:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),c=a.n(i),s=a(620),o=a(117),l=a(391),d=a.n(l),u=a(392),b=a.n(u),j=Object(o.b)({palette:{primary:d.a,secondary:b.a},props:{MuiTextField:{variant:"outlined"}},mixins:{toolbar:{minHeight:50}},overrides:{MuiTooltip:{tooltip:{fontSize:"1em"}}}}),m=a(621),p=a(48),O=a(45),h=a(13),f=a.n(h),x=a(21),v=a(11),g=a(636),y=a(610),k=a(634),w=a(59),C=a(121),N=a(290),S=a(611),D=a(609),T=a(1);function R(){return Object(T.jsxs)(w.a,{variant:"body2",color:"textSecondary",align:"center",children:["Version. 1.0.0-beta.1 - Copyright \xa9 ",Object(T.jsx)(D.a,{color:"inherit",href:"https://www.liveness.co.jp/",children:"liveness, Inc."})," ",(new Date).getFullYear(),"."]})}var I=a(60),F=a(427),M=a(353),E=Object(I.a)((function(e){return{root:{zIndex:e.zIndex.tooltip+1,color:"#fff"}}}));function V(e){var t=E();return Object(T.jsx)(F.a,{className:t.root,open:e.open,children:Object(T.jsx)(M.a,{color:"inherit"})})}var B=function(){return Object(I.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))};function P(e){return L.apply(this,arguments)}function L(){return(L=Object(x.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.prev=3,e.next=6,a.json();case 6:a.parsedBody=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:if(a.ok){e.next=14;break}throw console.error("Server Error: ",null===(n=a.parsedBody)||void 0===n?void 0:n.body),new Error(a.statusText);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function q(e){return A.apply(this,arguments)}function A(){return A=Object(x.a)(f.a.mark((function e(t){var a,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{method:"get"},e.next=3,P(new Request(t,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function H(e,t){return z.apply(this,arguments)}function z(){return z=Object(x.a)(f.a.mark((function e(t,a){var n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:{method:"post",body:JSON.stringify(a)},e.next=3,P(new Request(t,n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}var W="liveness-visitor-temp",K="liveness-visitor-user",J=function(e){sessionStorage.setItem(K,e)},U=function(){sessionStorage.removeItem(K)},G=B();function Y(){var e=Object(g.a)().t,t=G(),a=Object(O.h)(),r=Object(n.useState)(!1),i=Object(v.a)(r,2),c=i[0],s=i[1],o=function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),n=a.params.location,sessionStorage.setItem(W,n),e.next=5,q("/oauth/signin");case 5:(t=e.sent).parsedBody&&(window.location.href=t.parsedBody.url),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}var n}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(T.jsx)(V,{open:c}),Object(T.jsxs)("div",{className:t.paper,children:[Object(T.jsx)(k.a,{className:t.avatar,children:Object(T.jsx)(S.a,{})}),Object(T.jsx)(w.a,{component:"h1",variant:"h5",children:"Visitors for Microsoft"}),Object(T.jsx)(C.a,{onClick:o,fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:e("login.msal.login")})]}),Object(T.jsx)(N.a,{mt:8,children:Object(T.jsx)(R,{})})]})}var Z=a(7),$=a(612),X=a(631);function _(e){return Object(T.jsx)(X.a,Object(Z.a)({elevation:6,variant:"filled"},e))}var Q=function(e,t){switch(t.type){case"hide":return Object(Z.a)(Object(Z.a)({},e),{},{open:!1});case"success":case"info":case"warning":case"error":return Object(Z.a)(Object(Z.a)({},e),{},{open:!0,severity:t.type,message:t.message});default:return e}};function ee(e){var t=e.severity,a=e.message,n=e.open,r=e.onClose;return Object(T.jsx)($.a,{open:n,autoHideDuration:1500,onClose:r,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(T.jsx)(_,{onClose:r,severity:t,children:a})})}var te=Object(n.createContext)({});function ae(e){var t=e.children,a=Object(n.useReducer)(Q,{severity:"info",message:"",open:!1}),r=Object(v.a)(a,2),i=r[0],c=r[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ee,Object(Z.a)(Object(Z.a)({},i),{},{onClose:function(e,t){"clickaway"!==t&&c({type:"hide"})}})),Object(T.jsx)(te.Provider,{value:{state:i,dispatch:c},children:t})]})}var ne=B();function re(){return Object(T.jsx)(ae,{children:Object(T.jsx)(ie,{})})}function ie(){var e=ne(),t=Object(g.a)().t,a=Object(n.useContext)(te),r=Object(n.useState)(!0),i=Object(v.a)(r,2),c=i[0],s=i[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(x.a)(f.a.mark((function e(){var n,r,i,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=window.location.search,e.next=4,q("/oauth/callback"+n);case 4:if(!(r=e.sent).parsedBody){e.next=18;break}if(s(!1),r.parsedBody.ok?a.dispatch({type:"success",message:t("common.msg.login-success")}):a.dispatch({type:"error",message:t("common.msg.login-failed")}),i=sessionStorage.getItem(W),sessionStorage.removeItem(W),i&&"undefined"!==i){e.next=15;break}return e.next=13,q("/location/first");case 13:(c=e.sent).parsedBody&&(i=c.parsedBody.url);case 15:o="/".concat(i,"/main"),"undefined"===i&&(o="/settings/location"),setTimeout((function(){window.location.replace(o)}),1500);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(T.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(T.jsx)(V,{open:c}),Object(T.jsxs)("div",{className:e.paper,children:[Object(T.jsx)(k.a,{className:e.avatar,children:Object(T.jsx)(S.a,{})}),Object(T.jsx)(w.a,{component:"h1",variant:"h5",children:"Visitors for Microsoft"})]}),Object(T.jsx)(N.a,{mt:8,children:Object(T.jsx)(R,{})})]})}var ce=a(151),se=a(3),oe=a(148),le=a(76),de=a(614),ue=a(292),be=a(589),je=a(616),me=a(226),pe=a.n(me),Oe=a(168),he=a(590),fe=a(617),xe=a(619),ve=a(211),ge=a(356),ye=a(357),ke=a(618),we=a(615),Ce=a(395),Ne=a.n(Ce),Se=a(227),De=a.n(Se),Te=a(397),Re=a.n(Te),Ie=a(398),Fe=a.n(Ie),Me=a(399),Ee=a.n(Me),Ve=a(400),Be=a.n(Ve),Pe=a(401),Le=a.n(Pe),qe=a(402),Ae=a.n(qe),He=a(291),ze=a(295);function We(e,t){var a=Object(n.useState)(t),r=Object(v.a)(a,2),i=r[0],c=r[1],s=Object(n.useState)(!1),o=Object(v.a)(s,2),l=o[0],d=o[1],u=Object(n.useState)(!1),b=Object(v.a)(u,2),j=b[0],m=b[1],p=Object(n.useCallback)(Object(x.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!1),d(!0),t.prev=2,t.next=5,q(e);case 5:(a=t.sent).parsedBody&&c(a.parsedBody),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),m(!0),console.log(t.t0);case 13:d(!1);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),[e]),O=Object(n.useCallback)(Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p());case 1:case"end":return e.stop()}}),e)}))),[p]);return Object(n.useEffect)((function(){p()}),[p]),[{data:i,isLoading:l,isError:j},O]}function Ke(){var e=We("/location/choices",[]),t=Object(v.a)(e,1)[0].data,a=Object(O.g)(),r=Object(O.h)(),i=Object(n.useState)(r.params.location),c=Object(v.a)(i,2),s=c[0],o=c[1];return t&&0!==t.length?Object(T.jsx)(He.a,{color:"primary",margin:"dense",size:"small",children:Object(T.jsx)(ze.a,{style:{color:"white"},value:s,onChange:function(e){o(e.target.value);var t=r.path.replace(/:location/i,e.target.value);a.push(t)},children:t.map((function(e){return Object(T.jsx)(ge.a,{value:e.url,children:e.name},e.url)}))})}):Object(T.jsx)(T.Fragment,{})}var Je=Object(I.a)((function(e){return Object(oe.a)({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:230,width:"calc(100% - ".concat(230,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},toolbar:{paddingRight:24},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},location:{color:"white"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:230,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},drawerCloseIcon:Object(Z.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),calendarHidden:{display:"none"},pageTitle:{marginBottom:e.spacing(1)},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},link:{textDecoration:"none",color:"rgba(0, 0, 0, 0.87)"},nested:{paddingLeft:e.spacing(10)}})})),Ue=function(e){var t=e.children,a=e.adminMode,i=e.frontMode,c=e.menuOpen,s=Object(g.a)().t,o=Je(),l=Object(O.h)(),d=Object(n.useState)(!!c),u=Object(v.a)(d,2),b=u[0],j=u[1],m=Object(n.useState)(!0),h=Object(v.a)(m,2),k=h[0],C=h[1];Object(n.useEffect)((function(){b||C(!1)}),[b]);var S=r.a.useState(null),D=Object(v.a)(S,2),I=D[0],F=D[1],M=Boolean(I),E=function(){F(null)},V=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q("/oauth/signout");case 3:e.sent.ok&&(U(),window.location.href="/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B={signedIn:!1,email:"",name:"",isAdmin:!1,isFront:!1},P=Object(n.useReducer)((function(e,t){switch(t.type){case"signedIn":return{signedIn:!0,email:t.user.email,name:t.user.name,isAdmin:t.user.isAdmin,isFront:t.user.isFront};case"signedOut":return B;default:return e}}),B),L=Object(v.a)(P,2),A=L[0],H=L[1],z=Object(n.useCallback)(Object(x.a)(f.a.mark((function e(){var t,a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=sessionStorage.getItem(K))){e.next=7;break}a=JSON.parse(t),H({type:"signedIn",user:a}),e.next=11;break;case 7:return e.next=9,q("/user/me");case 9:(n=e.sent).parsedBody?(r=n.parsedBody,J(JSON.stringify(r)),H({type:"signedIn",user:r})):(U(),H({type:"signedOut"}),console.log("Failed to retrieve email"));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),U(),window.location.href="/login";case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[]);Object(n.useEffect)((function(){z()}),[z]);var W=t,G=Object(T.jsx)(T.Fragment,{children:s("common.msg.authority-error")});return a&&!A.isAdmin&&(W=G),i&&!A.isFront&&(W=G),A.signedIn?Object(T.jsx)(ae,{children:Object(T.jsxs)("div",{className:o.root,children:[Object(T.jsx)(de.a,{position:"absolute",className:Object(se.a)(o.appBar,b&&o.appBarShift),children:Object(T.jsxs)(ue.a,{className:o.toolbar,children:[Object(T.jsx)(Oe.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){j(!0)},className:Object(se.a)(o.menuButton,b&&o.menuButtonHidden),children:Object(T.jsx)(Ne.a,{})}),Object(T.jsx)(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:o.title,children:"Visitors for Microsoft"}),Object(T.jsx)("div",{children:Object(T.jsx)(Ke,{})}),Object(T.jsxs)("div",{children:[Object(T.jsx)(Oe.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){F(e.currentTarget)},color:"inherit",children:Object(T.jsx)(we.a,{})}),Object(T.jsxs)(ve.a,{id:"menu-appbar",anchorEl:I,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:M,onClose:E,children:[Object(T.jsx)(ge.a,{onClick:E,children:A.email}),Object(T.jsx)(ge.a,{onClick:V,children:s("main.menu.logout")})]})]})]})}),Object(T.jsxs)(le.a,{variant:"permanent",classes:{paper:Object(se.a)(o.drawerPaper,!b&&o.drawerPaperClose)},open:b,children:[Object(T.jsx)("div",{className:o.drawerCloseIcon,children:Object(T.jsx)(Oe.a,{onClick:function(){j(!1)},children:Object(T.jsx)(pe.a,{})})}),Object(T.jsx)(je.a,{}),Object(T.jsxs)(be.a,{children:[Object(T.jsx)(p.b,{to:"/".concat(l.params.location,"/main"),className:o.link,children:Object(T.jsxs)(he.a,{button:!0,children:[Object(T.jsx)(ye.a,{title:s("main.menu.created-visit-info"),children:Object(T.jsx)(fe.a,{children:Object(T.jsx)(De.a,{})})}),Object(T.jsx)(ke.a,{primary:s("main.menu.created-visit-info")})]})}),Object(T.jsx)(p.b,{to:"/".concat(l.params.location,"/main/byroom"),className:o.link,children:Object(T.jsxs)(he.a,{button:!0,children:[Object(T.jsx)(ye.a,{title:s("main.menu.by-meeting-room"),children:Object(T.jsx)(fe.a,{children:Object(T.jsx)(Re.a,{})})}),Object(T.jsx)(ke.a,{primary:s("main.menu.by-meeting-room")})]})}),A.isFront&&Object(T.jsx)(p.b,{to:"/".concat(l.params.location,"/front"),className:o.link,children:Object(T.jsxs)(he.a,{button:!0,children:[Object(T.jsx)(ye.a,{title:s("main.menu.front"),children:Object(T.jsx)(fe.a,{children:Object(T.jsx)(Fe.a,{})})}),Object(T.jsx)(ke.a,{primary:s("main.menu.front")})]})}),A.isAdmin&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(he.a,{button:!0,onClick:function(){b||j(!0),C(!k)},children:[Object(T.jsx)(fe.a,{children:Object(T.jsx)(Ee.a,{})}),Object(T.jsx)(ke.a,{primary:s("main.menu.settings")}),k?Object(T.jsx)(Be.a,{}):Object(T.jsx)(Le.a,{})]}),Object(T.jsxs)(xe.a,{in:k,timeout:"auto",unmountOnExit:!0,children:[Object(T.jsx)(p.b,{to:"/".concat(l.params.location,"/settings/role"),className:o.link,children:Object(T.jsx)(he.a,{button:!0,className:o.nested,children:Object(T.jsx)(ke.a,{primary:s("main.menu.settings.role")})})}),Object(T.jsx)(p.b,{to:"/".concat(l.params.location,"/settings/location"),className:o.link,children:Object(T.jsx)(he.a,{button:!0,className:o.nested,children:Object(T.jsx)(ke.a,{primary:s("main.menu.settings.location")})})}),Object(T.jsx)(p.b,{to:"/".concat(l.params.location,"/settings/category"),className:o.link,children:Object(T.jsx)(he.a,{button:!0,className:o.nested,children:Object(T.jsx)(ke.a,{primary:s("main.menu.settings.category")})})}),Object(T.jsx)(p.b,{to:"/".concat(l.params.location,"/settings/room"),className:o.link,children:Object(T.jsx)(he.a,{button:!0,className:o.nested,children:Object(T.jsx)(ke.a,{primary:s("main.menu.settings.room")})})})]})]}),Object(T.jsxs)(he.a,{button:!0,onClick:function(){window.location.reload()},children:[Object(T.jsx)(ye.a,{title:s("main.menu.refresh"),children:Object(T.jsx)(fe.a,{children:Object(T.jsx)(Ae.a,{})})}),Object(T.jsx)(ke.a,{primary:s("main.menu.refresh")})]})]})]}),Object(T.jsxs)("main",{className:o.content,children:[Object(T.jsx)("div",{className:o.appBarSpacer}),Object(T.jsxs)(y.a,{maxWidth:"lg",className:o.container,children:[W,Object(T.jsx)(N.a,{pt:4,children:Object(T.jsx)(R,{})})]})]})]})}):Object(T.jsx)(T.Fragment,{})},Ge=a(106),Ye=a.n(Ge),Ze=a(404),$e=a.n(Ze),Xe=a(412),_e=a.n(Xe),Qe=a(405),et=a.n(Qe),tt=a(299),at=a.n(tt),nt=a(298),rt=a.n(nt),it=a(406),ct=a.n(it),st=a(408),ot=a.n(st),lt=a(409),dt=a.n(lt),ut=a(410),bt=a.n(ut),jt=a(413),mt=a.n(jt),pt=a(407),Ot=a.n(pt),ht=a(411),ft=a.n(ht),xt=a(414),vt=a.n(xt),gt={Add:Object(n.forwardRef)((function(e,t){return Object(T.jsx)($e.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(et.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(rt.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(ct.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(at.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(De.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(Ot.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(ot.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(dt.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(bt.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(at.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(pe.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(rt.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(ft.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(_e.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(mt.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(T.jsx)(vt.a,Object(Z.a)(Object(Z.a)({},e),{},{ref:t}))}))},yt={paging:!0,pageSize:10,pageSizeOptions:[5,10,20,50]},kt=a(174),wt=function(){return Object(I.a)((function(){return{cellApptTime:{},cellRoomName:{},cellRoomStatus:{},cellReservationName:{},cellVisitCompany:{},cellSubject:{},cellContactAddr:{},cellCheckIn:{},cellCheckOut:{},declinedApptTime:{textDecoration:"line-through 2px solid red"},declinedRoomName:{"&::after":{wordBreak:"keep-all",marginLeft:5,padding:"1px 5px",color:"red",border:"1px solid red",content:'"'.concat(kt.a.t("visitdialog.view.resource-status-declined"),'"')}}}}))},Ct=function(e,t,a){var n=e.charAt(0).toUpperCase()+e.slice(1);return Object(se.a)(a["cell".concat(n)],"declined"===t.roomStatus&&a["declined".concat(n)])},Nt=a(133),St=a(358),Dt=Object(o.b)({palette:{primary:{main:Nt.a[300]},secondary:{main:St.a[500]}},props:{MuiTableRow:{}},overrides:{MuiTable:{root:{borderCollapse:"separate"}}}}),Tt=function(){var e="thin solid rgba(0, 0, 0, 0.12)";return Object(I.a)((function(t){return{list:{display:"flex","&:first-child > div":{borderTop:e}},title:{boxSizing:"border-box",flexBasis:"25%",padding:"0.7em",backgroundColor:t.palette.primary.light,borderLeft:e,borderBottom:e},field:{boxSizing:"border-box",flexBasis:"75%",padding:"0.7em",borderRight:e,borderBottom:e,whiteSpace:"pre-wrap"},fieldSlim:{boxSizing:"border-box",flexBasis:"75%",padding:"0.2em",borderRight:e,borderBottom:e,whiteSpace:"pre-wrap"}}}))},Rt=a(98),It=a(26),Ft=a(246),Mt=a(238),Et=a.n(Mt),Vt=a(237),Bt=a.n(Vt),Pt=a(627),Lt=a(81),qt=a.n(Lt),At=["rooms","free"],Ht=["inside","outside"],zt=["none"].concat(Ht);function Wt(e,t){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(x.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t,a);case 3:if(n=e.sent,!(r=n.parsedBody)){e.next=9;break}return e.abrupt("return",Promise.resolve(r));case 9:return e.abrupt("return",Promise.reject(new Error("No Result Error")));case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var Jt=a(229);function Ut(e){var t=e.name,a=e.control,n=e.label,r=e.required,i=e.selectList,c=e.multiline,s=e.disabled,o=e.validation,l=e.errors,d=Object(g.a)().t,u=Object(Z.a)({required:!!r&&d("common.form.required")},o);return Object(T.jsx)(It.a,{name:t,control:a,rules:u,render:function(e){var a=e.field;return Object(T.jsx)(Jt.a,Object(Z.a)(Object(Z.a)({},a),{},{label:n,disabled:s,multiline:c,select:!!i,error:!!l[t],helperText:l[t]&&l[t].message,children:!!i&&i.map((function(e,a){return Object(T.jsx)("option",{value:e.value,children:e.label},"".concat(t,"-").concat(a))}))}))}})}var Gt=a(632),Yt=a(389);function Zt(e){var t=e.name,a=e.control,r=e.label,i=e.errors,c=e.disabled,s=e.style,o=Object(g.a)().t,l=Object(n.useState)(""),d=Object(v.a)(l,2),u=d[0],b=d[1],j=We("/user/addressbook?filter=".concat(u),[]),m=Object(v.a)(j,1)[0],p=m.data,O=m.isLoading,h=Object(n.useState)(!1),y=Object(v.a)(h,2),k=y[0],w=y[1];Object(n.useEffect)((function(){k||b("")}),[k]);var C=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)(It.a,{name:t,control:a,render:function(e){var a=e.field;return Object(T.jsx)(Gt.a,Object(Z.a)(Object(Z.a)({},a),{},{disabled:c,style:s,multiple:!0,limitTags:c?void 0:2,size:"small",open:k,onOpen:function(){w(!0)},onClose:function(){w(!1)},options:p&&u?p:[],noOptionsText:o("auto-complete.no-options-text"),loading:O,getOptionLabel:function(e){return"".concat(e.name," <").concat(e.address,">")},renderTags:function(e,t){return e.map((function(e,a){return Object(T.jsx)(Yt.a,Object(Z.a)({label:e.name,title:e.address},t({index:a})))}))},filterSelectedOptions:!0,getOptionSelected:function(e,t){return e.address===t.address},renderInput:function(e){return Object(T.jsx)(Jt.a,Object(Z.a)(Object(Z.a)({},e),{},{label:r,error:!!i[t],helperText:i[t]&&i[t].message,InputProps:Object(Z.a)(Object(Z.a)({},e.InputProps),{},{endAdornment:Object(T.jsxs)(T.Fragment,{children:[O?Object(T.jsx)(M.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}),onChange:function(e){""===e.target.value&&null===e.target.value||C(e.target.value)}}))},onChange:function(e,t){return a.onChange(t)}}))}})}var $t=a(593),Xt=a(594),_t=a(595),Qt=a(623);function ea(e){var t=e.open,a=e.onClose,n=e.title,r=e.children,i=Object(g.a)().t;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)($t.a,{open:t,onClose:a,fullWidth:!0,maxWidth:"sm","aria-labelledby":"form-dialog-title",children:[Object(T.jsx)(Qt.a,{id:"form-dialog-title",children:n}),Object(T.jsx)(_t.a,{dividers:!0,children:r}),Object(T.jsx)(Xt.a,{children:Object(T.jsx)(C.a,{onClick:function(){a()},children:i("common.button.cancel")})})]})})}var ta=a(622);function aa(e){var t=e.open,a=e.onClose,n=Object(g.a)().t;return Object(T.jsx)("div",{children:Object(T.jsxs)($t.a,{open:t,onClose:function(){a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(T.jsx)(_t.a,{children:Object(T.jsx)(ta.a,{id:"alert-dialog-description",children:n("visitorinfoform.delete-confirm-message")})}),Object(T.jsxs)(Xt.a,{children:[Object(T.jsx)(C.a,{onClick:function(){a(!0)},color:"secondary",children:"OK"}),Object(T.jsx)(C.a,{onClick:function(){a(!1)},color:"secondary",autoFocus:!0,children:"CANCEL"})]})]})})}var na=a(359),ra=a(625);function ia(e){var t=e.control,a=e.setValue,r=e.rooms,i=e.roomId,c=e.disabledVisitor,s=e.disabledRoom,o=e.errors,l=Object(g.a)().t,d=Object(n.useState)(!1),u=Object(v.a)(d,2),b=u[0],j=u[1],m=Object(It.e)({control:t,name:"resourcies.".concat(i,".roomForEdit")});Object(n.useEffect)((function(){if(m&&r){var e=r.some((function(e){return e.id===m&&e.teaSupply}));e||a("resourcies.".concat(i,".teaSupply"),!1,{shouldDirty:!0}),j(!e)}else a("resourcies.".concat(i,".teaSupply"),!1,{shouldDirty:!0}),j(!0)}),[i,m,r,a]);var p=Object(n.useState)(!1),O=Object(v.a)(p,2),h=O[0],f=O[1],x=Object(It.e)({control:t,name:"resourcies.".concat(i,".teaSupply")});Object(n.useEffect)((function(){x||(a("resourcies.".concat(i,".numberOfVisitor"),0,{shouldDirty:!0}),a("resourcies.".concat(i,".numberOfEmployee"),0,{shouldDirty:!0})),f(!x)}),[x,a,i]),Object(n.useEffect)((function(){c&&a("resourcies.".concat(i,".numberOfVisitor"),0,{shouldDirty:!0})}),[a,c,i]);var y=function(e){return Object(Lt.get)(o,"resourcies.".concat(i,".").concat(e))};return 0===(null===r||void 0===r?void 0:r.length)?Object(T.jsx)(N.a,{px:2,style:{textAlign:"center",color:"red"},children:l("visitdialog.notes.no-relevant-rooms")}):Object(T.jsxs)(N.a,{px:2,children:[Object(T.jsx)(It.a,{name:"resourcies.".concat(i,".roomForEdit"),control:t,rules:{required:l("common.form.required"),validate:function(e){return r.some((function(t){return t.id===e}))?void 0:l("visitdialog.form.error.room-not-covered")}},render:function(e){var t=e.field;return Object(T.jsx)(Jt.a,Object(Z.a)(Object(Z.a)({},t),{},{select:!0,disabled:s,label:l("visittable.header.event-room"),error:!!y("roomForEdit"),helperText:!!y("roomForEdit")&&y("roomForEdit").message,children:r.map((function(e){return Object(T.jsxs)("option",{value:e.id,children:[e.name," ","<",e.email,">"]},e.id)}))}))}}),Object(T.jsxs)(Ft.a,{container:!0,spacing:1,style:b?{display:"none"}:void 0,children:[Object(T.jsx)(Ft.a,{item:!0,xs:4,children:Object(T.jsx)(na.a,{control:Object(T.jsx)(It.a,{name:"resourcies.".concat(i,".teaSupply"),control:t,render:function(e){var t=e.field;return Object(T.jsx)(ra.a,{onChange:function(e){return t.onChange(e.target.checked)},checked:t.value,color:"primary",disabled:b})}}),label:l("visittable.header.tea-supply")})}),Object(T.jsx)(Ft.a,{item:!0,xs:4,style:c?{opacity:0}:void 0,children:Object(T.jsx)(It.a,{name:"resourcies.".concat(i,".numberOfVisitor"),control:t,rules:{required:l("common.form.required")},render:function(e){var t=e.field;return Object(T.jsx)(Jt.a,Object(Z.a)(Object(Z.a)({type:"number",inputProps:{min:0,style:{textAlign:"right"}}},t),{},{disabled:h||c,label:l("visittable.header.number-of-visitor"),error:!!y("numberOfVisitor"),helperText:!!y("numberOfVisitor")&&y("numberOfVisitor").message}))}})}),Object(T.jsx)(Ft.a,{item:!0,xs:4,children:Object(T.jsx)(It.a,{name:"resourcies.".concat(i,".numberOfEmployee"),control:t,rules:{required:l("common.form.required")},render:function(e){var t=e.field;return Object(T.jsx)(Jt.a,Object(Z.a)(Object(Z.a)({type:"number",inputProps:{min:0,style:{textAlign:"right"}}},t),{},{disabled:h,label:l("visittable.header.number-of-employee"),error:!!y("numberOfEmployee"),helperText:!!y("numberOfEmployee")&&y("numberOfEmployee").message}))}})})]})]})}var ca=Tt(),sa=function(e){switch(e){case"accepted":return"visitdialog.view.resource-status-accepted";case"declined":return"visitdialog.view.resource-status-declined";default:return""}};function oa(e){var t=e.data,a=e.hiddenTeaSupply,n=Object(g.a)().t,r=ca();return Object(T.jsx)(N.a,{px:2,pt:2,children:Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:r.list,children:[Object(T.jsx)("div",{className:r.title,children:n("visittable.header.room-name")}),Object(T.jsxs)("div",{className:r.field,children:[t.roomName," ","<",t.roomEmail,">"]})]},"room-name"),Object(T.jsxs)("li",{className:r.list,children:[Object(T.jsx)("div",{className:r.title,children:n("visittable.header.resource-status")}),Object(T.jsx)("div",{className:r.field,children:n(sa(t.roomStatus))})]},"resource-status"),!a&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("li",{className:r.list,children:[Object(T.jsx)("div",{className:r.title,children:n("visittable.header.tea-supply")}),Object(T.jsx)("div",{className:r.field,children:t.teaSupply?n("visitdialog.form.tea-supply-yes"):n("visitdialog.form.tea-supply-no")})]},"tea-supply"),t.teaSupply&&Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("li",{className:r.list,children:[Object(T.jsx)("div",{className:r.title,children:n("visittable.header.number-of-visitor")}),Object(T.jsx)("div",{className:r.field,style:{flexBasis:"25%",borderRight:"none"},children:t.numberOfVisitor}),Object(T.jsx)("div",{className:r.title,style:{flexBasis:"25%",borderLeft:"none"},children:n("visittable.header.number-of-employee")}),Object(T.jsx)("div",{className:r.field,style:{flexBasis:"25%"},children:t.numberOfEmployee})]},"number-of-visitor")})]})]})})}var la=a(276);function da(e){var t=e.name,a=e.control,n=e.getValues,r=e.label,i=e.handleDateTimeChange,c=e.errors,s=Object(g.a)().t;return Object(T.jsx)(It.a,{name:t,control:a,rules:{required:s("common.form.required"),validate:function(){return n("startTime").getTime()<n("endTime").getTime()||s("visitdialog.form.error.event-time")}},render:function(e){var a=e.field;return Object(T.jsx)(la.a,Object(Z.a)(Object(Z.a)({},a),{},{onChange:function(e){a.onChange(e),i()},ampm:!1,format:"yyyy/MM/dd HH:mm",disablePast:!0,minutesStep:5,label:r,error:!!c[t],helperText:c[t]&&c[t].message,ref:null}))}})}var ua=Tt(),ba=Object(I.a)((function(e){return Object(oe.a)({formAction:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},note:{color:"red",fontSize:"0.9em",margin:0}})})),ja=Object(o.b)({palette:{primary:{main:St.a[500]},secondary:{main:Nt.a[300]}},props:{MuiTextField:{variant:"outlined",margin:"dense",fullWidth:!0,minRows:4}}}),ma=function(e){return 1e3*Math.ceil(e.getTime()/1e3/60/5)*60*5},pa="add-room-01",Oa=function(e,t,a){var n=e||new Date,r=t||"";return{mode:"ins",iCalUId:"",subject:"",visitorId:"",visitCompany:"",visitorName:"",mailto:{authors:[],required:[],optional:[]},usageRange:a||"inside",resourcies:Object(Rt.a)({},pa,{roomForEdit:r,teaSupply:!1,numberOfVisitor:0,numberOfEmployee:0}),comment:"",contactAddr:"",startTime:Object(Pt.a)(ma(n),0),endTime:Object(Pt.a)(ma(n),30)}};function ha(e){var t=e.open,a=e.onClose,r=e.data,i=e.reload,c=e.addDefault,o=Object(g.a)().t,l=Object(Z.a)(Object(Z.a)({},ua()),ba()),d=Object(n.useContext)(te),u=Object(O.h)(),b=Object(n.useState)(!1),j=Object(v.a)(b,2),m=j[0],p=j[1],h=Oa(),y=Object(It.c)({defaultValues:h,reValidateMode:"onSubmit"}),k=y.control,w=y.getValues,S=y.handleSubmit,D=y.reset,R=y.setValue,I=y.trigger,F=y.setError,M=y.formState,E=M.errors,B=M.isDirty,P=M.isSubmitting,L=M.dirtyFields;Object(n.useEffect)((function(){D(t&&r?{mode:"upd",iCalUId:r.iCalUId,subject:r.subject,visitorId:r.visitorId,visitCompany:r.visitCompany,visitorName:r.visitorName,mailto:r.mailto,usageRange:r.usageRange,resourcies:Object.keys(r.resourcies).reduce((function(e,t){return e[t]={roomForEdit:t,teaSupply:r.resourcies[t].teaSupply,numberOfVisitor:r.resourcies[t].numberOfVisitor,numberOfEmployee:r.resourcies[t].numberOfEmployee},e}),{}),comment:r.comment,contactAddr:r.contactAddr,startTime:new Date(r.startDateTime),endTime:new Date(r.endDateTime)}:qt.a.cloneDeep(Oa(null===c||void 0===c?void 0:c.start,null===c||void 0===c?void 0:c.roomId,null===c||void 0===c?void 0:c.usageRange)))}),[r,t,D,c]);var q=Object(n.useState)(!1),A=Object(v.a)(q,2),H=A[0],z=A[1],W=Object(It.e)({control:k,name:"usageRange"}),K="/room/choices?location=".concat(u.params.location),J=Object(n.useState)(K),U=Object(v.a)(J,2),G=U[0],Y=U[1],$=We(G,[]),X=Object(v.a)($,1)[0].data,_=Object(n.useCallback)((function(){"upd"===w("mode")?Y(K):Y(K+"&start=".concat(w("startTime").getTime(),"&end=").concat(w("endTime").getTime())+"&usagerange=".concat(w("usageRange")))}),[K,w]);Object(n.useEffect)((function(){t&&_()}),[_,t,W]),Object(n.useEffect)((function(){t||z(!1)}),[t]);var Q=Object(n.useState)(!1),ee=Object(v.a)(Q,2),ae=ee[0],ne=ee[1];Object(n.useEffect)((function(){"inside"===W?(R("visitCompany","",{shouldDirty:!0}),R("visitorName","",{shouldDirty:!0}),ne(!0)):ne(!1)}),[R,W]);var re=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,r,c,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n="",e.t0=t.mode,e.next="ins"===e.t0?5:"upd"===e.t0?7:"del"===e.t0?9:11;break;case 5:return n="/event/create",e.abrupt("break",11);case 7:return n="/event/update",e.abrupt("break",11);case 9:return n="/event/delete",e.abrupt("break",11);case 11:return e.next=13,Wt(n,{inputs:t,dirtyFields:L});case 13:if(!(r=e.sent).success){e.next=24;break}if("del"!==t.mode){e.next=18;break}return e.next=18,new Promise((function(e){return setTimeout(e,1e3)}));case 18:return e.next=20,i();case 20:a(),d.dispatch({type:"success",message:o("common.msg.update-success")}),e.next=25;break;case 24:if(r.errors)for(s in c=r.errors)F(l=s,{message:o(c[l][0])});case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(0),d.dispatch({type:"error",message:e.t1.message});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(["startTime","endTime"]);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:_(),z(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){"upd"!==w("mode")&&(H||z(!0))};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(V,{open:P}),Object(T.jsx)(ea,{open:t,onClose:a,title:o("visitdialog.title"),children:Object(T.jsxs)(s.a,{theme:ja,children:[!!r&&Object(T.jsx)(N.a,{px:2,children:r.isMSMultipleLocations?Object(T.jsx)("p",{className:l.note,children:o("visitdialog.notes.multiple-locations")}):Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:l.list,children:[Object(T.jsx)("div",{className:l.title,children:o("visittable.header.resource-status")}),Object(T.jsx)("div",{className:l.field,children:o(sa(r.roomStatus))})]},"resource-status"),Object(T.jsxs)("li",{className:l.list,children:[Object(T.jsx)("div",{className:l.title,children:o("visittable.header.reservation-name")}),Object(T.jsx)("div",{className:l.field,children:r.reservationName})]},"reservation-name")]})}),Object(T.jsxs)("form",{children:[Object(T.jsxs)(N.a,{p:2,children:[Object(T.jsx)(Ut,{name:"subject",control:k,label:o("visittable.header.event-subject"),required:!0,errors:E}),Object(T.jsx)(Zt,{name:"mailto.authors",control:k,label:o("visittable.header.event-mailto-authors"),errors:E,disabled:!0,style:{display:"none"}}),Object(T.jsx)(Zt,{name:"mailto.required",control:k,label:o("visittable.header.event-mailto-required"),errors:E,disabled:null===r||void 0===r?void 0:r.isMSMultipleLocations}),Object(T.jsx)(Zt,{name:"mailto.optional",control:k,label:o("visittable.header.event-mailto-optional"),errors:E,disabled:null===r||void 0===r?void 0:r.isMSMultipleLocations}),Object(T.jsx)(N.a,{py:1,style:r?{display:"none"}:void 0,children:Object(T.jsx)(Ut,{name:"usageRange",control:k,label:o("visittable.header.usage-range"),required:!0,selectList:Ht.map((function(e){return{label:o("visitdialog.view.usage-range.".concat(e)),value:e}})),disabled:!!r,errors:E})}),Object(T.jsxs)(Ft.a,{container:!0,spacing:1,children:[Object(T.jsx)(Ft.a,{item:!0,xs:5,children:Object(T.jsx)(da,{name:"startTime",control:k,getValues:w,label:o("visittable.header.event-start-time"),handleDateTimeChange:function(){var e=Object(Pt.a)(ma(w("startTime")),30);R("endTime",e,{shouldDirty:!0}),ce()},errors:E})}),Object(T.jsx)(Ft.a,{item:!0,xs:5,children:Object(T.jsx)(da,{name:"endTime",control:k,getValues:w,label:o("visittable.header.event-end-time"),handleDateTimeChange:function(){ce()},errors:E})}),Object(T.jsx)(Ft.a,{item:!0,xs:2,style:{margin:"auto"},children:Object(T.jsx)(C.a,{onClick:ie,variant:"contained",color:"primary",fullWidth:!0,disabled:(null===r||void 0===r?void 0:r.isMSMultipleLocations)||!H,children:o("common.button.search")})})]})]}),r?Object(T.jsx)(T.Fragment,{children:r.isMSMultipleLocations?Object(T.jsx)(s.a,{theme:Dt,children:Object.keys(r.resourcies).map((function(e){return Object(T.jsx)(oa,{data:r.resourcies[e]},e)}))}):!H&&Object(T.jsx)(ia,{control:k,setValue:R,rooms:X,roomId:Object.keys(r.resourcies)[0],disabledRoom:!0,disabledVisitor:"inside"===r.usageRange,errors:E})}):!H&&Object(T.jsx)(ia,{control:k,setValue:R,rooms:X,roomId:pa,disabledVisitor:ae,errors:E}),Object(T.jsxs)(N.a,{p:2,style:ae?{display:"none"}:void 0,children:[Object(T.jsx)(Ut,{name:"visitCompany",control:k,label:o("visittable.header.visit-company"),required:!ae,disabled:ae,errors:E}),Object(T.jsx)(Ut,{name:"visitorName",control:k,label:o("visittable.header.visitor-name"),disabled:ae,errors:E})]}),Object(T.jsxs)(N.a,{p:2,children:[Object(T.jsx)(Ut,{name:"comment",control:k,label:o("visittable.header.comment"),multiline:!0,errors:E}),Object(T.jsx)(Ut,{name:"contactAddr",control:k,label:o("visittable.header.contact-addr"),errors:E})]}),Object(T.jsx)(N.a,{px:2,children:Object(T.jsxs)(Ft.a,{container:!0,justifyContent:"space-between",spacing:2,className:l.formAction,children:[Object(T.jsx)(Ft.a,{item:!0,xs:r?6:12,children:Object(T.jsx)(C.a,{onClick:function(){S(re)()},variant:"contained",color:"primary",disabled:!B||H,startIcon:Object(T.jsx)(Bt.a,{}),fullWidth:!0,children:o("common.button.save")})}),Object(T.jsx)(Ft.a,{item:!0,xs:6,style:r?void 0:{display:"none"},children:Object(T.jsx)(C.a,{onClick:function(){p(!0)},variant:"contained",color:"primary",startIcon:Object(T.jsx)(Et.a,{}),fullWidth:!0,children:o("common.button.delete")})})]})})]})]})}),Object(T.jsx)(aa,{open:m,onClose:function(e){p(!1),e&&(R("mode","del"),S(re)())}})]})}var fa=Object(I.a)((function(e){return Object(oe.a)({root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}})}));function xa(e){var t=e.key,a=e.data,n=fa();return Object(T.jsx)("div",{className:n.root,children:a.map((function(e,a){return Object(T.jsx)(Yt.a,{label:e.name},"".concat(t,"-").concat(a))}))})}var va=Tt();function ga(e){var t=e.open,a=e.onClose,n=e.data,r=Object(g.a)().t,i=va();return n.isAttendees?Object(T.jsxs)(ea,{open:t,onClose:a,title:r("visitdialog.title"),children:[Object(T.jsx)(N.a,{px:2,pt:2,children:Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.event-subject")}),Object(T.jsx)("div",{className:i.field,children:n.subject})]},"event-subject"),Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.appt-time")}),Object(T.jsx)("div",{className:i.field,children:n.apptTime})]},"app-time"),Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.reservation-name")}),Object(T.jsx)("div",{className:i.field,children:n.reservationName})]},"reservation-name")]})}),Object(T.jsx)(N.a,{px:2,pt:2,children:Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.event-mailto-required")}),Object(T.jsx)("div",{className:i.fieldSlim,children:Object(T.jsx)(xa,{data:n.mailto.required},"mailto-required")})]},"mailto-required"),Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.event-mailto-optional")}),Object(T.jsx)("div",{className:i.fieldSlim,children:Object(T.jsx)(xa,{data:n.mailto.optional},"mailto-optional")})]},"mailto-optional")]})}),Object.keys(n.resourcies).map((function(e){return Object(T.jsx)(oa,{data:n.resourcies[e]},e)})),Object(T.jsx)(N.a,{px:2,pt:2,style:"inside"===n.usageRange?{display:"none"}:void 0,children:Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.visit-company")}),Object(T.jsx)("div",{className:i.field,children:n.visitCompany})]},"visit-company"),Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.visitor-name")}),Object(T.jsx)("div",{className:i.field,children:n.visitorName})]},"visitor-name")]})}),Object(T.jsx)(N.a,{p:2,pt:2,children:Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.comment")}),Object(T.jsx)("div",{className:i.field,children:n.comment})]},"comment"),Object(T.jsxs)("li",{className:i.list,children:[Object(T.jsx)("div",{className:i.title,children:r("visittable.header.contact-addr")}),Object(T.jsx)("div",{className:i.field,children:n.contactAddr})]},"contact-addr")]})})]}):Object(T.jsx)(ea,{open:t,onClose:a,title:r("visitdialog.title"),children:r("common.msg.authority-error")})}var ya=function(e,t){switch(t.type){case"inputOpen":return{mode:"rowData",inputOpen:!0,readOpen:!1};case"addDataOpen":return{mode:"addData",inputOpen:!0,readOpen:!1,addDefault:t.addDefault};case"inputClose":return Object(Z.a)(Object(Z.a)({},e),{},{inputOpen:!1});case"readOpen":return{mode:"rowData",inputOpen:!1,readOpen:!0};case"readClose":return Object(Z.a)(Object(Z.a)({},e),{},{readOpen:!1});default:return e}};function ka(e){var t=e.dataDialogHook,a=e.isLoading,n=e.reload,r=e.currentRow,i=e.children,c=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch({type:"inputClose"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch({type:"readClose"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(s.a,{theme:Dt,children:[Object(T.jsx)(V,{open:a}),i,Object(T.jsx)(ha,{open:t.state.inputOpen,onClose:c,data:"addData"===t.state.mode?null:r,reload:n,addDefault:t.state.addDefault}),!!r&&Object(T.jsx)(ga,{open:t.state.readOpen,onClose:o,data:r})]})}var wa=wt();function Ca(e){var t=e.currentDate,a=e.dataDialogHook,r=Object(g.a)().t,i=wa(),c=Object(O.h)(),s=We("/event/visitlist?timestamp=".concat(t.getTime(),"&location=").concat(c.params.location),[]),o=Object(v.a)(s,2),l=o[0],d=l.data,u=l.isLoading,b=l.isError,j=o[1],m=Object(n.useState)(null),p=Object(v.a)(m,2),h=p[0],f=p[1],x=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),f(e)}),[a]),y=[{title:r("visittable.header.appt-time"),field:"apptTime"},{title:r("visittable.header.room-name"),field:"roomName"},{title:r("visittable.header.event-subject"),field:"subject"},{title:r("visittable.header.visit-company"),field:"visitCompany"},{title:r("visittable.header.reservation-name"),field:"reservationName"}];return b?Object(T.jsx)("div",{children:r("common.msg.fetch-failed")}):Object(T.jsx)(ka,{currentRow:h,dataDialogHook:a,isLoading:u,reload:j,children:Object(T.jsx)(Ye.a,{columns:y,components:{Cell:function(e){return Object(T.jsx)(Ge.MTableCell,Object(Z.a)(Object(Z.a)({},e),{},{className:Ct(e.columnDef.field,e.rowData,i)}))}},data:d,onRowClick:function(e,t){return!!t&&x(t)},options:Object(Z.a)({showTitle:!1,toolbar:!1,search:!1,headerStyle:{backgroundColor:Dt.palette.primary.light},tableLayout:"fixed"},yt),icons:gt})})}var Na=a(239),Sa=a.n(Na),Da=a(275),Ta=Object(I.a)({keyboardDatePicker:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:0}}});var Ra=function(e){var t=e.label,a=e.date,n=e.onChange,r=Ta();return Object(T.jsx)(Da.b,{margin:"normal",id:"date-picker-dialog",label:t,format:"yyyy/MM/dd",showTodayButton:!0,value:a,onChange:n,KeyboardButtonProps:{"aria-label":"change date"},size:"small",className:r.keyboardDatePicker,inputProps:{style:{width:85}}})},Ia=Object(I.a)((function(){return{datePicker:{margin:"auto 0"},title:{margin:"auto 0.25em"}}}));function Fa(e){var t=e.title,a=e.subtitle,n=e.date,r=e.onDateChange,i=e.dispatch,c=e.actionButtons,s=Object(g.a)().t,o=Ia();return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(Ft.a,{container:!0,alignItems:"stretch",justifyContent:"space-between",children:[Object(T.jsxs)(Ft.a,{container:!0,item:!0,xs:12,sm:c?6:9,children:[Object(T.jsx)(Ft.a,{item:!0,className:o.datePicker,children:Object(T.jsx)(Ra,{label:s("main.header.picker-label"),date:n,onChange:r})}),Object(T.jsx)(Ft.a,{item:!0,className:o.title,children:Object(T.jsx)(w.a,{component:"h5",children:t})})]}),Object(T.jsxs)(Ft.a,{container:!0,item:!0,justifyContent:"flex-end",alignItems:"center",spacing:2,xs:12,sm:c?6:3,children:[!!c&&c.map((function(e,t){return Object(T.jsx)(Ft.a,{item:!0,children:e},"actionButtons-".concat(t))})),Object(T.jsx)(Ft.a,{item:!0,children:Object(T.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(T.jsx)(Sa.a,{}),onClick:function(e){i({type:"addDataOpen"})},children:s("main.header.add-event")})})]}),Object(T.jsx)(N.a,{pt:1,children:a})]})})}function Ma(){var e=Object(g.a)().t,t=Object(n.useState)(new Date),a=Object(v.a)(t,2),r=a[0],i=a[1],c=Object(n.useReducer)(ya,{mode:"addData",inputOpen:!1,readOpen:!1}),s=Object(v.a)(c,2),o=s[0],l=s[1];return Object(T.jsx)(Ue,{children:Object(T.jsxs)(ce.a,{square:!0,children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Fa,{title:e("main.visitlist.title"),subtitle:e("main.visitlist.subtitle"),date:r,onDateChange:function(e){i(e)},dispatch:l})}),Object(T.jsx)(N.a,{px:2,pb:2,children:Object(T.jsx)(Ca,{currentDate:r,dataDialogHook:{state:o,dispatch:l}})})]})})}var Ea=a(5),Va=a(147),Ba=a(633),Pa=a(403),La=a(297),qa=a(149),Aa=a(244),Ha={width:120,halfWidth:60,scale:2,transform:{x:-960,y:0}},za=70,Wa="0 0 ".concat(1442," ").concat(za),Ka=30,Ja=function(e,t){var a=Object(Va.a)(e);return Object(Ba.a)(e,a)*t.scale},Ua=function(e,t,a){var n=new Date(e.start),r=new Date(e.end),i=Ja(n,t),c=Ja(r,t);if(!Object(Pa.a)(n,r)){var s=Object(Va.a)(a),o=Object(La.a)(a);Object(qa.a)(o,r)&&(c=Ja(o,t)),Object(Aa.a)(s,n)&&(i=Ja(s,t))}return{x:i,width:c-i,className:e.status}},Ga=function(e,t){return(e+1)*t+1},Ya=function(e){return"translate(".concat(e.transform.x,",").concat(e.transform.y,")")},Za=Object(Ea.a)((function(e){return{tooltip:{backgroundColor:e.palette.grey[100],color:e.palette.text.primary,maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid ".concat(e.palette.grey[300])}}}))(ye.a),$a=Object(I.a)((function(e){return Object(oe.a)({container:{display:"flex",flexDirection:"column",marginBottom:"0.5rem",height:"5vmin","& svg":{fontSize:"1.5rem","& line":{strokeWidth:2},"& line.hour-line":{stroke:e.palette.grey[400]},"& line.hour-half-line":{stroke:e.palette.grey[300]},"& text":{fill:e.palette.grey[400]},"& text.subject":{fill:"#fff",fontSize:"1.2rem",dominantBaseline:"central",cursor:"pointer"},"& rect":{strokeWidth:1,fillOpacity:.5},"& rect.new-event-bar":{fillOpacity:0},"& rect.event":{stroke:e.palette.success.main,fill:e.palette.success.light,fillOpacity:.9,cursor:"pointer"},"& rect.myOwn":{stroke:e.palette.info.main,fill:e.palette.info.light},"& rect.wait":{stroke:e.palette.warning.light,fill:e.palette.warning.main},"& rect.busy":{stroke:e.palette.error.light,fill:e.palette.error.main}}},title:{fontSize:"1rem",paddingBottom:0}})}));function Xa(e){var t=e.dataDialogHook,a=e.schedule,r=e.events,i=e.onClickCallback,c=e.keyLabel,s=e.keyValue,o=e.onTitleClick,l=$a(),d=Object(n.useState)(Ha),u=Object(v.a)(d,2),b=u[0],j=(u[1],Object(n.useState)(Ya(b))),m=Object(v.a)(j,2),p=m[0],O=m[1];Object(n.useEffect)((function(){O(Ya(b))}),[b,r]);var h=Object(n.useCallback)((function(e,t,a){var n=Ua(e,b,new Date(a));return Object(T.jsx)("rect",{className:n.className,x:n.x,y:31,width:n.width,height:39,rx:3,ry:5},"".concat(s,"-sc-").concat(t))}),[b,s,31,39]),f=Object(n.useCallback)((function(e,t,a){var n={status:"event",start:e.startDateTime,end:e.endDateTime},r=Ua(n,b,new Date(a)),c=r.x,o=r.width,l=e.isAttendees?"myOwn":"";return Object(T.jsx)(Za,{title:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(w.a,{variant:"body2",children:e.subject}),Object(T.jsx)("em",{children:e.apptTime})," ",Object(T.jsx)("b",{children:e.reservationName})]}),onClick:function(){i(e)},children:Object(T.jsx)("svg",{x:c,y:31,width:o,height:39,viewBox:"0 0 ".concat(o," ").concat(39),children:Object(T.jsxs)("g",{children:[Object(T.jsx)("rect",{className:Object(se.a)(r.className,l),x:0,y:0,width:o,height:39,rx:3,ry:5}),Object(T.jsx)("text",{className:"subject",x:3,y:"50%",children:e.subject})]})})},"".concat(s,"-ev-").concat(t))}),[b,31,39,s,i]),x=Object(n.useMemo)((function(){return Object(T.jsx)(T.Fragment,{children:a.scheduleItems.map((function(e,t){return h(e,t,a.date)}))})}),[h,a]),g=Object(n.useMemo)((function(){return Object(T.jsx)(T.Fragment,{children:r.map((function(e,t){return f(e,t,a.date)}))})}),[f,r,a]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(C.a,{color:"secondary",className:l.title,size:"small",onClick:function(){return o(a.date,a.categoryId,a.roomId)},children:c}),Object(T.jsx)("div",{className:l.container,children:Object(T.jsx)("svg",{viewBox:Wa,preserveAspectRatio:"none",children:Object(T.jsxs)("g",{transform:p,children:[Object(T.jsx)("line",{className:"hour-line",x1:0,y1:0,x2:0,y2:za}),Object(T.jsx)("line",{className:"hour-half-line",x1:b.halfWidth,y1:Ka,x2:b.halfWidth,y2:za}),qt.a.range(0,24).map((function(e){var t=Ga(e,b.width),a=t+b.halfWidth,r=e*b.width+5;return Object(T.jsxs)(n.Fragment,{children:[Object(T.jsx)("line",{className:"hour-line",x1:t,y1:0,x2:t,y2:za},"hour-line-".concat(e)),Object(T.jsx)("line",{className:"hour-half-line",x1:a,y1:Ka,x2:a,y2:za},"hour-half-line-".concat(e)),Object(T.jsx)("text",{x:r,y:25,children:e},"hour-text-".concat(e))]},"fragment-".concat(e))})),Object(T.jsx)("rect",{className:"new-event-bar",x:0,y:31,width:Ga(24,b.width),height:39,onClick:function(e){return function(e,a,n,r){var i=e.currentTarget.closest("svg");if(i){var c=i.createSVGPoint();c.x=e.clientX,c.y=e.clientY;var s=i.getScreenCTM();if(s){var o=function(e,t){return(e+0)/t.scale*60*1e3}(c.matrixTransform(s.inverse()).x-b.transform.x+1,b),l=1e3*Math.floor(o/1e3/60/30)*60*30,d=new Date(Object(Va.a)(a).getTime()+l);t.dispatch({type:"addDataOpen",addDefault:{start:d,roomId:n,usageRange:r}})}}}(e,a.date,a.roomId,a.usageRange)}}),x,g]})})})]})}function _a(e){var t=e.currentDate,a=e.dataDialogHook,r=e.tabKey,i=e.onTitleClick,c=Object(g.a)().t,s=Object(O.h)(),o=We("/event/byroom?timestamp=".concat(t.getTime(),"&location=").concat(s.params.location,"&category=").concat(r),void 0),l=Object(v.a)(o,2),d=l[0],u=d.data,b=d.isLoading,j=d.isError,m=l[1],p=Object(n.useState)(null),h=Object(v.a)(p,2),f=h[0],x=h[1],y=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),x(e)}),[a]),k=Object(n.useMemo)((function(){return u?Object(T.jsx)(T.Fragment,{children:u.schedules.map((function(e,t){return Object(T.jsx)(Xa,{dataDialogHook:a,schedule:e,events:u.events.filter((function(t,a){return e.eventsIndex.some((function(e){return e===a}))})),onClickCallback:y,keyLabel:e.roomName,keyValue:e.roomEmail,onTitleClick:i},t)}))}):Object(T.jsx)(T.Fragment,{})}),[u,a,y,i]);return j?Object(T.jsx)("div",{children:c("common.msg.fetch-failed")}):Object(T.jsx)(ka,{currentRow:f,dataDialogHook:a,isLoading:b,reload:m,children:k})}var Qa=a(33),en=a(145);function tn(e){var t=e.currentDate,a=e.dataDialogHook,r=e.tabKey,i=e.onTitleClick,c=Object(g.a)().t,s=Object(O.h)(),o=Object(n.useContext)(Qa.b),l=We("/event/byroom/weekly?timestamp=".concat(t.getTime(),"&location=").concat(s.params.location,"&room=").concat(r),void 0),d=Object(v.a)(l,2),u=d[0],b=u.data,j=u.isLoading,m=u.isError,p=d[1],h=Object(n.useState)(null),f=Object(v.a)(h,2),x=f[0],y=f[1],k=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),y(e)}),[a]),w=Object(n.useMemo)((function(){return b?Object(T.jsx)(T.Fragment,{children:b.schedules.map((function(e,t){return Object(T.jsx)(Xa,{dataDialogHook:a,schedule:e,events:b.events.filter((function(t,a){return e.eventsIndex.some((function(e){return e===a}))})),onClickCallback:k,keyLabel:Object(en.default)(e.date,"yyyy/MM/dd",{locale:null===o||void 0===o?void 0:o.locale}),keyValue:e.date.toString(),onTitleClick:i},t)}))}):Object(T.jsx)(T.Fragment,{})}),[b,a,k,null===o||void 0===o?void 0:o.locale,i]);return m?Object(T.jsx)("div",{children:c("common.msg.fetch-failed")}):Object(T.jsx)(ka,{currentRow:x,dataDialogHook:a,isLoading:j,reload:p,children:w})}var an=a(432),nn=a(628),rn=a(629),cn=a(152);function sn(e){var t=e.data,a=e.tabPanelContent,r=e.selected,i=Object(n.useState)(""),c=Object(v.a)(i,2),s=c[0],o=c[1];Object(n.useEffect)((function(){o(r||t[0].id)}),[t,r]);var l=function(e,t){o(t)},d=Object(n.useMemo)((function(){return Object(T.jsx)(nn.a,{indicatorColor:"primary",textColor:"primary",variant:"scrollable",onChange:l,"aria-label":"view tabs",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(T.jsx)(an.a,{label:e.name,value:"".concat(e.id)},"tab-".concat(t))}))})}),[t]),u=Object(n.useMemo)((function(){return Object(T.jsx)(T.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(T.jsx)(rn.a,{value:"".concat(e.id),children:Object(n.cloneElement)(a,{tabKey:e.id})},"tab-panel-".concat(t))}))})}),[t,a]);return Object(T.jsxs)(cn.a,{value:s,children:[Object(T.jsx)(de.a,{position:"static",color:"default",children:d}),u]})}function on(e){var t=e.tabPanelContent,a=e.selected,n=We("/category/choices",[]),r=Object(v.a)(n,1)[0].data;return Object(T.jsx)(T.Fragment,{children:!!(null===r||void 0===r?void 0:r.length)&&Object(T.jsx)(sn,{data:r,tabPanelContent:t,selected:a})})}function ln(e){var t=e.tabPanelContent,a=e.type,n=e.selected,r=Object(O.h)(),i=a?"&type=".concat(a):"",c=We("/room/choices?location=".concat(r.params.location).concat(i),[]),s=Object(v.a)(c,1)[0].data;return Object(T.jsx)(T.Fragment,{children:!!(null===s||void 0===s?void 0:s.length)&&Object(T.jsx)(sn,{data:s,tabPanelContent:t,selected:n})})}var dn=function(e,t){switch(t.type){case"default":return{weekly:!1,changeTab:t.changeTab,titleLabel:"main.byroom.title",subtitleLabel:"main.byroom.subtitle"};case"weekly":return{weekly:!0,changeTab:t.changeTab,titleLabel:"main.byroom-weekly.title",subtitleLabel:"main.byroom-weekly.subtitle"};default:return e}};function un(){var e=Object(g.a)().t,t=Object(n.useState)(new Date),a=Object(v.a)(t,2),r=a[0],i=a[1],c=Object(n.useReducer)(ya,{mode:"addData",inputOpen:!1,readOpen:!1}),s=Object(v.a)(c,2),o=s[0],l=s[1],d=Object(n.useReducer)(dn,{weekly:!1,changeTab:void 0,titleLabel:"main.byroom.title",subtitleLabel:"main.byroom.subtitle"}),u=Object(v.a)(d,2),b=u[0],j=u[1];return Object(T.jsx)(Ue,{children:Object(T.jsxs)(ce.a,{square:!0,children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Fa,{title:e(b.titleLabel),subtitle:e(b.subtitleLabel),date:r,onDateChange:function(e){i(e)},dispatch:l})}),!b.weekly&&Object(T.jsx)(on,{tabPanelContent:Object(T.jsx)(_a,{currentDate:r,dataDialogHook:{state:o,dispatch:l},tabKey:"dummyId",onTitleClick:function(e,t,a){i(new Date(e)),j({type:"weekly",changeTab:a})}}),selected:b.changeTab}),b.weekly&&Object(T.jsx)(ln,{tabPanelContent:Object(T.jsx)(tn,{currentDate:r,dataDialogHook:{state:o,dispatch:l},tabKey:"dummyId",onTitleClick:function(e,t,a){i(new Date(e)),j({type:"default",changeTab:t})}}),selected:b.changeTab,type:"rooms"})]})})}var bn=a(418),jn=a.n(bn),mn=a(415),pn=a.n(mn),On=Tt(),hn=Object(I.a)({checkAction:{textAlign:"center",marginBottom:"10px","& Button":{margin:"0 5%",width:"40%"}}});function fn(e){var t=e.open,a=e.onClose,r=e.data,i=e.reload,c=Object(g.a)().t,s=On(),o=hn(),l=Object(n.useContext)(Qa.b),d=Object(n.useContext)(te),u=Object(It.c)({reValidateMode:"onSubmit"}),b=u.register,j=u.handleSubmit,m=u.setValue,p=u.reset,O=u.formState,h=O.errors,v=O.isSubmitting,y=O.dirtyFields;Object(n.useEffect)((function(){t?p({id:r.visitorId,checkIn:r.checkIn,checkOut:r.checkOut,visitorCardNumber:r.visitorCardNumber}):p()}),[r,t,p]);var k=function(){return Object(en.default)(new Date,"yyyy/MM/dd HH:mm:ss",{locale:null===l||void 0===l?void 0:l.locale})},w=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wt("/front/".concat(t.mode),{inputs:t,dirtyFields:y});case 3:if(!e.sent.success){e.next=11;break}return e.next=7,i();case 7:a(),d.dispatch({type:"success",message:c("common.msg.update-success")}),e.next=12;break;case 11:d.dispatch({type:"error",message:c("common.msg.update-failed")});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d.dispatch({type:"error",message:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(V,{open:v}),Object(T.jsxs)(ea,{open:t,onClose:a,title:c("visitdialog.title"),children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsxs)("form",{children:[Object(T.jsxs)("div",{className:o.checkAction,children:[Object(T.jsx)(C.a,{onClick:function(){m("mode","checkin"),m("checkIn",k(),{shouldDirty:!0}),j(w)()},variant:"contained",color:"secondary",disabled:!!r.checkOut,children:c("visitdialog.button.check-in")}),Object(T.jsx)(C.a,{onClick:function(){m("mode","checkout"),m("checkOut",k(),{shouldDirty:!0}),j(w)()},variant:"contained",color:"secondary",disabled:!r.checkIn,children:c("visitdialog.button.check-out")})]}),Object(T.jsx)("div",{children:Object(T.jsx)(Jt.a,Object(Z.a)(Object(Z.a)({margin:"normal",fullWidth:!0,autoComplete:"off",color:"secondary",id:"visitorCardNumber",label:c("visitdialog.form.visitor-card-number"),autoFocus:!0},b("visitorCardNumber",{})),{},{error:!!h.visitorCardNumber,helperText:h.visitorCardNumber&&h.visitorCardNumber.message}))})]})}),Object(T.jsx)(N.a,{px:2,pt:2,children:Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.appt-time")}),Object(T.jsx)("div",{className:s.field,children:r.apptTime})]},"app-time"),Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.check-in")}),Object(T.jsx)("div",{className:s.field,children:r.checkIn})]},"check-in"),Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.check-out")}),Object(T.jsx)("div",{className:s.field,children:r.checkOut})]},"check-out"),Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.visit-company")}),Object(T.jsx)("div",{className:s.field,children:r.visitCompany})]},"visit-company"),Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.visitor-name")}),Object(T.jsx)("div",{className:s.field,children:r.visitorName})]},"visitor-name"),Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.comment")}),Object(T.jsx)("div",{className:s.field,children:r.comment})]},"comment")]})}),Object.keys(r.resourcies).map((function(e){return Object(T.jsx)(oa,{data:r.resourcies[e]},e)})),Object(T.jsx)(N.a,{p:2,children:Object(T.jsxs)(be.a,{disablePadding:!0,children:[Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.reservation-name")}),Object(T.jsx)("div",{className:s.field,children:r.reservationName})]},"reservation-name"),Object(T.jsxs)("li",{className:s.list,children:[Object(T.jsx)("div",{className:s.title,children:c("visittable.header.contact-addr")}),Object(T.jsx)("div",{className:s.field,children:r.contactAddr})]},"contact-addr")]})})]})]})}var xn=wt();function vn(e){var t=e.currentDate,a=e.dataDialogHook,r=e.tabKey,i=Object(g.a)().t,c=xn(),s=Object(O.h)(),o=We("/front/visitlist?timestamp=".concat(t.getTime(),"&location=").concat(s.params.location,"&category=").concat(r),[]),l=Object(v.a)(o,2),d=l[0],u=d.data,b=d.isLoading,j=d.isError,m=l[1],p=Object(n.useState)(!1),h=Object(v.a)(p,2),y=h[0],k=h[1],w=Object(n.useState)(null),C=Object(v.a)(w,2),N=C[0],S=C[1],D=Object(n.useCallback)((function(e){e.isAuthor?a.dispatch({type:"inputOpen"}):a.dispatch({type:"readOpen"}),S(e)}),[a]),R=Object(n.useCallback)((function(e){k(!0),S(e)}),[]),I=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=[{title:i("visittable.header.appt-time"),field:"apptTime"},{title:i("visittable.header.room-name"),field:"roomName"},{title:i("visittable.header.tea-supply"),field:"teaSupply",render:function(e){var t=Object.keys(e.resourcies)[0],a="".concat(i("visitdialog.view.tea-supply.number-of-visitor"),":").concat(e.resourcies[t].numberOfVisitor),n="".concat(i("visitdialog.view.tea-supply.number-of-employee"),":").concat(e.resourcies[t].numberOfEmployee);return"".concat(a,", ").concat(n)}},{title:i("visittable.header.visit-company"),field:"visitCompany"},{title:i("visittable.header.visitor-name"),field:"visitorName"},{title:i("visittable.header.check-in"),field:"checkIn",type:"boolean"},{title:i("visittable.header.check-out"),field:"checkOut",type:"boolean"},{title:i("visittable.header.reservation-name"),field:"reservationName"},{title:i("visittable.header.comment"),field:"comment"}];return j?Object(T.jsx)("div",{children:i("common.msg.fetch-failed")}):Object(T.jsxs)(ka,{currentRow:N,dataDialogHook:a,isLoading:b,reload:m,children:[Object(T.jsx)(Ye.a,{columns:F,components:{Cell:function(e){return Object(T.jsx)(Ge.MTableCell,Object(Z.a)(Object(Z.a)({},e),{},{className:Ct(e.columnDef.field,e.rowData,c)}))}},data:u,onRowClick:function(e,t){return!!t&&R(t)},actions:[{icon:function(){return Object(T.jsx)(pn.a,{})},tooltip:i("visittable.header.edit-action"),onClick:function(e,t){return!!t&&D(t)}}],localization:{header:{actions:""}},options:Object(Z.a)({showTitle:!1,toolbar:!1,search:!1,headerStyle:{backgroundColor:Dt.palette.primary.light},tableLayout:"fixed"},yt),icons:gt}),N&&Object(T.jsx)(fn,{open:y,onClose:I,data:N,reload:m})]})}var gn=a(630),yn=a(416),kn=a(417),wn=a.n(kn),Cn=Object(I.a)({keyboardDatePicker:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:0}},between:{textAlign:"center"}}),Nn=["category","apptTime","roomName","teaSupply","numberOfVisitor","numberOfEmployee","visitCompany","visitorName","checkIn","visitorCardNumber","checkOut","reservationName","contactAddr","subject","comment"];function Sn(e){var t=e.open,a=e.onClose,r=Object(g.a)().t,i=Cn(),c=Object(O.h)(),s=Object(n.useContext)(te),o=Object(n.useRef)(null),l=Object(n.useState)([]),d=Object(v.a)(l,2),u=d[0],b=d[1],j=Object(n.useMemo)((function(){return{location:c.params.location,startDate:new Date,endDate:Object(gn.a)(new Date,1)}}),[c.params.location]),m=Object(It.c)({defaultValues:j,reValidateMode:"onSubmit"}),p=m.control,h=m.getValues,y=m.handleSubmit,k=m.reset,w=m.setValue,S=m.formState,D=S.errors,R=S.isSubmitting,I=S.dirtyFields;Object(n.useEffect)((function(){t&&k(j)}),[j,t,k]);var F=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(B)();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=Nn.map((function(e){return{label:r("export-csv.file.header.".concat(qt.a.kebabCase(e))),key:e}})),E="visitor-".concat(Object(en.default)(h("startDate"),"yyyyMMdd"),"-").concat(Object(en.default)(h("endDate"),"yyyyMMdd"),".csv"),B=function(){var e=Object(x.a)(f.a.mark((function e(t){var a,n,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wt("/front/export",{inputs:t,dirtyFields:I});case 3:(a=e.sent).success?a.value&&(i=a.value.map((function(e){var t=e.category;return e.data.map((function(e){var a=Object.keys(e.resourcies)[0];return{category:t,apptTime:e.apptTime,roomName:e.roomName,teaSupply:e.resourcies[a].teaSupply?r("export-csv.file.tea-supply-yes"):r("export-csv.file.tea-supply-no"),numberOfVisitor:e.resourcies[a].numberOfVisitor.toString(),numberOfEmployee:e.resourcies[a].numberOfEmployee.toString(),visitCompany:e.visitCompany,visitorName:e.visitorName,checkIn:e.checkIn,visitorCardNumber:e.visitorCardNumber,checkOut:e.checkOut,reservationName:e.reservationName,contactAddr:e.contactAddr,subject:e.subject,comment:e.comment}}))})),b(i.flat()),null===o||void 0===o||null===(n=o.current)||void 0===n||n.link.click(),s.dispatch({type:"success",message:r("export-csv.msg.export-success")})):s.dispatch({type:"error",message:r("export-csv.msg.export-failed")}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.dispatch({type:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e){return Object(T.jsx)(It.a,{name:"".concat(e,"Date"),control:p,rules:{required:r("common.form.required"),validate:function(){return Object(Va.a)(h("startDate")).getTime()<=Object(Va.a)(h("endDate")).getTime()||r("export-csv.form.error.event-time")}},render:function(t){var a=t.field;return Object(T.jsx)(Da.b,Object(Z.a)(Object(Z.a)({},a),{},{onChange:function(t){a.onChange(t),"start"===e&&function(){var e=Object(gn.a)(h("startDate"),1);w("endDate",e,{shouldDirty:!0})}()},format:"yyyy/MM/dd",label:r("export-csv.".concat(e,"-date")),showTodayButton:!0,KeyboardButtonProps:{"aria-label":"change date"},size:"small",className:i.keyboardDatePicker,error:!!D["".concat(e,"Date")],helperText:D["".concat(e,"Date")]&&D["".concat(e,"Date")].message}))}})};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(V,{open:R}),Object(T.jsxs)(ea,{open:t,onClose:a,title:r("export-csv.title"),children:[Object(T.jsxs)("form",{children:[Object(T.jsx)(N.a,{px:2,pt:2,children:Object(T.jsxs)(Ft.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(T.jsx)(Ft.a,{container:!0,item:!0,xs:12,sm:4,children:P("start")}),Object(T.jsx)(Ft.a,{item:!0,xs:12,sm:4,className:i.between,children:Object(T.jsx)(wn.a,{})}),Object(T.jsx)(Ft.a,{container:!0,item:!0,xs:12,sm:4,children:P("end")})]})}),Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(C.a,{onClick:F,variant:"contained",color:"primary",fullWidth:!0,children:r("export-csv.button.export-csv")})})]}),Object(T.jsx)(yn.CSVLink,{style:{display:"none"},data:u,headers:M,filename:E,ref:o,children:"Export Trigger"})]})]})}function Dn(){var e=Object(g.a)().t,t=Object(n.useState)(new Date),a=Object(v.a)(t,2),r=a[0],i=a[1],c=Object(n.useReducer)(ya,{mode:"addData",inputOpen:!1,readOpen:!1}),s=Object(v.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)(!1),u=Object(v.a)(d,2),b=u[0],j=u[1],m=Object(T.jsx)(C.a,{variant:"contained",startIcon:Object(T.jsx)(jn.a,{}),onClick:function(){j(!0)},children:e("main.header.export-csv")});return Object(T.jsxs)(Ue,{frontMode:!0,children:[Object(T.jsxs)(ce.a,{square:!0,children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Fa,{title:e("main.front.title"),date:r,onDateChange:function(e){i(e)},dispatch:l,actionButtons:[m]})}),Object(T.jsx)(on,{tabPanelContent:Object(T.jsx)(vn,{currentDate:r,dataDialogHook:{state:o,dispatch:l},tabKey:"dummyId"})})]}),Object(T.jsx)(Sn,{open:b,onClose:function(){j(!1)}})]})}function Tn(e){var t=e.open,a=e.onClose,n=Object(g.a)().t;return Object(T.jsx)("div",{children:Object(T.jsxs)($t.a,{open:t,onClose:function(){a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(T.jsx)(_t.a,{children:Object(T.jsx)(ta.a,{id:"alert-dialog-description",children:n("common.msg.delete-confirm")})}),Object(T.jsxs)(Xt.a,{children:[Object(T.jsx)(C.a,{onClick:function(){a(!0)},color:"secondary",children:"OK"}),Object(T.jsx)(C.a,{onClick:function(){a(!1)},color:"secondary",autoFocus:!0,children:"CANCEL"})]})]})})}var Rn=Object(I.a)((function(e){return Object(oe.a)({formAction:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},note:{color:"red",fontSize:"0.9em",margin:0}})})),In=Object(o.b)({palette:{primary:{main:St.a[500]},secondary:{main:Nt.a[300]}},props:{MuiTextField:{variant:"outlined",margin:"dense",fullWidth:!0,minRows:4}}});function Fn(e){var t=e.inputFields,a=e.open,r=e.onClose,i=e.data,c=e.reload,o=Object(g.a)().t,l=Rn(),d=Object(n.useContext)(te),u=Object(n.useState)(!1),b=Object(v.a)(u,2),j=b[0],m=b[1],p=Object(It.c)({defaultValues:Object(Z.a)({},t.defaultValues),reValidateMode:"onSubmit"}),O=p.handleSubmit,h=p.reset,y=p.setValue,k=p.setError,w=p.formState,S=w.isDirty,D=w.isSubmitting,R=w.dirtyFields;Object(n.useEffect)((function(){if(a&&i){var e=Object.keys(t.defaultValues).reduce((function(e,t){return"mode"===t?e.mode="upd":e[t]=i[t],e}),{});h(qt.a.cloneDeep(e))}else h(qt.a.cloneDeep(t.defaultValues))}),[i,t,a,h]);var I=function(){var e=Object(x.a)(f.a.mark((function e(a){var n,i,s,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n="",e.t0=a.mode,e.next="ins"===e.t0?5:"upd"===e.t0?7:"del"===e.t0?9:11;break;case 5:return n="/".concat(t.type,"/create"),e.abrupt("break",11);case 7:return n="/".concat(t.type,"/update"),e.abrupt("break",11);case 9:return n="/".concat(t.type,"/delete"),e.abrupt("break",11);case 11:return e.next=13,Wt(n,{inputs:a,dirtyFields:R});case 13:if(!(i=e.sent).success){e.next=27;break}if("del"!==a.mode){e.next=18;break}return e.next=18,new Promise((function(e){return setTimeout(e,1e3)}));case 18:return e.next=20,c();case 20:if(r(),d.dispatch({type:"success",message:o("common.msg.update-success")}),"role"!==t.type&&"location"!==t.type){e.next=25;break}return e.next=25,new Promise((function(){return setTimeout((function(){d.dispatch({type:"warning",message:o("common.msg.prompt-logout")})}),1500)}));case 25:e.next=28;break;case 27:if(i.errors)for(l in s=i.errors)k(u=l,{message:o(s[u][0])});case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(0),d.dispatch({type:"error",message:e.t1.message});case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(V,{open:D}),Object(T.jsx)(ea,{open:a,onClose:r,title:o("settings.title.".concat(t.type)),children:Object(T.jsx)(s.a,{theme:In,children:Object(T.jsx)(It.b,Object(Z.a)(Object(Z.a)({},p),{},{children:Object(T.jsxs)("form",{children:[Object(T.jsx)(N.a,{p:2,children:t.item}),Object(T.jsx)(N.a,{px:2,children:Object(T.jsxs)(Ft.a,{container:!0,justifyContent:"space-between",spacing:2,className:l.formAction,children:[Object(T.jsx)(Ft.a,{item:!0,xs:i?6:12,children:Object(T.jsx)(C.a,{onClick:function(){O(I)()},variant:"contained",color:"primary",disabled:!S,startIcon:Object(T.jsx)(Bt.a,{}),fullWidth:!0,children:o("common.button.save")})}),Object(T.jsx)(Ft.a,{item:!0,xs:6,style:i?void 0:{display:"none"},children:Object(T.jsx)(C.a,{onClick:function(){m(!0)},variant:"contained",color:"primary",startIcon:Object(T.jsx)(Et.a,{}),fullWidth:!0,children:o("common.button.delete")})})]})})]})}))})}),Object(T.jsx)(Tn,{open:j,onClose:function(e){m(!1),e&&(y("mode","del"),O(I)())}})]})}var Mn=function(e,t){switch(t.type){case"inputOpen":return{mode:"rowData",inputOpen:!0};case"addDataOpen":return{mode:"addData",inputOpen:!0};case"inputClose":return Object(Z.a)(Object(Z.a)({},e),{},{inputOpen:!1});default:return e}};function En(e){var t=e.inputFields,a=e.dataDialogHook,n=e.isLoading,r=e.reload,i=e.currentRow,c=e.children,o=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.dispatch({type:"inputClose"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(s.a,{theme:Dt,children:[Object(T.jsx)(V,{open:n}),c,Object(T.jsx)(Fn,{inputFields:t,open:a.state.inputOpen,onClose:o,data:"addData"===a.state.mode?null:i,reload:r})]})}var Vn=wt();function Bn(e){var t=e.inputFields,a=e.columns,r=e.dataDialogHook,i=Object(g.a)().t,c=Vn(),s=We("/".concat(t.type,"/list"),[]),o=Object(v.a)(s,2),l=o[0],d=l.data,u=l.isLoading,b=l.isError,j=o[1],m=Object(n.useState)(null),p=Object(v.a)(m,2),O=p[0],h=p[1],f=Object(n.useCallback)((function(e){r.dispatch({type:"inputOpen"}),h(e)}),[r]);return b?Object(T.jsx)("div",{children:i("common.msg.fetch-failed")}):Object(T.jsx)(En,{inputFields:t,currentRow:O,dataDialogHook:r,isLoading:u,reload:j,children:Object(T.jsx)(Ye.a,{columns:a,components:{Cell:function(e){return Object(T.jsx)(Ge.MTableCell,Object(Z.a)(Object(Z.a)({},e),{},{className:Ct(e.columnDef.field,e.rowData,c)}))}},data:d,onRowClick:function(e,t){return!!t&&f(t)},options:Object(Z.a)({showTitle:!1,toolbar:!1,search:!1,headerStyle:{backgroundColor:Dt.palette.primary.light},tableLayout:"fixed"},yt),icons:gt})})}var Pn=Object(I.a)((function(){return{actionButtonArea:{textAlign:"right",margin:"auto"}}}));function Ln(e){var t=e.master,a=e.dispatch,n=Object(g.a)().t,r=Pn();return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(Ft.a,{container:!0,alignItems:"stretch",justifyContent:"space-between",children:[Object(T.jsx)(Ft.a,{container:!0,item:!0,xs:12,sm:9,children:Object(T.jsx)(w.a,{component:"h1",variant:"h6",children:n("settings.title.".concat(t))})}),Object(T.jsx)(Ft.a,{item:!0,xs:12,sm:3,className:r.actionButtonArea,children:Object(T.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(T.jsx)(Sa.a,{}),onClick:function(e){a({type:"addDataOpen"})},children:n("settings.add-master")})})]})})}var qn=["admin","front"];function An(){var e=Object(It.d)(),t=e.control,a=e.formState.errors,n=Object(g.a)().t;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ut,{name:"name",control:t,label:n("settings.header.role.name"),required:!0,selectList:qn.map((function(e){return{label:n("settings.view.role.name.".concat(e)),value:e}})),errors:a}),Object(T.jsx)(Zt,{name:"members",control:t,label:n("settings.header.role.members"),errors:a})]})}function Hn(){var e=Object(g.a)().t,t=Object(n.useReducer)(Mn,{mode:"addData",inputOpen:!1}),a=Object(v.a)(t,2),r=a[0],i=a[1],c=[{title:e("settings.header.role.name"),field:"name",render:function(t){return e("settings.view.role.name.".concat(t.name))}}];return Object(T.jsx)(Ue,{adminMode:!0,menuOpen:!0,children:Object(T.jsxs)(ce.a,{square:!0,children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Ln,{master:"role",dispatch:i})}),Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Bn,{inputFields:{type:"role",item:Object(T.jsx)(An,{}),defaultValues:{mode:"ins",id:"",name:"admin",members:[]}},columns:c,dataDialogHook:{state:r,dispatch:i}})})]})})}function zn(){var e=Object(It.d)(),t=e.control,a=e.formState.errors,n=Object(g.a)().t;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ut,{name:"name",control:t,label:n("settings.header.location.name"),required:!0,errors:a}),Object(T.jsx)(Ut,{name:"url",control:t,label:n("settings.header.location.url"),required:!0,validation:{pattern:{value:/^[a-z0-9]+$/,message:n("settings.form.location.error.url.pattern")}},errors:a}),Object(T.jsx)(Ut,{name:"sort",control:t,label:n("settings.header.location.sort"),errors:a})]})}function Wn(){var e=Object(g.a)().t,t=Object(n.useReducer)(Mn,{mode:"addData",inputOpen:!1}),a=Object(v.a)(t,2),r=a[0],i=a[1],c=[{title:e("settings.header.location.name"),field:"name"},{title:e("settings.header.location.url"),field:"url"},{title:e("settings.header.location.sort"),field:"sort"}];return Object(T.jsx)(Ue,{adminMode:!0,menuOpen:!0,children:Object(T.jsxs)(ce.a,{square:!0,children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Ln,{master:"location",dispatch:i})}),Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Bn,{inputFields:{type:"location",item:Object(T.jsx)(zn,{}),defaultValues:{mode:"ins",id:"",name:"",url:"",sort:""}},columns:c,dataDialogHook:{state:r,dispatch:i}})})]})})}function Kn(){var e=Object(It.d)(),t=e.control,a=e.setValue,r=e.formState.errors,i=Object(g.a)().t,c=Object(It.e)({control:t,name:"limitedPublic"}),s=Object(n.useState)(!1),o=Object(v.a)(s,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){d(c),c||a("members",[],{shouldDirty:!0})}),[c,a]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ut,{name:"name",control:t,label:i("settings.header.category.name"),required:!0,errors:r}),Object(T.jsx)(Ut,{name:"sort",control:t,label:i("settings.header.category.sort"),errors:r}),Object(T.jsx)(na.a,{control:Object(T.jsx)(It.a,{name:"limitedPublic",control:t,render:function(e){var t=e.field;return Object(T.jsx)(ra.a,{onChange:function(e){return t.onChange(e.target.checked)},checked:t.value,color:"primary"})}}),label:i("settings.header.category.limited-public")}),Object(T.jsx)(Zt,{name:"members",control:t,label:i("settings.header.category.members"),errors:r,style:l?void 0:{display:"none"}})]})}function Jn(){var e=Object(g.a)().t,t=Object(n.useReducer)(Mn,{mode:"addData",inputOpen:!1}),a=Object(v.a)(t,2),r=a[0],i=a[1],c=[{title:e("settings.header.category.name"),field:"name"},{title:e("settings.header.category.sort"),field:"sort"},{title:e("settings.header.category.limited-public"),field:"limitedPublic",type:"boolean"}];return Object(T.jsx)(Ue,{adminMode:!0,menuOpen:!0,children:Object(T.jsxs)(ce.a,{square:!0,children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Ln,{master:"category",dispatch:i})}),Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Bn,{inputFields:{type:"category",item:Object(T.jsx)(Kn,{}),defaultValues:{mode:"ins",id:"",name:"",sort:"",limitedPublic:!1,members:[]}},columns:c,dataDialogHook:{state:r,dispatch:i}})})]})})}function Un(e){var t=e.locations,a=e.categories,r=Object(It.d)(),i=r.control,c=r.setValue,s=r.formState.errors,o=Object(g.a)().t,l=Object(n.useState)(!1),d=Object(v.a)(l,2),u=d[0],b=d[1],j=Object(It.e)({control:i,name:"type"});return Object(n.useEffect)((function(){"free"===j?(c("teaSupply",!1,{shouldDirty:!0}),b(!0)):b(!1)}),[c,j]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Ut,{name:"name",control:i,label:o("settings.header.room.name"),required:!0,errors:s}),Object(T.jsx)(Ut,{name:"email",control:i,label:o("settings.header.room.email"),required:!0,validation:{pattern:{value:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,message:o("settings.form.room.error.email.pattern")}},errors:s}),Object(T.jsx)(Ut,{name:"sort",control:i,label:o("settings.header.room.sort"),errors:s}),Object(T.jsx)(Ut,{name:"usageRange",control:i,label:o("settings.header.room.usage-range"),required:!0,selectList:zt.map((function(e){return{label:o("settings.view.room.usage-range.".concat(e)),value:e}})),errors:s}),Object(T.jsx)(Ut,{name:"type",control:i,label:o("settings.header.room.type"),required:!0,selectList:At.map((function(e){return{label:o("settings.view.room.type.".concat(e)),value:e}})),errors:s}),Object(T.jsx)(na.a,{control:Object(T.jsx)(It.a,{name:"teaSupply",control:i,render:function(e){var t=e.field;return Object(T.jsx)(ra.a,{onChange:function(e){return t.onChange(e.target.checked)},checked:t.value,color:"primary",disabled:u})}}),label:o("settings.header.room.tea-supply"),style:u?{display:"none"}:void 0}),Object(T.jsx)(Ut,{name:"location",control:i,label:o("settings.header.room.location"),required:!0,selectList:null===t||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e.id}})),errors:s}),Object(T.jsx)(Ut,{name:"category",control:i,label:o("settings.header.room.category"),required:!0,selectList:null===a||void 0===a?void 0:a.map((function(e){return{label:e.name,value:e.id}})),errors:s})]})}function Gn(){var e=Object(g.a)().t,t=Object(n.useReducer)(Mn,{mode:"addData",inputOpen:!1}),a=Object(v.a)(t,2),r=a[0],i=a[1],c=We("/location/choices",[]),s=Object(v.a)(c,1)[0].data,o=We("/category/choices",[]),l=Object(v.a)(o,1)[0].data,d=[{title:e("settings.header.room.name"),field:"name"},{title:e("settings.header.room.sort"),field:"sort"},{title:e("settings.header.room.usage-range"),field:"usageRange",render:function(t){return e("settings.view.room.usage-range.".concat(t.usageRange))}},{title:e("settings.header.room.type"),field:"type",render:function(t){return e("settings.view.room.type.".concat(t.type))}},{title:e("settings.header.room.tea-supply"),field:"teaSupply",type:"boolean"},{title:e("settings.header.room.location"),field:"location",render:function(e){var t=null===s||void 0===s?void 0:s.find((function(t){return t.id===e.location}));return null===t||void 0===t?void 0:t.name}},{title:e("settings.header.room.category"),field:"category",render:function(e){var t=null===l||void 0===l?void 0:l.find((function(t){return t.id===e.category}));return null===t||void 0===t?void 0:t.name}}];return Object(T.jsx)(Ue,{adminMode:!0,menuOpen:!0,children:Object(T.jsxs)(ce.a,{square:!0,children:[Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Ln,{master:"room",dispatch:i})}),Object(T.jsx)(N.a,{p:2,children:Object(T.jsx)(Bn,{inputFields:{type:"room",item:Object(T.jsx)(Un,{locations:s,categories:l}),defaultValues:{mode:"ins",id:"",name:"",email:"",usageRange:"none",type:"rooms",sort:"",teaSupply:!1,location:"",category:""}},columns:d,dataDialogHook:{state:r,dispatch:i}})})]})})}function Yn(){return Object(T.jsx)(p.a,{children:Object(T.jsxs)(O.d,{children:[Object(T.jsx)(O.b,{exact:!0,path:"/:location?/login",component:Y}),Object(T.jsx)(O.b,{exact:!0,path:"/oauth/redirect",component:re}),Object(T.jsx)(O.b,{exact:!0,path:"/:location/main",component:Ma}),Object(T.jsx)(O.b,{exact:!0,path:"/:location/main/byroom",component:un}),Object(T.jsx)(O.b,{exact:!0,path:"/:location/front",component:Dn}),Object(T.jsx)(O.b,{exact:!0,path:"/:location?/settings/role",component:Hn}),Object(T.jsx)(O.b,{exact:!0,path:"/:location?/settings/location",component:Wn}),Object(T.jsx)(O.b,{exact:!0,path:"/:location?/settings/category",component:Jn}),Object(T.jsx)(O.b,{exact:!0,path:"/:location?/settings/room",component:Gn}),Object(T.jsx)(O.a,{from:"/",to:"/login"})]})})}var Zn=a(419),$n=a(420),Xn=a(424),_n=a(423),Qn=a(212),er=a(172),tr=function(e){Object(Xn.a)(a,e);var t=Object(_n.a)(a);function a(){return Object(Zn.a)(this,a),t.apply(this,arguments)}return Object($n.a)(a,[{key:"getCalendarHeaderText",value:function(e){return Object(en.default)(e,"Yo MMM",{locale:er.a})}},{key:"getDatePickerHeaderText",value:function(e){return Object(en.default)(e,"MMMd\u65e5",{locale:er.a})}}]),a}(Qn.default);var ar=function(){return Object(T.jsxs)(s.a,{theme:j,children:[Object(T.jsx)(m.a,{}),Object(T.jsx)(Qa.a,{utils:tr,locale:er.a,children:Object(T.jsx)(Yn,{})})]})},nr=a(421),rr=a(422),ir=a(175),cr={en:{translation:nr},ja:{translation:rr}};kt.a.use(ir.e).init({lng:"ja",fallbackLng:"ja",interpolation:{escapeValue:!1},react:{useSuspense:!1},resources:cr});kt.a;c.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(ar,{})}),document.getElementById("root"))}},[[581,1,2]]]);
//# sourceMappingURL=main.ef47a3c7.chunk.js.map